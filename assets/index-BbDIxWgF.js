(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function uw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var _p={exports:{}},yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function QA(){if(Hb)return yc;Hb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return yc.Fragment=e,yc.jsx=t,yc.jsxs=t,yc}var Gb;function KA(){return Gb||(Gb=1,_p.exports=QA()),_p.exports}var f=KA(),bp={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function XA(){if($b)return Pe;$b=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,C={};function k(P,oe,pe){this.props=P,this.context=oe,this.refs=C,this.updater=pe||R}k.prototype.isReactComponent={},k.prototype.setState=function(P,oe){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,oe,"setState")},k.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function F(){}F.prototype=k.prototype;function J(P,oe,pe){this.props=P,this.context=oe,this.refs=C,this.updater=pe||R}var se=J.prototype=new F;se.constructor=J,M(se,k.prototype),se.isPureReactComponent=!0;var de=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function D(P,oe,pe,$,ve,ke){return pe=ke.ref,{$$typeof:s,type:P,key:oe,ref:pe!==void 0?pe:null,props:ke}}function S(P,oe){return D(P.type,oe,void 0,void 0,void 0,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function j(P){var oe={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(pe){return oe[pe]})}var U=/\/+/g;function L(P,oe){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):oe.toString(36)}function N(){}function Ve(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(oe){P.status==="pending"&&(P.status="fulfilled",P.value=oe)},function(oe){P.status==="pending"&&(P.status="rejected",P.reason=oe)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Le(P,oe,pe,$,ve){var ke=typeof P;(ke==="undefined"||ke==="boolean")&&(P=null);var Re=!1;if(P===null)Re=!0;else switch(ke){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(P.$$typeof){case s:case e:Re=!0;break;case _:return Re=P._init,Le(Re(P._payload),oe,pe,$,ve)}}if(Re)return ve=ve(P),Re=$===""?"."+L(P,0):$,de(ve)?(pe="",Re!=null&&(pe=Re.replace(U,"$&/")+"/"),Le(ve,oe,pe,"",function(An){return An})):ve!=null&&(I(ve)&&(ve=S(ve,pe+(ve.key==null||P&&P.key===ve.key?"":(""+ve.key).replace(U,"$&/")+"/")+Re)),oe.push(ve)),1;Re=0;var wt=$===""?".":$+":";if(de(P))for(var st=0;st<P.length;st++)$=P[st],ke=wt+L($,st),Re+=Le($,oe,pe,ke,ve);else if(st=T(P),typeof st=="function")for(P=st.call(P),st=0;!($=P.next()).done;)$=$.value,ke=wt+L($,st++),Re+=Le($,oe,pe,ke,ve);else if(ke==="object"){if(typeof P.then=="function")return Le(Ve(P),oe,pe,$,ve);throw oe=String(P),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Re}function W(P,oe,pe){if(P==null)return P;var $=[],ve=0;return Le(P,$,"","",function(ke){return oe.call(pe,ke,ve++)}),$}function ue(P){if(P._status===-1){var oe=P._result;oe=oe(),oe.then(function(pe){(P._status===0||P._status===-1)&&(P._status=1,P._result=pe)},function(pe){(P._status===0||P._status===-1)&&(P._status=2,P._result=pe)}),P._status===-1&&(P._status=0,P._result=oe)}if(P._status===1)return P._result.default;throw P._result}var we=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ue(){}return Pe.Children={map:W,forEach:function(P,oe,pe){W(P,function(){oe.apply(this,arguments)},pe)},count:function(P){var oe=0;return W(P,function(){oe++}),oe},toArray:function(P){return W(P,function(oe){return oe})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=k,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=J,Pe.StrictMode=i,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return le.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cloneElement=function(P,oe,pe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var $=M({},P.props),ve=P.key,ke=void 0;if(oe!=null)for(Re in oe.ref!==void 0&&(ke=void 0),oe.key!==void 0&&(ve=""+oe.key),oe)!ce.call(oe,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&oe.ref===void 0||($[Re]=oe[Re]);var Re=arguments.length-2;if(Re===1)$.children=pe;else if(1<Re){for(var wt=Array(Re),st=0;st<Re;st++)wt[st]=arguments[st+2];$.children=wt}return D(P.type,ve,void 0,void 0,ke,$)},Pe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Pe.createElement=function(P,oe,pe){var $,ve={},ke=null;if(oe!=null)for($ in oe.key!==void 0&&(ke=""+oe.key),oe)ce.call(oe,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ve[$]=oe[$]);var Re=arguments.length-2;if(Re===1)ve.children=pe;else if(1<Re){for(var wt=Array(Re),st=0;st<Re;st++)wt[st]=arguments[st+2];ve.children=wt}if(P&&P.defaultProps)for($ in Re=P.defaultProps,Re)ve[$]===void 0&&(ve[$]=Re[$]);return D(P,ke,void 0,void 0,null,ve)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=I,Pe.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:ue}},Pe.memo=function(P,oe){return{$$typeof:y,type:P,compare:oe===void 0?null:oe}},Pe.startTransition=function(P){var oe=le.T,pe={};le.T=pe;try{var $=P(),ve=le.S;ve!==null&&ve(pe,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(Ue,we)}catch(ke){we(ke)}finally{le.T=oe}},Pe.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Pe.use=function(P){return le.H.use(P)},Pe.useActionState=function(P,oe,pe){return le.H.useActionState(P,oe,pe)},Pe.useCallback=function(P,oe){return le.H.useCallback(P,oe)},Pe.useContext=function(P){return le.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,oe){return le.H.useDeferredValue(P,oe)},Pe.useEffect=function(P,oe,pe){var $=le.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(P,oe)},Pe.useId=function(){return le.H.useId()},Pe.useImperativeHandle=function(P,oe,pe){return le.H.useImperativeHandle(P,oe,pe)},Pe.useInsertionEffect=function(P,oe){return le.H.useInsertionEffect(P,oe)},Pe.useLayoutEffect=function(P,oe){return le.H.useLayoutEffect(P,oe)},Pe.useMemo=function(P,oe){return le.H.useMemo(P,oe)},Pe.useOptimistic=function(P,oe){return le.H.useOptimistic(P,oe)},Pe.useReducer=function(P,oe,pe){return le.H.useReducer(P,oe,pe)},Pe.useRef=function(P){return le.H.useRef(P)},Pe.useState=function(P){return le.H.useState(P)},Pe.useSyncExternalStore=function(P,oe,pe){return le.H.useSyncExternalStore(P,oe,pe)},Pe.useTransition=function(){return le.H.useTransition()},Pe.version="19.1.0",Pe}var Yb;function Ag(){return Yb||(Yb=1,bp.exports=XA()),bp.exports}var B=Ag();const Tn=uw(B);var Ep={exports:{}},vc={},wp={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function WA(){return Qb||(Qb=1,function(s){function e(W,ue){var we=W.length;W.push(ue);e:for(;0<we;){var Ue=we-1>>>1,P=W[Ue];if(0<o(P,ue))W[Ue]=ue,W[we]=P,we=Ue;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ue=W[0],we=W.pop();if(we!==ue){W[0]=we;e:for(var Ue=0,P=W.length,oe=P>>>1;Ue<oe;){var pe=2*(Ue+1)-1,$=W[pe],ve=pe+1,ke=W[ve];if(0>o($,we))ve<P&&0>o(ke,$)?(W[Ue]=ke,W[ve]=we,Ue=ve):(W[Ue]=$,W[pe]=we,Ue=pe);else if(ve<P&&0>o(ke,we))W[Ue]=ke,W[ve]=we,Ue=ve;else break e}}return ue}function o(W,ue){var we=W.sortIndex-ue.sortIndex;return we!==0?we:W.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],y=[],_=1,w=null,T=3,R=!1,M=!1,C=!1,k=!1,F=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function de(W){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=W)i(y),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(y)}}function le(W){if(C=!1,de(W),!M)if(t(g)!==null)M=!0,ce||(ce=!0,L());else{var ue=t(y);ue!==null&&Le(le,ue.startTime-W)}}var ce=!1,D=-1,S=5,I=-1;function j(){return k?!0:!(s.unstable_now()-I<S)}function U(){if(k=!1,ce){var W=s.unstable_now();I=W;var ue=!0;try{e:{M=!1,C&&(C=!1,J(D),D=-1),R=!0;var we=T;try{t:{for(de(W),w=t(g);w!==null&&!(w.expirationTime>W&&j());){var Ue=w.callback;if(typeof Ue=="function"){w.callback=null,T=w.priorityLevel;var P=Ue(w.expirationTime<=W);if(W=s.unstable_now(),typeof P=="function"){w.callback=P,de(W),ue=!0;break t}w===t(g)&&i(g),de(W)}else i(g);w=t(g)}if(w!==null)ue=!0;else{var oe=t(y);oe!==null&&Le(le,oe.startTime-W),ue=!1}}break e}finally{w=null,T=we,R=!1}ue=void 0}}finally{ue?L():ce=!1}}}var L;if(typeof se=="function")L=function(){se(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ve=N.port2;N.port1.onmessage=U,L=function(){Ve.postMessage(null)}}else L=function(){F(U,0)};function Le(W,ue){D=F(function(){W(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(W){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var we=T;T=ue;try{return W()}finally{T=we}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var we=T;T=W;try{return ue()}finally{T=we}},s.unstable_scheduleCallback=function(W,ue,we){var Ue=s.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ue+we:Ue):we=Ue,W){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=we+P,W={id:_++,callback:ue,priorityLevel:W,startTime:we,expirationTime:P,sortIndex:-1},we>Ue?(W.sortIndex=we,e(y,W),t(g)===null&&W===t(y)&&(C?(J(D),D=-1):C=!0,Le(le,we-Ue))):(W.sortIndex=P,e(g,W),M||R||(M=!0,ce||(ce=!0,L()))),W},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(W){var ue=T;return function(){var we=T;T=ue;try{return W.apply(this,arguments)}finally{T=we}}}}(Tp)),Tp}var Kb;function ZA(){return Kb||(Kb=1,wp.exports=WA()),wp.exports}var xp={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function JA(){if(Xb)return dn;Xb=1;var s=Ag();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:_}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},dn.flushSync=function(g){var y=h.T,_=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=_,i.d.f()}},dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},dn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,w=m(_,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:R}):_==="script"&&i.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,w=m(_,y.crossOrigin);i.d.L(g,_,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},dn.requestFormReset=function(g){i.d.r(g)},dn.unstable_batchedUpdates=function(g,y){return g(y)},dn.useFormState=function(g,y,_){return h.H.useFormState(g,y,_)},dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var Wb;function eS(){if(Wb)return xp.exports;Wb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),xp.exports=JA(),xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function tS(){if(Zb)return vc;Zb=1;var s=ZA(),e=Ag(),t=eS();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,l=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return m(d),n;if(p===l)return m(d),r;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=p;else{for(var E=!1,x=d.child;x;){if(x===a){E=!0,a=d,l=p;break}if(x===l){E=!0,l=d,a=p;break}x=x.sibling}if(!E){for(x=p.child;x;){if(x===a){E=!0,a=p,l=d;break}if(x===l){E=!0,l=p,a=d;break}x=x.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),se=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function Ve(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case se:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case de:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:Ve(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return Ve(n(r))}catch{}}return null}var Le=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ue=[],P=-1;function oe(n){return{current:n}}function pe(n){0>P||(n.current=Ue[P],Ue[P]=null,P--)}function $(n,r){P++,Ue[P]=n.current,n.current=r}var ve=oe(null),ke=oe(null),Re=oe(null),wt=oe(null);function st(n,r){switch($(Re,r),$(ke,n),$(ve,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?vb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=vb(r),n=_b(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}pe(ve),$(ve,n)}function An(){pe(ve),pe(ke),pe(Re)}function Hn(n){n.memoizedState!==null&&$(wt,n);var r=ve.current,a=_b(r,n.type);r!==a&&($(ke,n),$(ve,a))}function ls(n){ke.current===n&&(pe(ve),pe(ke)),wt.current===n&&(pe(wt),dc._currentValue=we)}var Ss=Object.prototype.hasOwnProperty,ir=s.unstable_scheduleCallback,Ns=s.unstable_cancelCallback,$r=s.unstable_shouldYield,$a=s.unstable_requestPaint,Sn=s.unstable_now,bu=s.unstable_getCurrentPriorityLevel,Yr=s.unstable_ImmediatePriority,V=s.unstable_UserBlockingPriority,Q=s.unstable_NormalPriority,ee=s.unstable_LowPriority,ye=s.unstable_IdlePriority,me=s.log,he=s.unstable_setDisableYieldValue,ge=null,xe=null;function qe(n){if(typeof me=="function"&&he(n),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(ge,n)}catch{}}var rt=Math.clz32?Math.clz32:or,ar=Math.log,Gn=Math.LN2;function or(n){return n>>>=0,n===0?32:31-(ar(n)/Gn|0)|0}var cs=256,us=4194304;function On(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function lr(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var x=l&134217727;return x!==0?(l=x&~p,l!==0?d=On(l):(E&=x,E!==0?d=On(E):a||(a=x&~n,a!==0&&(d=On(a))))):(x=l&~p,x!==0?d=On(x):E!==0?d=On(E):a||(a=l&~n,a!==0&&(d=On(a)))),d===0?0:r!==0&&r!==d&&(r&p)===0&&(p=d&-d,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:d}function cr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Qr(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fl(){var n=cs;return cs<<=1,(cs&4194048)===0&&(cs=256),n}function ml(){var n=us;return us<<=1,(us&62914560)===0&&(us=4194304),n}function ur(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function hr(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pl(n,r,a,l,d,p){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var x=n.entanglements,O=n.expirationTimes,Y=n.hiddenUpdates;for(a=E&~a;0<a;){var te=31-rt(a),ie=1<<te;x[te]=0,O[te]=-1;var K=Y[te];if(K!==null)for(Y[te]=null,te=0;te<K.length;te++){var X=K[te];X!==null&&(X.lane&=-536870913)}a&=~ie}l!==0&&Rs(n,l,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~r))}function Rs(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-rt(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function gl(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-rt(a),d=1<<l;d&r|n[l]&r&&(n[l]|=r),a&=~d}}function Kr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ya(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Xr(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:Lb(n.type))}function Eu(n,r){var a=ue.p;try{return ue.p=n,r()}finally{ue.p=a}}var gt=Math.random().toString(36).slice(2),Ft="__reactFiber$"+gt,Ot="__reactProps$"+gt,$n="__reactContainer$"+gt,yl="__reactEvents$"+gt,wf="__reactListeners$"+gt,Wr="__reactHandles$"+gt,wu="__reactResources$"+gt,Ji="__reactMarker$"+gt;function Zr(n){delete n[Ft],delete n[Ot],delete n[yl],delete n[wf],delete n[Wr]}function dr(n){var r=n[Ft];if(r)return r;for(var a=n.parentNode;a;){if(r=a[$n]||a[Ft]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Tb(n);n!==null;){if(a=n[Ft])return a;n=Tb(n)}return r}n=a,a=n.parentNode}return null}function Cs(n){if(n=n[Ft]||n[$n]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Is(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function vn(n){var r=n[wu];return r||(r=n[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(n){n[Ji]=!0}var vl=new Set,Qa={};function hs(n,r){fr(n,r),fr(n+"Capture",r)}function fr(n,r){for(Qa[n]=r,n=0;n<r.length;n++)vl.add(r[n])}var Tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},ea={};function Au(n){return Ss.call(ea,n)?!0:Ss.call(xu,n)?!1:Tu.test(n)?ea[n]=!0:(xu[n]=!0,!1)}function Jr(n,r,a){if(Au(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Ds(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function nn(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var ta,Su;function mr(n){if(ta===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ta=r&&r[1]||"",Su=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+n+Su}var Ka=!1;function Xa(n,r){if(!n||Ka)return"";Ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(X){K=X}n.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),E=p[0],x=p[1];if(E&&x){var O=E.split(`
`),Y=x.split(`
`);for(d=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(l===O.length||d===Y.length)for(l=O.length-1,d=Y.length-1;1<=l&&0<=d&&O[l]!==Y[d];)d--;for(;1<=l&&0<=d;l--,d--)if(O[l]!==Y[d]){if(l!==1||d!==1)do if(l--,d--,0>d||O[l]!==Y[d]){var te=`
`+O[l].replace(" at new "," at ");return n.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",n.displayName)),te}while(1<=l&&0<=d);break}}}finally{Ka=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?mr(a):""}function _l(n){switch(n.tag){case 26:case 27:case 5:return mr(n.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 15:return Xa(n.type,!1);case 11:return Xa(n.type.render,!1);case 1:return Xa(n.type,!0);case 31:return mr("Activity");default:return""}}function Wa(n){try{var r="";do r+=_l(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bl(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Tf(n){var r=bl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,p.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Za(n){n._valueTracker||(n._valueTracker=Tf(n))}function El(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=bl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function na(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xf=/[\n"\\]/g;function Mt(n){return n.replace(xf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Mn(n,r,a,l,d,p,E,x){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+_n(r)):n.value!==""+_n(r)&&(n.value=""+_n(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?ei(n,E,_n(r)):a!=null?ei(n,E,_n(a)):l!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+_n(x):n.removeAttribute("name")}function sa(n,r,a,l,d,p,E,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+_n(a):"",r=r!=null?""+_n(r):a,x||r===n.value||(n.value=r),n.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=x?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function ei(n,r,a){r==="number"&&na(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function pr(n,r,a,l){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+_n(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function ct(n,r,a){if(r!=null&&(r=""+_n(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+_n(a):""}function ra(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Le(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=_n(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Yn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||ia.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function wl(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Nu(n,d,l)}else for(var p in r)r.hasOwnProperty(p)&&Nu(n,p,r[p])}function Tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(n){return Sf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var gr=null;function Qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yr=null,vr=null;function xl(n){var r=Cs(n);if(r&&(n=r.stateNode)){var a=n[Ot]||null;e:switch(n=r.stateNode,r.type){case"input":if(Mn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var d=l[Ot]||null;if(!d)throw Error(i(90));Mn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&El(l)}break e;case"textarea":ct(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&pr(n,!!a.multiple,r,!1)}}}var js=!1;function Ru(n,r,a){if(js)return n(r,a);js=!0;try{var l=n(r);return l}finally{if(js=!1,(yr!==null||vr!==null)&&(Eh(),yr&&(r=yr,n=vr,vr=yr=null,xl(r),n)))for(r=0;r<n.length;r++)xl(n[r])}}function aa(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kn=!1;if(ds)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Kn=!1}var Os=null,ti=null,_r=null;function Al(){if(_r)return _r;var n,r=ti,a=r.length,l,d="value"in Os?Os.value:Os.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var E=a-n;for(l=1;l<=E&&r[a-l]===d[p-l];l++);return _r=d.slice(n,1<l?1-l:void 0)}function Ms(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ks(){return!0}function Sl(){return!1}function Kt(n){function r(a,l,d,p,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ks:Sl,this.isPropagationStopped=Sl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),r}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Kt(tt),la=_({},tt,{view:0,detail:0}),Cu=Kt(la),to,no,Vs,ca=_({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vs&&(Vs&&n.type==="mousemove"?(to=n.screenX-Vs.screenX,no=n.screenY-Vs.screenY):no=to=0,Vs=n),to)},movementY:function(n){return"movementY"in n?n.movementY:no}}),Xn=Kt(ca),Iu=_({},ca,{dataTransfer:0}),Nf=Kt(Iu),ua=_({},la,{relatedTarget:0}),so=Kt(ua),Nl=_({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=Kt(Nl),Du=_({},tt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),io=Kt(Du),Rf=_({},tt,{data:0}),Rl=Kt(Rf),ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Ou[n])?!!r[n]:!1}function da(){return Cl}var Mu=_({},la,{key:function(n){if(n.key){var r=ha[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ms(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ju[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(n){return n.type==="keypress"?Ms(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ms(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ao=Kt(Mu),ku=_({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Kt(ku),br=_({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),Vu=Kt(br),Pu=_({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lu=Kt(Pu),Uu=_({},ca,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=Kt(Uu),bn=_({},tt,{newState:0,oldState:0}),qu=Kt(bn),Bu=[9,13,27,32],Ps=ds&&"CompositionEvent"in window,u=null;ds&&"documentMode"in document&&(u=document.documentMode);var v=ds&&"TextEvent"in window&&!u,b=ds&&(!Ps||u&&8<u&&11>=u),A=" ",H=!1;function Z(n,r){switch(n){case"keyup":return Bu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ke=!1;function Ht(n,r){switch(n){case"compositionend":return fe(r);case"keypress":return r.which!==32?null:(H=!0,A);case"textInput":return n=r.data,n===A&&H?null:n;default:return null}}function Xe(n,r){if(Ke)return n==="compositionend"||!Ps&&Z(n,r)?(n=Al(),_r=ti=Os=null,Ke=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b&&r.locale!=="ko"?null:r.data;default:return null}}var Xt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Xt[n.type]:r==="textarea"}function Er(n,r,a,l){yr?vr?vr.push(l):vr=[l]:yr=l,r=Nh(r,"onChange"),0<r.length&&(a=new eo("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var sn=null,Ls=null;function Dl(n){fb(n,0)}function zu(n){var r=Is(n);if(El(r))return n}function My(n,r){if(n==="change")return r}var ky=!1;if(ds){var Cf;if(ds){var If="oninput"in document;if(!If){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),If=typeof Vy.oninput=="function"}Cf=If}else Cf=!1;ky=Cf&&(!document.documentMode||9<document.documentMode)}function Py(){sn&&(sn.detachEvent("onpropertychange",Ly),Ls=sn=null)}function Ly(n){if(n.propertyName==="value"&&zu(Ls)){var r=[];Er(r,Ls,n,Qn(n)),Ru(Dl,r)}}function xx(n,r,a){n==="focusin"?(Py(),sn=r,Ls=a,sn.attachEvent("onpropertychange",Ly)):n==="focusout"&&Py()}function Ax(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zu(Ls)}function Sx(n,r){if(n==="click")return zu(r)}function Nx(n,r){if(n==="input"||n==="change")return zu(r)}function Rx(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var kn=typeof Object.is=="function"?Object.is:Rx;function jl(n,r){if(kn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ss.call(r,d)||!kn(n[d],r[d]))return!1}return!0}function Uy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qy(n,r){var a=Uy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Uy(a)}}function By(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?By(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function zy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=na(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=na(n.document)}return r}function Df(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Cx=ds&&"documentMode"in document&&11>=document.documentMode,lo=null,jf=null,Ol=null,Of=!1;function Fy(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Of||lo==null||lo!==na(l)||(l=lo,"selectionStart"in l&&Df(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ol&&jl(Ol,l)||(Ol=l,l=Nh(jf,"onSelect"),0<l.length&&(r=new eo("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=lo)))}function fa(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var co={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},Mf={},Hy={};ds&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function ma(n){if(Mf[n])return Mf[n];if(!co[n])return n;var r=co[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Hy)return Mf[n]=r[a];return n}var Gy=ma("animationend"),$y=ma("animationiteration"),Yy=ma("animationstart"),Ix=ma("transitionrun"),Dx=ma("transitionstart"),jx=ma("transitioncancel"),Qy=ma("transitionend"),Ky=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function fs(n,r){Ky.set(n,r),hs(r,[n])}var Xy=new WeakMap;function Wn(n,r){if(typeof n=="object"&&n!==null){var a=Xy.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Wa(r)},Xy.set(n,r),r)}return{value:n,source:r,stack:Wa(r)}}var Zn=[],uo=0,Vf=0;function Fu(){for(var n=uo,r=Vf=uo=0;r<n;){var a=Zn[r];Zn[r++]=null;var l=Zn[r];Zn[r++]=null;var d=Zn[r];Zn[r++]=null;var p=Zn[r];if(Zn[r++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}p!==0&&Wy(a,d,p)}}function Hu(n,r,a,l){Zn[uo++]=n,Zn[uo++]=r,Zn[uo++]=a,Zn[uo++]=l,Vf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Pf(n,r,a,l){return Hu(n,r,a,l),Gu(n)}function ho(n,r){return Hu(n,null,null,r),Gu(n)}function Wy(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&r!==null&&(d=31-rt(a),n=p.hiddenUpdates,l=n[d],l===null?n[d]=[r]:l.push(r),r.lane=a|536870912),p):null}function Gu(n){if(50<rc)throw rc=0,Fm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var fo={};function Ox(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,r,a,l){return new Ox(n,r,a,l)}function Lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wr(n,r){var a=n.alternate;return a===null?(a=Vn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Zy(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function $u(n,r,a,l,d,p){var E=0;if(l=n,typeof n=="function")Lf(n)&&(E=1);else if(typeof n=="string")E=kA(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Vn(31,a,r,d),n.elementType=I,n.lanes=p,n;case M:return pa(a.children,d,p,r);case C:E=8,d|=24;break;case k:return n=Vn(12,a,r,d|2),n.elementType=k,n.lanes=p,n;case le:return n=Vn(13,a,r,d),n.elementType=le,n.lanes=p,n;case ce:return n=Vn(19,a,r,d),n.elementType=ce,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:case se:E=10;break e;case J:E=9;break e;case de:E=11;break e;case D:E=14;break e;case S:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return r=Vn(E,a,r,d),r.elementType=n,r.type=l,r.lanes=p,r}function pa(n,r,a,l){return n=Vn(7,n,l,r),n.lanes=a,n}function Uf(n,r,a){return n=Vn(6,n,null,r),n.lanes=a,n}function qf(n,r,a){return r=Vn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var mo=[],po=0,Yu=null,Qu=0,Jn=[],es=0,ga=null,Tr=1,xr="";function ya(n,r){mo[po++]=Qu,mo[po++]=Yu,Yu=n,Qu=r}function Jy(n,r,a){Jn[es++]=Tr,Jn[es++]=xr,Jn[es++]=ga,ga=n;var l=Tr;n=xr;var d=32-rt(l)-1;l&=~(1<<d),a+=1;var p=32-rt(r)+d;if(30<p){var E=d-d%5;p=(l&(1<<E)-1).toString(32),l>>=E,d-=E,Tr=1<<32-rt(r)+d|a<<d|l,xr=p+n}else Tr=1<<p|a<<d|l,xr=n}function Bf(n){n.return!==null&&(ya(n,1),Jy(n,1,0))}function zf(n){for(;n===Yu;)Yu=mo[--po],mo[po]=null,Qu=mo[--po],mo[po]=null;for(;n===ga;)ga=Jn[--es],Jn[es]=null,xr=Jn[--es],Jn[es]=null,Tr=Jn[--es],Jn[es]=null}var En=null,Tt=null,et=!1,va=null,Us=!1,Ff=Error(i(519));function _a(n){var r=Error(i(418,""));throw Vl(Wn(r,n)),Ff}function ev(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Ft]=n,r[Ot]=l,a){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(a=0;a<ac.length;a++)Ge(ac[a],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),sa(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Za(r);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),ra(r,l.value,l.defaultValue,l.children),Za(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||yb(r.textContent,a)?(l.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),l.onScroll!=null&&Ge("scroll",r),l.onScrollEnd!=null&&Ge("scrollend",r),l.onClick!=null&&(r.onclick=Rh),r=!0):r=!1,r||_a(n)}function tv(n){for(En=n.return;En;)switch(En.tag){case 5:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:En=En.return}}function Ml(n){if(n!==En)return!1;if(!et)return tv(n),et=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||ip(n.type,n.memoizedProps)),a=!a),a&&Tt&&_a(n),tv(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){Tt=ps(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}Tt=null}}else r===27?(r=Tt,yi(n.type)?(n=cp,cp=null,Tt=n):Tt=r):Tt=En?ps(n.stateNode.nextSibling):null;return!0}function kl(){Tt=En=null,et=!1}function nv(){var n=va;return n!==null&&(Cn===null?Cn=n:Cn.push.apply(Cn,n),va=null),n}function Vl(n){va===null?va=[n]:va.push(n)}var Hf=oe(null),ba=null,Ar=null;function ni(n,r,a){$(Hf,r._currentValue),r._currentValue=a}function Sr(n){n._currentValue=Hf.current,pe(Hf)}function Gf(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function $f(n,r,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var E=d.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=d;for(var O=0;O<r.length;O++)if(x.context===r[O]){p.lanes|=a,x=p.alternate,x!==null&&(x.lanes|=a),Gf(p.return,a,n),l||(E=null);break e}p=x.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=a,p=E.alternate,p!==null&&(p.lanes|=a),Gf(E,a,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Pl(n,r,a,l){n=null;for(var d=r,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var x=d.type;kn(d.pendingProps.value,E.value)||(n!==null?n.push(x):n=[x])}}else if(d===wt.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(dc):n=[dc])}d=d.return}n!==null&&$f(r,n,a,l),r.flags|=262144}function Ku(n){for(n=n.firstContext;n!==null;){if(!kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ea(n){ba=n,Ar=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function hn(n){return sv(ba,n)}function Xu(n,r){return ba===null&&Ea(n),sv(n,r)}function sv(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ar===null){if(n===null)throw Error(i(308));Ar=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ar=Ar.next=r;return a}var Mx=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},kx=s.unstable_scheduleCallback,Vx=s.unstable_NormalPriority,$t={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new Mx,data:new Map,refCount:0}}function Ll(n){n.refCount--,n.refCount===0&&kx(Vx,function(){n.controller.abort()})}var Ul=null,Qf=0,go=0,yo=null;function Px(n,r){if(Ul===null){var a=Ul=[];Qf=0,go=Xm(),yo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Qf++,r.then(rv,rv),r}function rv(){if(--Qf===0&&Ul!==null){yo!==null&&(yo.status="fulfilled");var n=Ul;Ul=null,go=0,yo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Lx(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var iv=W.S;W.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Px(n,r),iv!==null&&iv(n,r)};var wa=oe(null);function Kf(){var n=wa.current;return n!==null?n:mt.pooledCache}function Wu(n,r){r===null?$(wa,wa.current):$(wa,r.pool)}function av(){var n=Kf();return n===null?null:{parent:$t._currentValue,pool:n}}var ql=Error(i(460)),ov=Error(i(474)),Zu=Error(i(542)),Xf={then:function(){}};function lv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ju(){}function cv(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Ju,Ju),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,hv(n),n;default:if(typeof r.status=="string")r.then(Ju,Ju);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,hv(n),n}throw Bl=r,ql}}var Bl=null;function uv(){if(Bl===null)throw Error(i(459));var n=Bl;return Bl=null,n}function hv(n){if(n===ql||n===Zu)throw Error(i(483))}var si=!1;function Wf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ii(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Gu(n),Wy(n,null,a),r}return Hu(n,l,r,a),Gu(n)}function zl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,gl(n,a)}}function Jf(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?d=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var em=!1;function Fl(){if(em){var n=yo;if(n!==null)throw n}}function Hl(n,r,a,l){em=!1;var d=n.updateQueue;si=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var O=x,Y=O.next;O.next=null,E===null?p=Y:E.next=Y,E=O;var te=n.alternate;te!==null&&(te=te.updateQueue,x=te.lastBaseUpdate,x!==E&&(x===null?te.firstBaseUpdate=Y:x.next=Y,te.lastBaseUpdate=O))}if(p!==null){var ie=d.baseState;E=0,te=Y=O=null,x=p;do{var K=x.lane&-536870913,X=K!==x.lane;if(X?(We&K)===K:(l&K)===K){K!==0&&K===go&&(em=!0),te!==null&&(te=te.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var je=n,Ne=x;K=r;var dt=a;switch(Ne.tag){case 1:if(je=Ne.payload,typeof je=="function"){ie=je.call(dt,ie,K);break e}ie=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ne.payload,K=typeof je=="function"?je.call(dt,ie,K):je,K==null)break e;ie=_({},ie,K);break e;case 2:si=!0}}K=x.callback,K!==null&&(n.flags|=64,X&&(n.flags|=8192),X=d.callbacks,X===null?d.callbacks=[K]:X.push(K))}else X={lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},te===null?(Y=te=X,O=ie):te=te.next=X,E|=K;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;X=x,x=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);te===null&&(O=ie),d.baseState=O,d.firstBaseUpdate=Y,d.lastBaseUpdate=te,p===null&&(d.shared.lanes=0),fi|=E,n.lanes=E,n.memoizedState=ie}}function dv(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function fv(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)dv(a[n],r)}var vo=oe(null),eh=oe(0);function mv(n,r){n=Or,$(eh,n),$(vo,r),Or=n|r.baseLanes}function tm(){$(eh,Or),$(vo,vo.current)}function nm(){Or=eh.current,pe(vo),pe(eh)}var ai=0,Be=null,ut=null,kt=null,th=!1,_o=!1,Ta=!1,nh=0,Gl=0,bo=null,Ux=0;function Nt(){throw Error(i(321))}function sm(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!kn(n[a],r[a]))return!1;return!0}function rm(n,r,a,l,d,p){return ai=p,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=n===null||n.memoizedState===null?Wv:Zv,Ta=!1,p=a(l,d),Ta=!1,_o&&(p=gv(r,a,l,d)),pv(n),p}function pv(n){W.H=lh;var r=ut!==null&&ut.next!==null;if(ai=0,kt=ut=Be=null,th=!1,Gl=0,bo=null,r)throw Error(i(300));n===null||Wt||(n=n.dependencies,n!==null&&Ku(n)&&(Wt=!0))}function gv(n,r,a,l){Be=n;var d=0;do{if(_o&&(bo=null),Gl=0,_o=!1,25<=d)throw Error(i(301));if(d+=1,kt=ut=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}W.H=$x,p=r(a,l)}while(_o);return p}function qx(){var n=W.H,r=n.useState()[0];return r=typeof r.then=="function"?$l(r):r,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(Be.flags|=1024),r}function im(){var n=nh!==0;return nh=0,n}function am(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function om(n){if(th){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}th=!1}ai=0,kt=ut=Be=null,_o=!1,Gl=nh=0,bo=null}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Be.memoizedState=kt=n:kt=kt.next=n,kt}function Vt(){if(ut===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var r=kt===null?Be.memoizedState:kt.next;if(r!==null)kt=r,ut=n;else{if(n===null)throw Be.alternate===null?Error(i(467)):Error(i(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},kt===null?Be.memoizedState=kt=n:kt=kt.next=n}return kt}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(n){var r=Gl;return Gl+=1,bo===null&&(bo=[]),n=cv(bo,n,r),r=Be,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Wv:Zv),n}function sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $l(n);if(n.$$typeof===se)return hn(n)}throw Error(i(438,String(n)))}function cm(n){var r=null,a=Be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=lm(),Be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=j;return r.index++,a}function Nr(n,r){return typeof r=="function"?r(n):r}function rh(n){var r=Vt();return um(r,ut,n)}function um(n,r,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=n.baseQueue,p=l.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}r.baseQueue=d=p,l.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{r=d.next;var x=E=null,O=null,Y=r,te=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(We&ie)===ie:(ai&ie)===ie){var K=Y.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===go&&(te=!0);else if((ai&K)===K){Y=Y.next,K===go&&(te=!0);continue}else ie={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(x=O=ie,E=p):O=O.next=ie,Be.lanes|=K,fi|=K;ie=Y.action,Ta&&a(p,ie),p=Y.hasEagerState?Y.eagerState:a(p,ie)}else K={lane:ie,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(x=O=K,E=p):O=O.next=K,Be.lanes|=ie,fi|=ie;Y=Y.next}while(Y!==null&&Y!==r);if(O===null?E=p:O.next=x,!kn(p,n.memoizedState)&&(Wt=!0,te&&(a=yo,a!==null)))throw a;n.memoizedState=p,n.baseState=E,n.baseQueue=O,l.lastRenderedState=p}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function hm(n){var r=Vt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do p=n(p,E.action),E=E.next;while(E!==d);kn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function yv(n,r,a){var l=Be,d=Vt(),p=et;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=r();var E=!kn((ut||d).memoizedState,a);E&&(d.memoizedState=a,Wt=!0),d=d.queue;var x=bv.bind(null,l,d,n);if(Yl(2048,8,x,[n]),d.getSnapshot!==r||E||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Eo(9,ih(),_v.bind(null,l,d,a,r),null),mt===null)throw Error(i(349));p||(ai&124)!==0||vv(l,r,a)}return a}function vv(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Be.updateQueue,r===null?(r=lm(),Be.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function _v(n,r,a,l){r.value=a,r.getSnapshot=l,Ev(r)&&wv(n)}function bv(n,r,a){return a(function(){Ev(r)&&wv(n)})}function Ev(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!kn(n,a)}catch{return!0}}function wv(n){var r=ho(n,2);r!==null&&Bn(r,n,2)}function dm(n){var r=Nn();if(typeof n=="function"){var a=n;if(n=a(),Ta){qe(!0);try{a()}finally{qe(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:n},r}function Tv(n,r,a,l){return n.baseState=a,um(n,ut,typeof l=="function"?l:Nr)}function Bx(n,r,a,l,d){if(oh(n))throw Error(i(485));if(n=r.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};W.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,xv(r,p)):(p.next=a.next,r.pending=a.next=p)}}function xv(n,r){var a=r.action,l=r.payload,d=n.state;if(r.isTransition){var p=W.T,E={};W.T=E;try{var x=a(d,l),O=W.S;O!==null&&O(E,x),Av(n,r,x)}catch(Y){fm(n,r,Y)}finally{W.T=p}}else try{p=a(d,l),Av(n,r,p)}catch(Y){fm(n,r,Y)}}function Av(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Sv(n,r,l)},function(l){return fm(n,r,l)}):Sv(n,r,a)}function Sv(n,r,a){r.status="fulfilled",r.value=a,Nv(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,xv(n,a)))}function fm(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Nv(r),r=r.next;while(r!==l)}n.action=null}function Nv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Rv(n,r){return r}function Cv(n,r){if(et){var a=mt.formState;if(a!==null){e:{var l=Be;if(et){if(Tt){t:{for(var d=Tt,p=Us;d.nodeType!==8;){if(!p){d=null;break t}if(d=ps(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Tt=ps(d.nextSibling),l=d.data==="F!";break e}}_a(l)}l=!1}l&&(r=a[0])}}return a=Nn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rv,lastRenderedState:r},a.queue=l,a=Qv.bind(null,Be,l),l.dispatch=a,l=dm(!1),p=vm.bind(null,Be,!1,l.queue),l=Nn(),d={state:r,dispatch:null,action:n,pending:null},l.queue=d,a=Bx.bind(null,Be,d,p,a),d.dispatch=a,l.memoizedState=n,[r,a,!1]}function Iv(n){var r=Vt();return Dv(r,ut,n)}function Dv(n,r,a){if(r=um(n,r,Rv)[0],n=rh(Nr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=$l(r)}catch(E){throw E===ql?Zu:E}else l=r;r=Vt();var d=r.queue,p=d.dispatch;return a!==r.memoizedState&&(Be.flags|=2048,Eo(9,ih(),zx.bind(null,d,a),null)),[l,p,n]}function zx(n,r){n.action=r}function jv(n){var r=Vt(),a=ut;if(a!==null)return Dv(r,a,n);Vt(),r=r.memoizedState,a=Vt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Eo(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Be.updateQueue,r===null&&(r=lm(),Be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function ih(){return{destroy:void 0,resource:void 0}}function Ov(){return Vt().memoizedState}function ah(n,r,a,l){var d=Nn();l=l===void 0?null:l,Be.flags|=n,d.memoizedState=Eo(1|r,ih(),a,l)}function Yl(n,r,a,l){var d=Vt();l=l===void 0?null:l;var p=d.memoizedState.inst;ut!==null&&l!==null&&sm(l,ut.memoizedState.deps)?d.memoizedState=Eo(r,p,a,l):(Be.flags|=n,d.memoizedState=Eo(1|r,p,a,l))}function Mv(n,r){ah(8390656,8,n,r)}function kv(n,r){Yl(2048,8,n,r)}function Vv(n,r){return Yl(4,2,n,r)}function Pv(n,r){return Yl(4,4,n,r)}function Lv(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Uv(n,r,a){a=a!=null?a.concat([n]):null,Yl(4,4,Lv.bind(null,r,n),a)}function mm(){}function qv(n,r){var a=Vt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&sm(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function Bv(n,r){var a=Vt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&sm(r,l[1]))return l[0];if(l=n(),Ta){qe(!0);try{n()}finally{qe(!1)}}return a.memoizedState=[l,r],l}function pm(n,r,a){return a===void 0||(ai&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=H_(),Be.lanes|=n,fi|=n,a)}function zv(n,r,a,l){return kn(a,r)?a:vo.current!==null?(n=pm(n,a,l),kn(n,r)||(Wt=!0),n):(ai&42)===0?(Wt=!0,n.memoizedState=a):(n=H_(),Be.lanes|=n,fi|=n,r)}function Fv(n,r,a,l,d){var p=ue.p;ue.p=p!==0&&8>p?p:8;var E=W.T,x={};W.T=x,vm(n,!1,r,a);try{var O=d(),Y=W.S;if(Y!==null&&Y(x,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var te=Lx(O,l);Ql(n,r,te,qn(n))}else Ql(n,r,l,qn(n))}catch(ie){Ql(n,r,{then:function(){},status:"rejected",reason:ie},qn())}finally{ue.p=p,W.T=E}}function Fx(){}function gm(n,r,a,l){if(n.tag!==5)throw Error(i(476));var d=Hv(n).queue;Fv(n,d,r,we,a===null?Fx:function(){return Gv(n),a(l)})}function Hv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:we},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Gv(n){var r=Hv(n).next.queue;Ql(n,r,{},qn())}function ym(){return hn(dc)}function $v(){return Vt().memoizedState}function Yv(){return Vt().memoizedState}function Hx(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=qn();n=ri(a);var l=ii(r,n,a);l!==null&&(Bn(l,r,a),zl(l,r,a)),r={cache:Yf()},n.payload=r;return}r=r.return}}function Gx(n,r,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oh(n)?Kv(r,a):(a=Pf(n,r,a,l),a!==null&&(Bn(a,n,l),Xv(a,r,l)))}function Qv(n,r,a){var l=qn();Ql(n,r,a,l)}function Ql(n,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oh(n))Kv(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,x=p(E,a);if(d.hasEagerState=!0,d.eagerState=x,kn(x,E))return Hu(n,r,d,0),mt===null&&Fu(),!1}catch{}finally{}if(a=Pf(n,r,d,l),a!==null)return Bn(a,n,l),Xv(a,r,l),!0}return!1}function vm(n,r,a,l){if(l={lane:2,revertLane:Xm(),action:l,hasEagerState:!1,eagerState:null,next:null},oh(n)){if(r)throw Error(i(479))}else r=Pf(n,a,l,2),r!==null&&Bn(r,n,2)}function oh(n){var r=n.alternate;return n===Be||r!==null&&r===Be}function Kv(n,r){_o=th=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Xv(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,gl(n,a)}}var lh={readContext:hn,use:sh,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},Wv={readContext:hn,use:sh,useCallback:function(n,r){return Nn().memoizedState=[n,r===void 0?null:r],n},useContext:hn,useEffect:Mv,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,ah(4194308,4,Lv.bind(null,r,n),a)},useLayoutEffect:function(n,r){return ah(4194308,4,n,r)},useInsertionEffect:function(n,r){ah(4,2,n,r)},useMemo:function(n,r){var a=Nn();r=r===void 0?null:r;var l=n();if(Ta){qe(!0);try{n()}finally{qe(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=Nn();if(a!==void 0){var d=a(r);if(Ta){qe(!0);try{a(r)}finally{qe(!1)}}}else d=r;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=Gx.bind(null,Be,n),[l.memoizedState,n]},useRef:function(n){var r=Nn();return n={current:n},r.memoizedState=n},useState:function(n){n=dm(n);var r=n.queue,a=Qv.bind(null,Be,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:mm,useDeferredValue:function(n,r){var a=Nn();return pm(a,n,r)},useTransition:function(){var n=dm(!1);return n=Fv.bind(null,Be,n.queue,!0,!1),Nn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Be,d=Nn();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),mt===null)throw Error(i(349));(We&124)!==0||vv(l,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Mv(bv.bind(null,l,p,n),[n]),l.flags|=2048,Eo(9,ih(),_v.bind(null,l,p,a,r),null),a},useId:function(){var n=Nn(),r=mt.identifierPrefix;if(et){var a=xr,l=Tr;a=(l&~(1<<32-rt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=nh++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=Ux++,r="«"+r+"r"+a.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:ym,useFormState:Cv,useActionState:Cv,useOptimistic:function(n){var r=Nn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=vm.bind(null,Be,!0,a),a.dispatch=r,[n,r]},useMemoCache:cm,useCacheRefresh:function(){return Nn().memoizedState=Hx.bind(null,Be)}},Zv={readContext:hn,use:sh,useCallback:qv,useContext:hn,useEffect:kv,useImperativeHandle:Uv,useInsertionEffect:Vv,useLayoutEffect:Pv,useMemo:Bv,useReducer:rh,useRef:Ov,useState:function(){return rh(Nr)},useDebugValue:mm,useDeferredValue:function(n,r){var a=Vt();return zv(a,ut.memoizedState,n,r)},useTransition:function(){var n=rh(Nr)[0],r=Vt().memoizedState;return[typeof n=="boolean"?n:$l(n),r]},useSyncExternalStore:yv,useId:$v,useHostTransitionStatus:ym,useFormState:Iv,useActionState:Iv,useOptimistic:function(n,r){var a=Vt();return Tv(a,ut,n,r)},useMemoCache:cm,useCacheRefresh:Yv},$x={readContext:hn,use:sh,useCallback:qv,useContext:hn,useEffect:kv,useImperativeHandle:Uv,useInsertionEffect:Vv,useLayoutEffect:Pv,useMemo:Bv,useReducer:hm,useRef:Ov,useState:function(){return hm(Nr)},useDebugValue:mm,useDeferredValue:function(n,r){var a=Vt();return ut===null?pm(a,n,r):zv(a,ut.memoizedState,n,r)},useTransition:function(){var n=hm(Nr)[0],r=Vt().memoizedState;return[typeof n=="boolean"?n:$l(n),r]},useSyncExternalStore:yv,useId:$v,useHostTransitionStatus:ym,useFormState:jv,useActionState:jv,useOptimistic:function(n,r){var a=Vt();return ut!==null?Tv(a,ut,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:cm,useCacheRefresh:Yv},wo=null,Kl=0;function ch(n){var r=Kl;return Kl+=1,wo===null&&(wo=[]),cv(wo,n,r)}function Xl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function uh(n,r){throw r.$$typeof===w?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Jv(n){var r=n._init;return r(n._payload)}function e_(n){function r(z,q){if(n){var G=z.deletions;G===null?(z.deletions=[q],z.flags|=16):G.push(q)}}function a(z,q){if(!n)return null;for(;q!==null;)r(z,q),q=q.sibling;return null}function l(z){for(var q=new Map;z!==null;)z.key!==null?q.set(z.key,z):q.set(z.index,z),z=z.sibling;return q}function d(z,q){return z=wr(z,q),z.index=0,z.sibling=null,z}function p(z,q,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<q?(z.flags|=67108866,q):G):(z.flags|=67108866,q)):(z.flags|=1048576,q)}function E(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function x(z,q,G,ne){return q===null||q.tag!==6?(q=Uf(G,z.mode,ne),q.return=z,q):(q=d(q,G),q.return=z,q)}function O(z,q,G,ne){var Ee=G.type;return Ee===M?te(z,q,G.props.children,ne,G.key):q!==null&&(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&Jv(Ee)===q.type)?(q=d(q,G.props),Xl(q,G),q.return=z,q):(q=$u(G.type,G.key,G.props,null,z.mode,ne),Xl(q,G),q.return=z,q)}function Y(z,q,G,ne){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=qf(G,z.mode,ne),q.return=z,q):(q=d(q,G.children||[]),q.return=z,q)}function te(z,q,G,ne,Ee){return q===null||q.tag!==7?(q=pa(G,z.mode,ne,Ee),q.return=z,q):(q=d(q,G),q.return=z,q)}function ie(z,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Uf(""+q,z.mode,G),q.return=z,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case T:return G=$u(q.type,q.key,q.props,null,z.mode,G),Xl(G,q),G.return=z,G;case R:return q=qf(q,z.mode,G),q.return=z,q;case S:var ne=q._init;return q=ne(q._payload),ie(z,q,G)}if(Le(q)||L(q))return q=pa(q,z.mode,G,null),q.return=z,q;if(typeof q.then=="function")return ie(z,ch(q),G);if(q.$$typeof===se)return ie(z,Xu(z,q),G);uh(z,q)}return null}function K(z,q,G,ne){var Ee=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ee!==null?null:x(z,q,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return G.key===Ee?O(z,q,G,ne):null;case R:return G.key===Ee?Y(z,q,G,ne):null;case S:return Ee=G._init,G=Ee(G._payload),K(z,q,G,ne)}if(Le(G)||L(G))return Ee!==null?null:te(z,q,G,ne,null);if(typeof G.then=="function")return K(z,q,ch(G),ne);if(G.$$typeof===se)return K(z,q,Xu(z,G),ne);uh(z,G)}return null}function X(z,q,G,ne,Ee){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(G)||null,x(q,z,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return z=z.get(ne.key===null?G:ne.key)||null,O(q,z,ne,Ee);case R:return z=z.get(ne.key===null?G:ne.key)||null,Y(q,z,ne,Ee);case S:var ze=ne._init;return ne=ze(ne._payload),X(z,q,G,ne,Ee)}if(Le(ne)||L(ne))return z=z.get(G)||null,te(q,z,ne,Ee,null);if(typeof ne.then=="function")return X(z,q,G,ch(ne),Ee);if(ne.$$typeof===se)return X(z,q,G,Xu(q,ne),Ee);uh(q,ne)}return null}function je(z,q,G,ne){for(var Ee=null,ze=null,Ae=q,Ce=q=0,Jt=null;Ae!==null&&Ce<G.length;Ce++){Ae.index>Ce?(Jt=Ae,Ae=null):Jt=Ae.sibling;var Je=K(z,Ae,G[Ce],ne);if(Je===null){Ae===null&&(Ae=Jt);break}n&&Ae&&Je.alternate===null&&r(z,Ae),q=p(Je,q,Ce),ze===null?Ee=Je:ze.sibling=Je,ze=Je,Ae=Jt}if(Ce===G.length)return a(z,Ae),et&&ya(z,Ce),Ee;if(Ae===null){for(;Ce<G.length;Ce++)Ae=ie(z,G[Ce],ne),Ae!==null&&(q=p(Ae,q,Ce),ze===null?Ee=Ae:ze.sibling=Ae,ze=Ae);return et&&ya(z,Ce),Ee}for(Ae=l(Ae);Ce<G.length;Ce++)Jt=X(Ae,z,Ce,G[Ce],ne),Jt!==null&&(n&&Jt.alternate!==null&&Ae.delete(Jt.key===null?Ce:Jt.key),q=p(Jt,q,Ce),ze===null?Ee=Jt:ze.sibling=Jt,ze=Jt);return n&&Ae.forEach(function(wi){return r(z,wi)}),et&&ya(z,Ce),Ee}function Ne(z,q,G,ne){if(G==null)throw Error(i(151));for(var Ee=null,ze=null,Ae=q,Ce=q=0,Jt=null,Je=G.next();Ae!==null&&!Je.done;Ce++,Je=G.next()){Ae.index>Ce?(Jt=Ae,Ae=null):Jt=Ae.sibling;var wi=K(z,Ae,Je.value,ne);if(wi===null){Ae===null&&(Ae=Jt);break}n&&Ae&&wi.alternate===null&&r(z,Ae),q=p(wi,q,Ce),ze===null?Ee=wi:ze.sibling=wi,ze=wi,Ae=Jt}if(Je.done)return a(z,Ae),et&&ya(z,Ce),Ee;if(Ae===null){for(;!Je.done;Ce++,Je=G.next())Je=ie(z,Je.value,ne),Je!==null&&(q=p(Je,q,Ce),ze===null?Ee=Je:ze.sibling=Je,ze=Je);return et&&ya(z,Ce),Ee}for(Ae=l(Ae);!Je.done;Ce++,Je=G.next())Je=X(Ae,z,Ce,Je.value,ne),Je!==null&&(n&&Je.alternate!==null&&Ae.delete(Je.key===null?Ce:Je.key),q=p(Je,q,Ce),ze===null?Ee=Je:ze.sibling=Je,ze=Je);return n&&Ae.forEach(function(YA){return r(z,YA)}),et&&ya(z,Ce),Ee}function dt(z,q,G,ne){if(typeof G=="object"&&G!==null&&G.type===M&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case T:e:{for(var Ee=G.key;q!==null;){if(q.key===Ee){if(Ee=G.type,Ee===M){if(q.tag===7){a(z,q.sibling),ne=d(q,G.props.children),ne.return=z,z=ne;break e}}else if(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&Jv(Ee)===q.type){a(z,q.sibling),ne=d(q,G.props),Xl(ne,G),ne.return=z,z=ne;break e}a(z,q);break}else r(z,q);q=q.sibling}G.type===M?(ne=pa(G.props.children,z.mode,ne,G.key),ne.return=z,z=ne):(ne=$u(G.type,G.key,G.props,null,z.mode,ne),Xl(ne,G),ne.return=z,z=ne)}return E(z);case R:e:{for(Ee=G.key;q!==null;){if(q.key===Ee)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){a(z,q.sibling),ne=d(q,G.children||[]),ne.return=z,z=ne;break e}else{a(z,q);break}else r(z,q);q=q.sibling}ne=qf(G,z.mode,ne),ne.return=z,z=ne}return E(z);case S:return Ee=G._init,G=Ee(G._payload),dt(z,q,G,ne)}if(Le(G))return je(z,q,G,ne);if(L(G)){if(Ee=L(G),typeof Ee!="function")throw Error(i(150));return G=Ee.call(G),Ne(z,q,G,ne)}if(typeof G.then=="function")return dt(z,q,ch(G),ne);if(G.$$typeof===se)return dt(z,q,Xu(z,G),ne);uh(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(a(z,q.sibling),ne=d(q,G),ne.return=z,z=ne):(a(z,q),ne=Uf(G,z.mode,ne),ne.return=z,z=ne),E(z)):a(z,q)}return function(z,q,G,ne){try{Kl=0;var Ee=dt(z,q,G,ne);return wo=null,Ee}catch(Ae){if(Ae===ql||Ae===Zu)throw Ae;var ze=Vn(29,Ae,null,z.mode);return ze.lanes=ne,ze.return=z,ze}finally{}}}var To=e_(!0),t_=e_(!1),ts=oe(null),qs=null;function oi(n){var r=n.alternate;$(Yt,Yt.current&1),$(ts,n),qs===null&&(r===null||vo.current!==null||r.memoizedState!==null)&&(qs=n)}function n_(n){if(n.tag===22){if($(Yt,Yt.current),$(ts,n),qs===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(qs=n)}}else li()}function li(){$(Yt,Yt.current),$(ts,ts.current)}function Rr(n){pe(ts),qs===n&&(qs=null),pe(Yt)}var Yt=oe(0);function hh(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lp(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _m(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var bm={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=qn(),d=ri(l);d.payload=r,a!=null&&(d.callback=a),r=ii(n,d,l),r!==null&&(Bn(r,n,l),zl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=qn(),d=ri(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=ii(n,d,l),r!==null&&(Bn(r,n,l),zl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qn(),l=ri(a);l.tag=2,r!=null&&(l.callback=r),r=ii(n,l,a),r!==null&&(Bn(r,n,a),zl(r,n,a))}};function s_(n,r,a,l,d,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,E):r.prototype&&r.prototype.isPureReactComponent?!jl(a,l)||!jl(d,p):!0}function r_(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&bm.enqueueReplaceState(r,r.state,null)}function xa(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=_({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function i_(n){dh(n)}function a_(n){console.error(n)}function o_(n){dh(n)}function fh(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function l_(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Em(n,r,a){return a=ri(a),a.tag=3,a.payload={element:null},a.callback=function(){fh(n,r)},a}function c_(n){return n=ri(n),n.tag=3,n}function u_(n,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var p=l.value;n.payload=function(){return d(p)},n.callback=function(){l_(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){l_(r,a,l),typeof d!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Yx(n,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Pl(r,a,d,!0),a=ts.current,a!==null){switch(a.tag){case 13:return qs===null?Gm():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Ym(n,l,d)),!1;case 22:return a.flags|=65536,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Ym(n,l,d)),!1}throw Error(i(435,a.tag))}return Ym(n,l,d),Gm(),!1}if(et)return r=ts.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Ff&&(n=Error(i(422),{cause:l}),Vl(Wn(n,a)))):(l!==Ff&&(r=Error(i(423),{cause:l}),Vl(Wn(r,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Wn(l,a),d=Em(n.stateNode,l,d),Jf(n,d),xt!==4&&(xt=2)),!1;var p=Error(i(520),{cause:l});if(p=Wn(p,a),sc===null?sc=[p]:sc.push(p),xt!==4&&(xt=2),r===null)return!0;l=Wn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Em(a.stateNode,l,n),Jf(a,n),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(mi===null||!mi.has(p))))return a.flags|=65536,d&=-d,a.lanes|=d,d=c_(d),u_(d,n,a,l),Jf(a,d),!1}a=a.return}while(a!==null);return!1}var h_=Error(i(461)),Wt=!1;function rn(n,r,a,l){r.child=n===null?t_(r,null,a,l):To(r,n.child,a,l)}function d_(n,r,a,l,d){a=a.render;var p=r.ref;if("ref"in l){var E={};for(var x in l)x!=="ref"&&(E[x]=l[x])}else E=l;return Ea(r),l=rm(n,r,a,E,p,d),x=im(),n!==null&&!Wt?(am(n,r,d),Cr(n,r,d)):(et&&x&&Bf(r),r.flags|=1,rn(n,r,l,d),r.child)}function f_(n,r,a,l,d){if(n===null){var p=a.type;return typeof p=="function"&&!Lf(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,m_(n,r,p,l,d)):(n=$u(a.type,null,l,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,!Cm(n,d)){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:jl,a(E,l)&&n.ref===r.ref)return Cr(n,r,d)}return r.flags|=1,n=wr(p,l),n.ref=r.ref,n.return=r,r.child=n}function m_(n,r,a,l,d){if(n!==null){var p=n.memoizedProps;if(jl(p,l)&&n.ref===r.ref)if(Wt=!1,r.pendingProps=l=p,Cm(n,d))(n.flags&131072)!==0&&(Wt=!0);else return r.lanes=n.lanes,Cr(n,r,d)}return wm(n,r,a,l,d)}function p_(n,r,a){var l=r.pendingProps,d=l.children,p=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,n!==null){for(d=r.child=n.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;r.childLanes=p&~l}else r.childLanes=0,r.child=null;return g_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Wu(r,p!==null?p.cachePool:null),p!==null?mv(r,p):tm(),n_(r);else return r.lanes=r.childLanes=536870912,g_(n,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(Wu(r,p.cachePool),mv(r,p),li(),r.memoizedState=null):(n!==null&&Wu(r,null),tm(),li());return rn(n,r,d,a),r.child}function g_(n,r,a,l){var d=Kf();return d=d===null?null:{parent:$t._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&Wu(r,null),tm(),n_(r),n!==null&&Pl(n,r,l,!0),null}function mh(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function wm(n,r,a,l,d){return Ea(r),a=rm(n,r,a,l,void 0,d),l=im(),n!==null&&!Wt?(am(n,r,d),Cr(n,r,d)):(et&&l&&Bf(r),r.flags|=1,rn(n,r,a,d),r.child)}function y_(n,r,a,l,d,p){return Ea(r),r.updateQueue=null,a=gv(r,l,a,d),pv(n),l=im(),n!==null&&!Wt?(am(n,r,p),Cr(n,r,p)):(et&&l&&Bf(r),r.flags|=1,rn(n,r,a,p),r.child)}function v_(n,r,a,l,d){if(Ea(r),r.stateNode===null){var p=fo,E=a.contextType;typeof E=="object"&&E!==null&&(p=hn(E)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=bm,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},Wf(r),E=a.contextType,p.context=typeof E=="object"&&E!==null?hn(E):fo,p.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(_m(r,a,E,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&bm.enqueueReplaceState(p,p.state,null),Hl(r,l,p,d),Fl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){p=r.stateNode;var x=r.memoizedProps,O=xa(a,x);p.props=O;var Y=p.context,te=a.contextType;E=fo,typeof te=="object"&&te!==null&&(E=hn(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||Y!==E)&&r_(r,p,l,E),si=!1;var K=r.memoizedState;p.state=K,Hl(r,l,p,d),Fl(),Y=r.memoizedState,x||K!==Y||si?(typeof ie=="function"&&(_m(r,a,ie,l),Y=r.memoizedState),(O=si||s_(r,a,O,l,K,Y,E))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Y),p.props=l,p.state=Y,p.context=E,l=O):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,Zf(n,r),E=r.memoizedProps,te=xa(a,E),p.props=te,ie=r.pendingProps,K=p.context,Y=a.contextType,O=fo,typeof Y=="object"&&Y!==null&&(O=hn(Y)),x=a.getDerivedStateFromProps,(Y=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ie||K!==O)&&r_(r,p,l,O),si=!1,K=r.memoizedState,p.state=K,Hl(r,l,p,d),Fl();var X=r.memoizedState;E!==ie||K!==X||si||n!==null&&n.dependencies!==null&&Ku(n.dependencies)?(typeof x=="function"&&(_m(r,a,x,l),X=r.memoizedState),(te=si||s_(r,a,te,l,K,X,O)||n!==null&&n.dependencies!==null&&Ku(n.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,X,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,X,O)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=X),p.props=l,p.state=X,p.context=O,l=te):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),l=!1)}return p=l,mh(n,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,n!==null&&l?(r.child=To(r,n.child,null,d),r.child=To(r,null,a,d)):rn(n,r,a,d),r.memoizedState=p.state,n=r.child):n=Cr(n,r,d),n}function __(n,r,a,l){return kl(),r.flags|=256,rn(n,r,a,l),r.child}var Tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(n){return{baseLanes:n,cachePool:av()}}function Am(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=ns),n}function b_(n,r,a){var l=r.pendingProps,d=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),E&&(d=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(et){if(d?oi(r):li(),et){var x=Tt,O;if(O=x){e:{for(O=x,x=Us;O.nodeType!==8;){if(!x){x=null;break e}if(O=ps(O.nextSibling),O===null){x=null;break e}}x=O}x!==null?(r.memoizedState={dehydrated:x,treeContext:ga!==null?{id:Tr,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},O=Vn(18,null,null,0),O.stateNode=x,O.return=r,r.child=O,En=r,Tt=null,O=!0):O=!1}O||_a(r)}if(x=r.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return lp(x)?r.lanes=32:r.lanes=536870912,null;Rr(r)}return x=l.children,l=l.fallback,d?(li(),d=r.mode,x=ph({mode:"hidden",children:x},d),l=pa(l,d,a,null),x.return=r,l.return=r,x.sibling=l,r.child=x,d=r.child,d.memoizedState=xm(a),d.childLanes=Am(n,E,a),r.memoizedState=Tm,l):(oi(r),Sm(r,x))}if(O=n.memoizedState,O!==null&&(x=O.dehydrated,x!==null)){if(p)r.flags&256?(oi(r),r.flags&=-257,r=Nm(n,r,a)):r.memoizedState!==null?(li(),r.child=n.child,r.flags|=128,r=null):(li(),d=l.fallback,x=r.mode,l=ph({mode:"visible",children:l.children},x),d=pa(d,x,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,To(r,n.child,null,a),l=r.child,l.memoizedState=xm(a),l.childLanes=Am(n,E,a),r.memoizedState=Tm,r=d);else if(oi(r),lp(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var Y=E.dgst;E=Y,l=Error(i(419)),l.stack="",l.digest=E,Vl({value:l,source:null,stack:null}),r=Nm(n,r,a)}else if(Wt||Pl(n,r,a,!1),E=(a&n.childLanes)!==0,Wt||E){if(E=mt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Kr(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,ho(n,l),Bn(E,n,l),h_;x.data==="$?"||Gm(),r=Nm(n,r,a)}else x.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=O.treeContext,Tt=ps(x.nextSibling),En=r,et=!0,va=null,Us=!1,n!==null&&(Jn[es++]=Tr,Jn[es++]=xr,Jn[es++]=ga,Tr=n.id,xr=n.overflow,ga=r),r=Sm(r,l.children),r.flags|=4096);return r}return d?(li(),d=l.fallback,x=r.mode,O=n.child,Y=O.sibling,l=wr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Y!==null?d=wr(Y,d):(d=pa(d,x,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,x=n.child.memoizedState,x===null?x=xm(a):(O=x.cachePool,O!==null?(Y=$t._currentValue,O=O.parent!==Y?{parent:Y,pool:Y}:O):O=av(),x={baseLanes:x.baseLanes|a,cachePool:O}),d.memoizedState=x,d.childLanes=Am(n,E,a),r.memoizedState=Tm,l):(oi(r),a=n.child,n=a.sibling,a=wr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function Sm(n,r){return r=ph({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function ph(n,r){return n=Vn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Nm(n,r,a){return To(r,n.child,null,a),n=Sm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function E_(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),Gf(n.return,r,a)}function Rm(n,r,a,l,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=d)}function w_(n,r,a){var l=r.pendingProps,d=l.revealOrder,p=l.tail;if(rn(n,r,l.children,a),l=Yt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&E_(n,a,r);else if(n.tag===19)E_(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch($(Yt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&hh(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Rm(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&hh(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Rm(r,!0,a,null,p);break;case"together":Rm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Cr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),fi|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(Pl(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=wr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=wr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Cm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Ku(n)))}function Qx(n,r,a){switch(r.tag){case 3:st(r,r.stateNode.containerInfo),ni(r,$t,n.memoizedState.cache),kl();break;case 27:case 5:Hn(r);break;case 4:st(r,r.stateNode.containerInfo);break;case 10:ni(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(oi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?b_(n,r,a):(oi(r),n=Cr(n,r,a),n!==null?n.sibling:null);oi(r);break;case 19:var d=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Pl(n,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return w_(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(Yt,Yt.current),l)break;return null;case 22:case 23:return r.lanes=0,p_(n,r,a);case 24:ni(r,$t,n.memoizedState.cache)}return Cr(n,r,a)}function T_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Wt=!0;else{if(!Cm(n,a)&&(r.flags&128)===0)return Wt=!1,Qx(n,r,a);Wt=(n.flags&131072)!==0}else Wt=!1,et&&(r.flags&1048576)!==0&&Jy(r,Qu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")Lf(l)?(n=xa(l,n),r.tag=1,r=v_(null,r,l,n,a)):(r.tag=0,r=wm(null,r,l,n,a));else{if(l!=null){if(d=l.$$typeof,d===de){r.tag=11,r=d_(null,r,l,n,a);break e}else if(d===D){r.tag=14,r=f_(null,r,l,n,a);break e}}throw r=Ve(l)||l,Error(i(306,r,""))}}return r;case 0:return wm(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=xa(l,r.pendingProps),v_(n,r,l,d,a);case 3:e:{if(st(r,r.stateNode.containerInfo),n===null)throw Error(i(387));l=r.pendingProps;var p=r.memoizedState;d=p.element,Zf(n,r),Hl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,ni(r,$t,l),l!==p.cache&&$f(r,[$t],a,!0),Fl(),l=E.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=__(n,r,l,a);break e}else if(l!==d){d=Wn(Error(i(424)),r),Vl(d),r=__(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=ps(n.firstChild),En=r,et=!0,va=null,Us=!0,a=t_(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kl(),l===d){r=Cr(n,r,a);break e}rn(n,r,l,a)}r=r.child}return r;case 26:return mh(n,r),n===null?(a=Nb(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,n=r.pendingProps,l=Ch(Re.current).createElement(a),l[Ft]=r,l[Ot]=n,on(l,a,n),St(l),r.stateNode=l):r.memoizedState=Nb(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Hn(r),n===null&&et&&(l=r.stateNode=xb(r.type,r.pendingProps,Re.current),En=r,Us=!0,d=Tt,yi(r.type)?(cp=d,Tt=ps(l.firstChild)):Tt=d),rn(n,r,r.pendingProps.children,a),mh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&et&&((d=l=Tt)&&(l=wA(l,r.type,r.pendingProps,Us),l!==null?(r.stateNode=l,En=r,Tt=ps(l.firstChild),Us=!1,d=!0):d=!1),d||_a(r)),Hn(r),d=r.type,p=r.pendingProps,E=n!==null?n.memoizedProps:null,l=p.children,ip(d,p)?l=null:E!==null&&ip(d,E)&&(r.flags|=32),r.memoizedState!==null&&(d=rm(n,r,qx,null,null,a),dc._currentValue=d),mh(n,r),rn(n,r,l,a),r.child;case 6:return n===null&&et&&((n=a=Tt)&&(a=TA(a,r.pendingProps,Us),a!==null?(r.stateNode=a,En=r,Tt=null,n=!0):n=!1),n||_a(r)),null;case 13:return b_(n,r,a);case 4:return st(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=To(r,null,l,a):rn(n,r,l,a),r.child;case 11:return d_(n,r,r.type,r.pendingProps,a);case 7:return rn(n,r,r.pendingProps,a),r.child;case 8:return rn(n,r,r.pendingProps.children,a),r.child;case 12:return rn(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,ni(r,r.type,l.value),rn(n,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Ea(r),d=hn(d),l=l(d),r.flags|=1,rn(n,r,l,a),r.child;case 14:return f_(n,r,r.type,r.pendingProps,a);case 15:return m_(n,r,r.type,r.pendingProps,a);case 19:return w_(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=ph(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=wr(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return p_(n,r,a);case 24:return Ea(r),l=hn($t),n===null?(d=Kf(),d===null&&(d=mt,p=Yf(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=a),d=p),r.memoizedState={parent:l,cache:d},Wf(r),ni(r,$t,d)):((n.lanes&a)!==0&&(Zf(n,r),Hl(r,null,null,a),Fl()),d=n.memoizedState,p=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),ni(r,$t,l)):(l=p.cache,ni(r,$t,l),l!==d.cache&&$f(r,[$t],a,!0))),rn(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ir(n){n.flags|=4}function x_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!jb(r)){if(r=ts.current,r!==null&&((We&4194048)===We?qs!==null:(We&62914560)!==We&&(We&536870912)===0||r!==qs))throw Bl=Xf,ov;n.flags|=8192}}function gh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?ml():536870912,n.lanes|=r,No|=r)}function Wl(n,r){if(!et)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function bt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function Kx(n,r,a){var l=r.pendingProps;switch(zf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(r),null;case 1:return bt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Sr($t),An(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ml(r)?Ir(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nv())),bt(r),null;case 26:return a=r.memoizedState,n===null?(Ir(r),a!==null?(bt(r),x_(r,a)):(bt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(Ir(r),bt(r),x_(r,a)):(bt(r),r.flags&=-16777217):(n.memoizedProps!==l&&Ir(r),bt(r),r.flags&=-16777217),null;case 27:ls(r),a=Re.current;var d=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Ir(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return bt(r),null}n=ve.current,Ml(r)?ev(r):(n=xb(d,l,a),r.stateNode=n,Ir(r))}return bt(r),null;case 5:if(ls(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Ir(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return bt(r),null}if(n=ve.current,Ml(r))ev(r);else{switch(d=Ch(Re.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}n[Ft]=r,n[Ot]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=n;e:switch(on(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ir(r)}}return bt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&Ir(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(n=Re.current,Ml(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,d=En,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[Ft]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||yb(n.nodeValue,a)),n||_a(r)}else n=Ch(n).createTextNode(l),n[Ft]=r,r.stateNode=n}return bt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ml(r),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ft]=r}else kl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),d=!1}else d=nv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Rr(r),r):(Rr(r),null)}if(Rr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),gh(r,r.updateQueue),bt(r),null;case 4:return An(),n===null&&ep(r.stateNode.containerInfo),bt(r),null;case 10:return Sr(r.type),bt(r),null;case 19:if(pe(Yt),d=r.memoizedState,d===null)return bt(r),null;if(l=(r.flags&128)!==0,p=d.rendering,p===null)if(l)Wl(d,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(p=hh(n),p!==null){for(r.flags|=128,Wl(d,!1),n=p.updateQueue,r.updateQueue=n,gh(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Zy(a,n),a=a.sibling;return $(Yt,Yt.current&1|2),r.child}n=n.sibling}d.tail!==null&&Sn()>_h&&(r.flags|=128,l=!0,Wl(d,!1),r.lanes=4194304)}else{if(!l)if(n=hh(p),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,gh(r,n),Wl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!et)return bt(r),null}else 2*Sn()-d.renderingStartTime>_h&&a!==536870912&&(r.flags|=128,l=!0,Wl(d,!1),r.lanes=4194304);d.isBackwards?(p.sibling=r.child,r.child=p):(n=d.last,n!==null?n.sibling=p:r.child=p,d.last=p)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Sn(),r.sibling=null,n=Yt.current,$(Yt,l?n&1|2:n&1),r):(bt(r),null);case 22:case 23:return Rr(r),nm(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(bt(r),r.subtreeFlags&6&&(r.flags|=8192)):bt(r),a=r.updateQueue,a!==null&&gh(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&pe(wa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Sr($t),bt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Xx(n,r){switch(zf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Sr($t),An(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return ls(r),null;case 13:if(Rr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));kl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return pe(Yt),null;case 4:return An(),null;case 10:return Sr(r.type),null;case 22:case 23:return Rr(r),nm(),n!==null&&pe(wa),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Sr($t),null;case 25:return null;default:return null}}function A_(n,r){switch(zf(r),r.tag){case 3:Sr($t),An();break;case 26:case 27:case 5:ls(r);break;case 4:An();break;case 13:Rr(r);break;case 19:pe(Yt);break;case 10:Sr(r.type);break;case 22:case 23:Rr(r),nm(),n!==null&&pe(wa);break;case 24:Sr($t)}}function Zl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var p=a.create,E=a.inst;l=p(),E.destroy=l}a=a.next}while(a!==d)}}catch(x){ft(r,r.return,x)}}function ci(n,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&n)===n){var E=l.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,d=r;var O=a,Y=x;try{Y()}catch(te){ft(d,O,te)}}}l=l.next}while(l!==p)}}catch(te){ft(r,r.return,te)}}function S_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{fv(r,a)}catch(l){ft(n,n.return,l)}}}function N_(n,r,a){a.props=xa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ft(n,r,l)}}function Jl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){ft(n,r,d)}}function Bs(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ft(n,r,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ft(n,r,d)}else a.current=null}function R_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ft(n,n.return,d)}}function Im(n,r,a){try{var l=n.stateNode;yA(l,n.type,a,r),l[Ot]=r}catch(d){ft(n,n.return,d)}}function C_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&yi(n.type)||n.tag===4}function Dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||C_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jm(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Rh));else if(l!==4&&(l===27&&yi(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(jm(n,r,a),n=n.sibling;n!==null;)jm(n,r,a),n=n.sibling}function yh(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&yi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(yh(n,r,a),n=n.sibling;n!==null;)yh(n,r,a),n=n.sibling}function I_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);on(r,l,a),r[Ft]=n,r[Ot]=a}catch(p){ft(n,n.return,p)}}var Dr=!1,Rt=!1,Om=!1,D_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Wx(n,r){if(n=n.containerInfo,sp=kh,n=zy(n),Df(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,x=-1,O=-1,Y=0,te=0,ie=n,K=null;t:for(;;){for(var X;ie!==a||d!==0&&ie.nodeType!==3||(x=E+d),ie!==p||l!==0&&ie.nodeType!==3||(O=E+l),ie.nodeType===3&&(E+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===n)break t;if(K===a&&++Y===d&&(x=E),K===p&&++te===l&&(O=E),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}a=x===-1||O===-1?null:{start:x,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(rp={focusedElem:n,selectionRange:a},kh=!1,Zt=r;Zt!==null;)if(r=Zt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Zt=n;else for(;Zt!==null;){switch(r=Zt,p=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=r,d=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var je=xa(a.type,d,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(je,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ft(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)op(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":op(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Zt=n;break}Zt=r.return}}function j_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ui(n,a),l&4&&Zl(5,a);break;case 1:if(ui(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(E){ft(a,a.return,E)}else{var d=xa(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(d,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ft(a,a.return,E)}}l&64&&S_(a),l&512&&Jl(a,a.return);break;case 3:if(ui(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{fv(n,r)}catch(E){ft(a,a.return,E)}}break;case 27:r===null&&l&4&&I_(a);case 26:case 5:ui(n,a),r===null&&l&4&&R_(a),l&512&&Jl(a,a.return);break;case 12:ui(n,a);break;case 13:ui(n,a),l&4&&k_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=aA.bind(null,a),xA(n,a))));break;case 22:if(l=a.memoizedState!==null||Dr,!l){r=r!==null&&r.memoizedState!==null||Rt,d=Dr;var p=Rt;Dr=l,(Rt=r)&&!p?hi(n,a,(a.subtreeFlags&8772)!==0):ui(n,a),Dr=d,Rt=p}break;case 30:break;default:ui(n,a)}}function O_(n){var r=n.alternate;r!==null&&(n.alternate=null,O_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Zr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var yt=null,Rn=!1;function jr(n,r,a){for(a=a.child;a!==null;)M_(n,r,a),a=a.sibling}function M_(n,r,a){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(ge,a)}catch{}switch(a.tag){case 26:Rt||Bs(a,r),jr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Bs(a,r);var l=yt,d=Rn;yi(a.type)&&(yt=a.stateNode,Rn=!1),jr(n,r,a),lc(a.stateNode),yt=l,Rn=d;break;case 5:Rt||Bs(a,r);case 6:if(l=yt,d=Rn,yt=null,jr(n,r,a),yt=l,Rn=d,yt!==null)if(Rn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(p){ft(a,r,p)}else try{yt.removeChild(a.stateNode)}catch(p){ft(a,r,p)}break;case 18:yt!==null&&(Rn?(n=yt,wb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),gc(n)):wb(yt,a.stateNode));break;case 4:l=yt,d=Rn,yt=a.stateNode.containerInfo,Rn=!0,jr(n,r,a),yt=l,Rn=d;break;case 0:case 11:case 14:case 15:Rt||ci(2,a,r),Rt||ci(4,a,r),jr(n,r,a);break;case 1:Rt||(Bs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&N_(a,r,l)),jr(n,r,a);break;case 21:jr(n,r,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,jr(n,r,a),Rt=l;break;default:jr(n,r,a)}}function k_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{gc(n)}catch(a){ft(r,r.return,a)}}function Zx(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new D_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new D_),r;default:throw Error(i(435,n.tag))}}function Mm(n,r){var a=Zx(n);r.forEach(function(l){var d=oA.bind(null,n,l);a.has(l)||(a.add(l),l.then(d,d))})}function Pn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],p=n,E=r,x=E;e:for(;x!==null;){switch(x.tag){case 27:if(yi(x.type)){yt=x.stateNode,Rn=!1;break e}break;case 5:yt=x.stateNode,Rn=!1;break e;case 3:case 4:yt=x.stateNode.containerInfo,Rn=!0;break e}x=x.return}if(yt===null)throw Error(i(160));M_(p,E,d),yt=null,Rn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)V_(r,n),r=r.sibling}var ms=null;function V_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(r,n),Ln(n),l&4&&(ci(3,n,n.return),Zl(3,n),ci(5,n,n.return));break;case 1:Pn(r,n),Ln(n),l&512&&(Rt||a===null||Bs(a,a.return)),l&64&&Dr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ms;if(Pn(r,n),Ln(n),l&512&&(Rt||a===null||Bs(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ji]||p[Ft]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(l),d.head.insertBefore(p,d.querySelector("head > title"))),on(p,l,a),p[Ft]=n,St(p),l=p;break e;case"link":var E=Ib("link","href",d).get(l+(a.href||""));if(E){for(var x=0;x<E.length;x++)if(p=E[x],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(x,1);break t}}p=d.createElement(l),on(p,l,a),d.head.appendChild(p);break;case"meta":if(E=Ib("meta","content",d).get(l+(a.content||""))){for(x=0;x<E.length;x++)if(p=E[x],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(x,1);break t}}p=d.createElement(l),on(p,l,a),d.head.appendChild(p);break;default:throw Error(i(468,l))}p[Ft]=n,St(p),l=p}n.stateNode=l}else Db(d,n.type,n.stateNode);else n.stateNode=Cb(d,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?Db(d,n.type,n.stateNode):Cb(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Im(n,n.memoizedProps,a.memoizedProps)}break;case 27:Pn(r,n),Ln(n),l&512&&(Rt||a===null||Bs(a,a.return)),a!==null&&l&4&&Im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Pn(r,n),Ln(n),l&512&&(Rt||a===null||Bs(a,a.return)),n.flags&32){d=n.stateNode;try{Yn(d,"")}catch(X){ft(n,n.return,X)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,Im(n,d,a!==null?a.memoizedProps:d)),l&1024&&(Om=!0);break;case 6:if(Pn(r,n),Ln(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(X){ft(n,n.return,X)}}break;case 3:if(jh=null,d=ms,ms=Ih(r.containerInfo),Pn(r,n),ms=d,Ln(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gc(r.containerInfo)}catch(X){ft(n,n.return,X)}Om&&(Om=!1,P_(n));break;case 4:l=ms,ms=Ih(n.stateNode.containerInfo),Pn(r,n),Ln(n),ms=l;break;case 12:Pn(r,n),Ln(n);break;case 13:Pn(r,n),Ln(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qm=Sn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Mm(n,l)));break;case 22:d=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Y=Dr,te=Rt;if(Dr=Y||d,Rt=te||O,Pn(r,n),Rt=te,Dr=Y,Ln(n),l&8192)e:for(r=n.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||O||Dr||Rt||Aa(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(p=O.stateNode,d)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=O.stateNode;var ie=O.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;x.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){ft(O,O.return,X)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(X){ft(O,O.return,X)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mm(n,a))));break;case 19:Pn(r,n),Ln(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Mm(n,l)));break;case 30:break;case 21:break;default:Pn(r,n),Ln(n)}}function Ln(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(C_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,p=Dm(n);yh(n,p,d);break;case 5:var E=a.stateNode;a.flags&32&&(Yn(E,""),a.flags&=-33);var x=Dm(n);yh(n,x,E);break;case 3:case 4:var O=a.stateNode.containerInfo,Y=Dm(n);jm(n,Y,O);break;default:throw Error(i(161))}}catch(te){ft(n,n.return,te)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function P_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;P_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ui(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)j_(n,r.alternate,r),r=r.sibling}function Aa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ci(4,r,r.return),Aa(r);break;case 1:Bs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&N_(r,r.return,a),Aa(r);break;case 27:lc(r.stateNode);case 26:case 5:Bs(r,r.return),Aa(r);break;case 22:r.memoizedState===null&&Aa(r);break;case 30:Aa(r);break;default:Aa(r)}n=n.sibling}}function hi(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=n,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:hi(d,p,a),Zl(4,p);break;case 1:if(hi(d,p,a),l=p,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){ft(l,l.return,Y)}if(l=p,d=l.updateQueue,d!==null){var x=l.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)dv(O[d],x)}catch(Y){ft(l,l.return,Y)}}a&&E&64&&S_(p),Jl(p,p.return);break;case 27:I_(p);case 26:case 5:hi(d,p,a),a&&l===null&&E&4&&R_(p),Jl(p,p.return);break;case 12:hi(d,p,a);break;case 13:hi(d,p,a),a&&E&4&&k_(d,p);break;case 22:p.memoizedState===null&&hi(d,p,a),Jl(p,p.return);break;case 30:break;default:hi(d,p,a)}r=r.sibling}}function km(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ll(a))}function Vm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ll(n))}function zs(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)L_(n,r,a,l),r=r.sibling}function L_(n,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:zs(n,r,a,l),d&2048&&Zl(9,r);break;case 1:zs(n,r,a,l);break;case 3:zs(n,r,a,l),d&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ll(n)));break;case 12:if(d&2048){zs(n,r,a,l),n=r.stateNode;try{var p=r.memoizedProps,E=p.id,x=p.onPostCommit;typeof x=="function"&&x(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ft(r,r.return,O)}}else zs(n,r,a,l);break;case 13:zs(n,r,a,l);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?zs(n,r,a,l):ec(n,r):p._visibility&2?zs(n,r,a,l):(p._visibility|=2,xo(n,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&km(E,r);break;case 24:zs(n,r,a,l),d&2048&&Vm(r.alternate,r);break;default:zs(n,r,a,l)}}function xo(n,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=n,E=r,x=a,O=l,Y=E.flags;switch(E.tag){case 0:case 11:case 15:xo(p,E,x,O,d),Zl(8,E);break;case 23:break;case 22:var te=E.stateNode;E.memoizedState!==null?te._visibility&2?xo(p,E,x,O,d):ec(p,E):(te._visibility|=2,xo(p,E,x,O,d)),d&&Y&2048&&km(E.alternate,E);break;case 24:xo(p,E,x,O,d),d&&Y&2048&&Vm(E.alternate,E);break;default:xo(p,E,x,O,d)}r=r.sibling}}function ec(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,d=l.flags;switch(l.tag){case 22:ec(a,l),d&2048&&km(l.alternate,l);break;case 24:ec(a,l),d&2048&&Vm(l.alternate,l);break;default:ec(a,l)}r=r.sibling}}var tc=8192;function Ao(n){if(n.subtreeFlags&tc)for(n=n.child;n!==null;)U_(n),n=n.sibling}function U_(n){switch(n.tag){case 26:Ao(n),n.flags&tc&&n.memoizedState!==null&&PA(ms,n.memoizedState,n.memoizedProps);break;case 5:Ao(n);break;case 3:case 4:var r=ms;ms=Ih(n.stateNode.containerInfo),Ao(n),ms=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=tc,tc=16777216,Ao(n),tc=r):Ao(n));break;default:Ao(n)}}function q_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function nc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Zt=l,z_(l,n)}q_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)B_(n),n=n.sibling}function B_(n){switch(n.tag){case 0:case 11:case 15:nc(n),n.flags&2048&&ci(9,n,n.return);break;case 3:nc(n);break;case 12:nc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,vh(n)):nc(n);break;default:nc(n)}}function vh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Zt=l,z_(l,n)}q_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ci(8,r,r.return),vh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,vh(r));break;default:vh(r)}n=n.sibling}}function z_(n,r){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:ci(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Zt=l;else e:for(a=n;Zt!==null;){l=Zt;var d=l.sibling,p=l.return;if(O_(l),l===a){Zt=null;break e}if(d!==null){d.return=p,Zt=d;break e}Zt=p}}}var Jx={getCacheForType:function(n){var r=hn($t),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},eA=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,He=null,We=0,at=0,Un=null,di=!1,So=!1,Pm=!1,Or=0,xt=0,fi=0,Sa=0,Lm=0,ns=0,No=0,sc=null,Cn=null,Um=!1,qm=0,_h=1/0,bh=null,mi=null,an=0,pi=null,Ro=null,Co=0,Bm=0,zm=null,F_=null,rc=0,Fm=null;function qn(){if((it&2)!==0&&We!==0)return We&-We;if(W.T!==null){var n=go;return n!==0?n:Xm()}return Xr()}function H_(){ns===0&&(ns=(We&536870912)===0||et?fl():536870912);var n=ts.current;return n!==null&&(n.flags|=32),ns}function Bn(n,r,a){(n===mt&&(at===2||at===9)||n.cancelPendingCommit!==null)&&(Io(n,0),gi(n,We,ns,!1)),hr(n,a),((it&2)===0||n!==mt)&&(n===mt&&((it&2)===0&&(Sa|=a),xt===4&&gi(n,We,ns,!1)),Fs(n))}function G_(n,r,a){if((it&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||cr(n,r),d=l?sA(n,r):$m(n,r,!0),p=l;do{if(d===0){So&&!l&&gi(n,r,0,!1);break}else{if(a=n.current.alternate,p&&!tA(a)){d=$m(n,r,!1),p=!1;continue}if(d===2){if(p=r,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var x=n;d=sc;var O=x.current.memoizedState.isDehydrated;if(O&&(Io(x,E).flags|=256),E=$m(x,E,!1),E!==2){if(Pm&&!O){x.errorRecoveryDisabledLanes|=p,Sa|=p,d=4;break e}p=Cn,Cn=d,p!==null&&(Cn===null?Cn=p:Cn.push.apply(Cn,p))}d=E}if(p=!1,d!==2)continue}}if(d===1){Io(n,0),gi(n,r,0,!0);break}e:{switch(l=n,p=d,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:gi(l,r,ns,!di);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=qm+300-Sn(),10<d)){if(gi(l,r,ns,!di),lr(l,0,!0)!==0)break e;l.timeoutHandle=bb($_.bind(null,l,a,Cn,bh,Um,r,ns,Sa,No,di,p,2,-0,0),d);break e}$_(l,a,Cn,bh,Um,r,ns,Sa,No,di,p,0,-0,0)}}break}while(!0);Fs(n)}function $_(n,r,a,l,d,p,E,x,O,Y,te,ie,K,X){if(n.timeoutHandle=-1,ie=r.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(hc={stylesheets:null,count:0,unsuspend:VA},U_(r),ie=LA(),ie!==null)){n.cancelPendingCommit=ie(J_.bind(null,n,r,p,a,l,d,E,x,O,te,1,K,X)),gi(n,p,E,!Y);return}J_(n,r,p,a,l,d,E,x,O)}function tA(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],p=d.getSnapshot;d=d.value;try{if(!kn(p(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function gi(n,r,a,l){r&=~Lm,r&=~Sa,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var d=r;0<d;){var p=31-rt(d),E=1<<p;l[p]=-1,d&=~E}a!==0&&Rs(n,a,r)}function Eh(){return(it&6)===0?(ic(0),!1):!0}function Hm(){if(He!==null){if(at===0)var n=He.return;else n=He,Ar=ba=null,om(n),wo=null,Kl=0,n=He;for(;n!==null;)A_(n.alternate,n),n=n.return;He=null}}function Io(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,_A(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Hm(),mt=n,He=a=wr(n.current,null),We=r,at=0,Un=null,di=!1,So=cr(n,r),Pm=!1,No=ns=Lm=Sa=fi=xt=0,Cn=sc=null,Um=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var d=31-rt(l),p=1<<d;r|=n[d],l&=~p}return Or=r,Fu(),a}function Y_(n,r){Be=null,W.H=lh,r===ql||r===Zu?(r=uv(),at=3):r===ov?(r=uv(),at=4):at=r===h_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,He===null&&(xt=1,fh(n,Wn(r,n.current)))}function Q_(){var n=W.H;return W.H=lh,n===null?lh:n}function K_(){var n=W.A;return W.A=Jx,n}function Gm(){xt=4,di||(We&4194048)!==We&&ts.current!==null||(So=!0),(fi&134217727)===0&&(Sa&134217727)===0||mt===null||gi(mt,We,ns,!1)}function $m(n,r,a){var l=it;it|=2;var d=Q_(),p=K_();(mt!==n||We!==r)&&(bh=null,Io(n,r)),r=!1;var E=xt;e:do try{if(at!==0&&He!==null){var x=He,O=Un;switch(at){case 8:Hm(),E=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(r=!0);var Y=at;if(at=0,Un=null,Do(n,x,O,Y),a&&So){E=0;break e}break;default:Y=at,at=0,Un=null,Do(n,x,O,Y)}}nA(),E=xt;break}catch(te){Y_(n,te)}while(!0);return r&&n.shellSuspendCounter++,Ar=ba=null,it=l,W.H=d,W.A=p,He===null&&(mt=null,We=0,Fu()),E}function nA(){for(;He!==null;)X_(He)}function sA(n,r){var a=it;it|=2;var l=Q_(),d=K_();mt!==n||We!==r?(bh=null,_h=Sn()+500,Io(n,r)):So=cr(n,r);e:do try{if(at!==0&&He!==null){r=He;var p=Un;t:switch(at){case 1:at=0,Un=null,Do(n,r,p,1);break;case 2:case 9:if(lv(p)){at=0,Un=null,W_(r);break}r=function(){at!==2&&at!==9||mt!==n||(at=7),Fs(n)},p.then(r,r);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:lv(p)?(at=0,Un=null,W_(r)):(at=0,Un=null,Do(n,r,p,7));break;case 5:var E=null;switch(He.tag){case 26:E=He.memoizedState;case 5:case 27:var x=He;if(!E||jb(E)){at=0,Un=null;var O=x.sibling;if(O!==null)He=O;else{var Y=x.return;Y!==null?(He=Y,wh(Y)):He=null}break t}}at=0,Un=null,Do(n,r,p,5);break;case 6:at=0,Un=null,Do(n,r,p,6);break;case 8:Hm(),xt=6;break e;default:throw Error(i(462))}}rA();break}catch(te){Y_(n,te)}while(!0);return Ar=ba=null,W.H=l,W.A=d,it=a,He!==null?0:(mt=null,We=0,Fu(),xt)}function rA(){for(;He!==null&&!$r();)X_(He)}function X_(n){var r=T_(n.alternate,n,Or);n.memoizedProps=n.pendingProps,r===null?wh(n):He=r}function W_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=y_(a,r,r.pendingProps,r.type,void 0,We);break;case 11:r=y_(a,r,r.pendingProps,r.type.render,r.ref,We);break;case 5:om(r);default:A_(a,r),r=He=Zy(r,Or),r=T_(a,r,Or)}n.memoizedProps=n.pendingProps,r===null?wh(n):He=r}function Do(n,r,a,l){Ar=ba=null,om(r),wo=null,Kl=0;var d=r.return;try{if(Yx(n,d,r,a,We)){xt=1,fh(n,Wn(a,n.current)),He=null;return}}catch(p){if(d!==null)throw He=d,p;xt=1,fh(n,Wn(a,n.current)),He=null;return}r.flags&32768?(et||l===1?n=!0:So||(We&536870912)!==0?n=!1:(di=n=!0,(l===2||l===9||l===3||l===6)&&(l=ts.current,l!==null&&l.tag===13&&(l.flags|=16384))),Z_(r,n)):wh(r)}function wh(n){var r=n;do{if((r.flags&32768)!==0){Z_(r,di);return}n=r.return;var a=Kx(r.alternate,r,Or);if(a!==null){He=a;return}if(r=r.sibling,r!==null){He=r;return}He=r=n}while(r!==null);xt===0&&(xt=5)}function Z_(n,r){do{var a=Xx(n.alternate,n);if(a!==null){a.flags&=32767,He=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){He=n;return}He=n=a}while(n!==null);xt=6,He=null}function J_(n,r,a,l,d,p,E,x,O){n.cancelPendingCommit=null;do Th();while(an!==0);if((it&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Vf,pl(n,a,p,E,x,O),n===mt&&(He=mt=null,We=0),Ro=r,pi=n,Co=a,Bm=p,zm=d,F_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,lA(Q,function(){return rb(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,d=ue.p,ue.p=2,E=it,it|=4;try{Wx(n,r,a)}finally{it=E,ue.p=d,W.T=l}}an=1,eb(),tb(),nb()}}function eb(){if(an===1){an=0;var n=pi,r=Ro,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=ue.p;ue.p=2;var d=it;it|=4;try{V_(r,n);var p=rp,E=zy(n.containerInfo),x=p.focusedElem,O=p.selectionRange;if(E!==x&&x&&x.ownerDocument&&By(x.ownerDocument.documentElement,x)){if(O!==null&&Df(x)){var Y=O.start,te=O.end;if(te===void 0&&(te=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(te,x.value.length);else{var ie=x.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var X=K.getSelection(),je=x.textContent.length,Ne=Math.min(O.start,je),dt=O.end===void 0?Ne:Math.min(O.end,je);!X.extend&&Ne>dt&&(E=dt,dt=Ne,Ne=E);var z=qy(x,Ne),q=qy(x,dt);if(z&&q&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var G=ie.createRange();G.setStart(z.node,z.offset),X.removeAllRanges(),Ne>dt?(X.addRange(G),X.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),X.addRange(G))}}}}for(ie=[],X=x;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ie.length;x++){var ne=ie[x];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}kh=!!sp,rp=sp=null}finally{it=d,ue.p=l,W.T=a}}n.current=r,an=2}}function tb(){if(an===2){an=0;var n=pi,r=Ro,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=ue.p;ue.p=2;var d=it;it|=4;try{j_(n,r.alternate,r)}finally{it=d,ue.p=l,W.T=a}}an=3}}function nb(){if(an===4||an===3){an=0,$a();var n=pi,r=Ro,a=Co,l=F_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?an=5:(an=0,Ro=pi=null,sb(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(mi=null),Ya(a),r=r.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(ge,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,d=ue.p,ue.p=2,W.T=null;try{for(var p=n.onRecoverableError,E=0;E<l.length;E++){var x=l[E];p(x.value,{componentStack:x.stack})}}finally{W.T=r,ue.p=d}}(Co&3)!==0&&Th(),Fs(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===Fm?rc++:(rc=0,Fm=n):rc=0,ic(0)}}function sb(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Ll(r)))}function Th(n){return eb(),tb(),nb(),rb()}function rb(){if(an!==5)return!1;var n=pi,r=Bm;Bm=0;var a=Ya(Co),l=W.T,d=ue.p;try{ue.p=32>a?32:a,W.T=null,a=zm,zm=null;var p=pi,E=Co;if(an=0,Ro=pi=null,Co=0,(it&6)!==0)throw Error(i(331));var x=it;if(it|=4,B_(p.current),L_(p,p.current,E,a),it=x,ic(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(ge,p)}catch{}return!0}finally{ue.p=d,W.T=l,sb(n,r)}}function ib(n,r,a){r=Wn(a,r),r=Em(n.stateNode,r,2),n=ii(n,r,2),n!==null&&(hr(n,2),Fs(n))}function ft(n,r,a){if(n.tag===3)ib(n,n,a);else for(;r!==null;){if(r.tag===3){ib(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(mi===null||!mi.has(l))){n=Wn(a,n),a=c_(2),l=ii(r,a,2),l!==null&&(u_(a,l,r,n),hr(l,2),Fs(l));break}}r=r.return}}function Ym(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new eA;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Pm=!0,d.add(a),n=iA.bind(null,n,r,a),r.then(n,n))}function iA(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,mt===n&&(We&a)===a&&(xt===4||xt===3&&(We&62914560)===We&&300>Sn()-qm?(it&2)===0&&Io(n,0):Lm|=a,No===We&&(No=0)),Fs(n)}function ab(n,r){r===0&&(r=ml()),n=ho(n,r),n!==null&&(hr(n,r),Fs(n))}function aA(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),ab(n,a)}function oA(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),ab(n,a)}function lA(n,r){return ir(n,r)}var xh=null,jo=null,Qm=!1,Ah=!1,Km=!1,Na=0;function Fs(n){n!==jo&&n.next===null&&(jo===null?xh=jo=n:jo=jo.next=n),Ah=!0,Qm||(Qm=!0,uA())}function ic(n,r){if(!Km&&Ah){Km=!0;do for(var a=!1,l=xh;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var p=0;else{var E=l.suspendedLanes,x=l.pingedLanes;p=(1<<31-rt(42|n)+1)-1,p&=d&~(E&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,ub(l,p))}else p=We,p=lr(l,l===mt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||cr(l,p)||(a=!0,ub(l,p));l=l.next}while(a);Km=!1}}function cA(){ob()}function ob(){Ah=Qm=!1;var n=0;Na!==0&&(vA()&&(n=Na),Na=0);for(var r=Sn(),a=null,l=xh;l!==null;){var d=l.next,p=lb(l,r);p===0?(l.next=null,a===null?xh=d:a.next=d,d===null&&(jo=a)):(a=l,(n!==0||(p&3)!==0)&&(Ah=!0)),l=d}ic(n)}function lb(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-rt(p),x=1<<E,O=d[E];O===-1?((x&a)===0||(x&l)!==0)&&(d[E]=Qr(x,r)):O<=r&&(n.expiredLanes|=x),p&=~x}if(r=mt,a=We,a=lr(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(at===2||at===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ns(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||cr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Ns(l),Ya(a)){case 2:case 8:a=V;break;case 32:a=Q;break;case 268435456:a=ye;break;default:a=Q}return l=cb.bind(null,n),a=ir(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Ns(l),n.callbackPriority=2,n.callbackNode=null,2}function cb(n,r){if(an!==0&&an!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Th()&&n.callbackNode!==a)return null;var l=We;return l=lr(n,n===mt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(G_(n,l,r),lb(n,Sn()),n.callbackNode!=null&&n.callbackNode===a?cb.bind(null,n):null)}function ub(n,r){if(Th())return null;G_(n,r,!0)}function uA(){bA(function(){(it&6)!==0?ir(Yr,cA):ob()})}function Xm(){return Na===0&&(Na=fl()),Na}function hb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ja(""+n)}function db(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function hA(n,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var p=hb((d[Ot]||null).action),E=l.submitter;E&&(r=(r=E[Ot]||null)?hb(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var x=new eo("action","action",null,l,d);n.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Na!==0){var O=E?db(d,E):new FormData(d);gm(a,{pending:!0,data:O,method:d.method,action:p},null,O)}}else typeof p=="function"&&(x.preventDefault(),O=E?db(d,E):new FormData(d),gm(a,{pending:!0,data:O,method:d.method,action:p},p,O))},currentTarget:d}]})}}for(var Wm=0;Wm<kf.length;Wm++){var Zm=kf[Wm],dA=Zm.toLowerCase(),fA=Zm[0].toUpperCase()+Zm.slice(1);fs(dA,"on"+fA)}fs(Gy,"onAnimationEnd"),fs($y,"onAnimationIteration"),fs(Yy,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(Ix,"onTransitionRun"),fs(Dx,"onTransitionStart"),fs(jx,"onTransitionCancel"),fs(Qy,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function fb(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var E=l.length-1;0<=E;E--){var x=l[E],O=x.instance,Y=x.currentTarget;if(x=x.listener,O!==p&&d.isPropagationStopped())break e;p=x,d.currentTarget=Y;try{p(d)}catch(te){dh(te)}d.currentTarget=null,p=O}else for(E=0;E<l.length;E++){if(x=l[E],O=x.instance,Y=x.currentTarget,x=x.listener,O!==p&&d.isPropagationStopped())break e;p=x,d.currentTarget=Y;try{p(d)}catch(te){dh(te)}d.currentTarget=null,p=O}}}}function Ge(n,r){var a=r[yl];a===void 0&&(a=r[yl]=new Set);var l=n+"__bubble";a.has(l)||(mb(r,n,2,!1),a.add(l))}function Jm(n,r,a){var l=0;r&&(l|=4),mb(a,n,l,r)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function ep(n){if(!n[Sh]){n[Sh]=!0,vl.forEach(function(a){a!=="selectionchange"&&(mA.has(a)||Jm(a,!1,n),Jm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Sh]||(r[Sh]=!0,Jm("selectionchange",!1,r))}}function mb(n,r,a,l){switch(Lb(r)){case 2:var d=BA;break;case 8:d=zA;break;default:d=mp}a=d.bind(null,r,a,n),d=void 0,!Kn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function tp(n,r,a,l,d){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var x=l.stateNode.containerInfo;if(x===d)break;if(E===4)for(E=l.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;x!==null;){if(E=dr(x),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){l=p=E;continue e}x=x.parentNode}}l=l.return}Ru(function(){var Y=p,te=Qn(a),ie=[];e:{var K=Ky.get(n);if(K!==void 0){var X=eo,je=n;switch(n){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":X=ao;break;case"focusin":je="focus",X=so;break;case"focusout":je="blur",X=so;break;case"beforeblur":case"afterblur":X=so;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Vu;break;case Gy:case $y:case Yy:X=ro;break;case Qy:X=Lu;break;case"scroll":case"scrollend":X=Cu;break;case"wheel":X=oo;break;case"copy":case"cut":case"paste":X=io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Il;break;case"toggle":case"beforetoggle":X=qu}var Ne=(r&4)!==0,dt=!Ne&&(n==="scroll"||n==="scrollend"),z=Ne?K!==null?K+"Capture":null:K;Ne=[];for(var q=Y,G;q!==null;){var ne=q;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||z===null||(ne=aa(q,z),ne!=null&&Ne.push(oc(q,ne,G))),dt)break;q=q.return}0<Ne.length&&(K=new X(K,je,null,a,te),ie.push({event:K,listeners:Ne}))}}if((r&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",K&&a!==gr&&(je=a.relatedTarget||a.fromElement)&&(dr(je)||je[$n]))break e;if((X||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,X?(je=a.relatedTarget||a.toElement,X=Y,je=je?dr(je):null,je!==null&&(dt=c(je),Ne=je.tag,je!==dt||Ne!==5&&Ne!==27&&Ne!==6)&&(je=null)):(X=null,je=Y),X!==je)){if(Ne=Xn,ne="onMouseLeave",z="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Il,ne="onPointerLeave",z="onPointerEnter",q="pointer"),dt=X==null?K:Is(X),G=je==null?K:Is(je),K=new Ne(ne,q+"leave",X,a,te),K.target=dt,K.relatedTarget=G,ne=null,dr(te)===Y&&(Ne=new Ne(z,q+"enter",je,a,te),Ne.target=G,Ne.relatedTarget=dt,ne=Ne),dt=ne,X&&je)t:{for(Ne=X,z=je,q=0,G=Ne;G;G=Oo(G))q++;for(G=0,ne=z;ne;ne=Oo(ne))G++;for(;0<q-G;)Ne=Oo(Ne),q--;for(;0<G-q;)z=Oo(z),G--;for(;q--;){if(Ne===z||z!==null&&Ne===z.alternate)break t;Ne=Oo(Ne),z=Oo(z)}Ne=null}else Ne=null;X!==null&&pb(ie,K,X,Ne,!1),je!==null&&dt!==null&&pb(ie,dt,je,Ne,!0)}}e:{if(K=Y?Is(Y):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Ee=My;else if(Gt(K))if(ky)Ee=Nx;else{Ee=Ax;var ze=xx}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Tl(Y.elementType)&&(Ee=My):Ee=Sx;if(Ee&&(Ee=Ee(n,Y))){Er(ie,Ee,a,te);break e}ze&&ze(n,K,Y),n==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&ei(K,"number",K.value)}switch(ze=Y?Is(Y):window,n){case"focusin":(Gt(ze)||ze.contentEditable==="true")&&(lo=ze,jf=Y,Ol=null);break;case"focusout":Ol=jf=lo=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Fy(ie,a,te);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":Fy(ie,a,te)}var Ae;if(Ps)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Ke?Z(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(b&&a.locale!=="ko"&&(Ke||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ke&&(Ae=Al()):(Os=te,ti="value"in Os?Os.value:Os.textContent,Ke=!0)),ze=Nh(Y,Ce),0<ze.length&&(Ce=new Rl(Ce,n,null,a,te),ie.push({event:Ce,listeners:ze}),Ae?Ce.data=Ae:(Ae=fe(a),Ae!==null&&(Ce.data=Ae)))),(Ae=v?Ht(n,a):Xe(n,a))&&(Ce=Nh(Y,"onBeforeInput"),0<Ce.length&&(ze=new Rl("onBeforeInput","beforeinput",null,a,te),ie.push({event:ze,listeners:Ce}),ze.data=Ae)),hA(ie,n,Y,a,te)}fb(ie,r)})}function oc(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Nh(n,r){for(var a=r+"Capture",l=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=aa(n,a),d!=null&&l.unshift(oc(n,d,p)),d=aa(n,r),d!=null&&l.push(oc(n,d,p))),n.tag===3)return l;n=n.return}return[]}function Oo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function pb(n,r,a,l,d){for(var p=r._reactName,E=[];a!==null&&a!==l;){var x=a,O=x.alternate,Y=x.stateNode;if(x=x.tag,O!==null&&O===l)break;x!==5&&x!==26&&x!==27||Y===null||(O=Y,d?(Y=aa(a,p),Y!=null&&E.unshift(oc(a,Y,O))):d||(Y=aa(a,p),Y!=null&&E.push(oc(a,Y,O)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var pA=/\r\n?/g,gA=/\u0000|\uFFFD/g;function gb(n){return(typeof n=="string"?n:""+n).replace(pA,`
`).replace(gA,"")}function yb(n,r){return r=gb(r),gb(n)===r}function Rh(){}function ht(n,r,a,l,d,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Yn(n,""+l);break;case"className":Ds(n,"class",l);break;case"tabIndex":Ds(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ds(n,a,l);break;case"style":wl(n,l,p);break;case"data":if(r!=="object"){Ds(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ja(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&ht(n,r,"name",d.name,d,null),ht(n,r,"formEncType",d.formEncType,d,null),ht(n,r,"formMethod",d.formMethod,d,null),ht(n,r,"formTarget",d.formTarget,d,null)):(ht(n,r,"encType",d.encType,d,null),ht(n,r,"method",d.method,d,null),ht(n,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ja(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Rh);break;case"onScroll":l!=null&&Ge("scroll",n);break;case"onScrollEnd":l!=null&&Ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ja(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ge("beforetoggle",n),Ge("toggle",n),Jr(n,"popover",l);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Jr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Af.get(a)||a,Jr(n,a,l))}}function np(n,r,a,l,d,p){switch(a){case"style":wl(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&Yn(n,""+l);break;case"onScroll":l!=null&&Ge("scroll",n);break;case"onScrollEnd":l!=null&&Ge("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),p=n[Ot]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(r,p,d),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Jr(n,a,l)}}}function on(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",n),Ge("load",n);var l=!1,d=!1,p;for(p in a)if(a.hasOwnProperty(p)){var E=a[p];if(E!=null)switch(p){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ht(n,r,p,E,a,null)}}d&&ht(n,r,"srcSet",a.srcSet,a,null),l&&ht(n,r,"src",a.src,a,null);return;case"input":Ge("invalid",n);var x=p=E=d=null,O=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":d=te;break;case"type":E=te;break;case"checked":O=te;break;case"defaultChecked":Y=te;break;case"value":p=te;break;case"defaultValue":x=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:ht(n,r,l,te,a,null)}}sa(n,p,x,O,Y,E,d,!1),Za(n);return;case"select":Ge("invalid",n),l=E=p=null;for(d in a)if(a.hasOwnProperty(d)&&(x=a[d],x!=null))switch(d){case"value":p=x;break;case"defaultValue":E=x;break;case"multiple":l=x;default:ht(n,r,d,x,a,null)}r=p,a=E,n.multiple=!!l,r!=null?pr(n,!!l,r,!1):a!=null&&pr(n,!!l,a,!0);return;case"textarea":Ge("invalid",n),p=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(x=a[E],x!=null))switch(E){case"value":l=x;break;case"defaultValue":d=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:ht(n,r,E,x,a,null)}ra(n,l,d,p),Za(n);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(n,r,O,l,a,null)}return;case"dialog":Ge("beforetoggle",n),Ge("toggle",n),Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":Ge("load",n);break;case"video":case"audio":for(l=0;l<ac.length;l++)Ge(ac[l],n);break;case"image":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"embed":case"source":case"link":Ge("error",n),Ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ht(n,r,Y,l,a,null)}return;default:if(Tl(r)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&np(n,r,te,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&ht(n,r,x,l,a,null))}function yA(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,E=null,x=null,O=null,Y=null,te=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=ie;default:l.hasOwnProperty(X)||ht(n,r,X,null,l,ie)}}for(var K in l){var X=l[K];if(ie=a[K],l.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":p=X;break;case"name":d=X;break;case"checked":Y=X;break;case"defaultChecked":te=X;break;case"value":E=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==ie&&ht(n,r,K,X,l,ie)}}Mn(n,E,x,O,Y,te,p,d);return;case"select":X=E=x=K=null;for(p in a)if(O=a[p],a.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":X=O;default:l.hasOwnProperty(p)||ht(n,r,p,null,l,O)}for(d in l)if(p=l[d],O=a[d],l.hasOwnProperty(d)&&(p!=null||O!=null))switch(d){case"value":K=p;break;case"defaultValue":x=p;break;case"multiple":E=p;default:p!==O&&ht(n,r,d,p,l,O)}r=x,a=E,l=X,K!=null?pr(n,!!a,K,!1):!!l!=!!a&&(r!=null?pr(n,!!a,r,!0):pr(n,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(x in a)if(d=a[x],a.hasOwnProperty(x)&&d!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ht(n,r,x,null,l,d)}for(E in l)if(d=l[E],p=a[E],l.hasOwnProperty(E)&&(d!=null||p!=null))switch(E){case"value":K=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==p&&ht(n,r,E,d,l,p)}ct(n,K,X);return;case"option":for(var je in a)if(K=a[je],a.hasOwnProperty(je)&&K!=null&&!l.hasOwnProperty(je))switch(je){case"selected":n.selected=!1;break;default:ht(n,r,je,null,l,K)}for(O in l)if(K=l[O],X=a[O],l.hasOwnProperty(O)&&K!==X&&(K!=null||X!=null))switch(O){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ht(n,r,O,K,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)K=a[Ne],a.hasOwnProperty(Ne)&&K!=null&&!l.hasOwnProperty(Ne)&&ht(n,r,Ne,null,l,K);for(Y in l)if(K=l[Y],X=a[Y],l.hasOwnProperty(Y)&&K!==X&&(K!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:ht(n,r,Y,K,l,X)}return;default:if(Tl(r)){for(var dt in a)K=a[dt],a.hasOwnProperty(dt)&&K!==void 0&&!l.hasOwnProperty(dt)&&np(n,r,dt,void 0,l,K);for(te in l)K=l[te],X=a[te],!l.hasOwnProperty(te)||K===X||K===void 0&&X===void 0||np(n,r,te,K,l,X);return}}for(var z in a)K=a[z],a.hasOwnProperty(z)&&K!=null&&!l.hasOwnProperty(z)&&ht(n,r,z,null,l,K);for(ie in l)K=l[ie],X=a[ie],!l.hasOwnProperty(ie)||K===X||K==null&&X==null||ht(n,r,ie,K,l,X)}var sp=null,rp=null;function Ch(n){return n.nodeType===9?n:n.ownerDocument}function vb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _b(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function ip(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ap=null;function vA(){var n=window.event;return n&&n.type==="popstate"?n===ap?!1:(ap=n,!0):(ap=null,!1)}var bb=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(n){return Eb.resolve(null).then(n).catch(EA)}:bb;function EA(n){setTimeout(function(){throw n})}function yi(n){return n==="head"}function wb(n,r){var a=r,l=0,d=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&lc(E.documentElement),a&2&&lc(E.body),a&4)for(a=E.head,lc(a),E=a.firstChild;E;){var x=E.nextSibling,O=E.nodeName;E[Ji]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=x}}if(d===0){n.removeChild(p),gc(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);gc(r)}function op(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":op(a),Zr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function wA(n,r,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ji])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ps(n.nextSibling),n===null)break}return null}function TA(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ps(n.nextSibling),n===null))return null;return n}function lp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function xA(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ps(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var cp=null;function Tb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function xb(n,r,a){switch(r=Ch(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function lc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Zr(n)}var ss=new Map,Ab=new Set;function Ih(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Mr=ue.d;ue.d={f:AA,r:SA,D:NA,C:RA,L:CA,m:IA,X:jA,S:DA,M:OA};function AA(){var n=Mr.f(),r=Eh();return n||r}function SA(n){var r=Cs(n);r!==null&&r.tag===5&&r.type==="form"?Gv(r):Mr.r(n)}var Mo=typeof document>"u"?null:document;function Sb(n,r,a){var l=Mo;if(l&&typeof r=="string"&&r){var d=Mt(r);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Ab.has(d)||(Ab.add(d),n={rel:n,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),on(r,"link",n),St(r),l.head.appendChild(r)))}}function NA(n){Mr.D(n),Sb("dns-prefetch",n,null)}function RA(n,r){Mr.C(n,r),Sb("preconnect",n,r)}function CA(n,r,a){Mr.L(n,r,a);var l=Mo;if(l&&n&&r){var d='link[rel="preload"][as="'+Mt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Mt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Mt(a.imageSizes)+'"]')):d+='[href="'+Mt(n)+'"]';var p=d;switch(r){case"style":p=ko(n);break;case"script":p=Vo(n)}ss.has(p)||(n=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),ss.set(p,n),l.querySelector(d)!==null||r==="style"&&l.querySelector(cc(p))||r==="script"&&l.querySelector(uc(p))||(r=l.createElement("link"),on(r,"link",n),St(r),l.head.appendChild(r)))}}function IA(n,r){Mr.m(n,r);var a=Mo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Mt(l)+'"][href="'+Mt(n)+'"]',p=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Vo(n)}if(!ss.has(p)&&(n=_({rel:"modulepreload",href:n},r),ss.set(p,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(p)))return}l=a.createElement("link"),on(l,"link",n),St(l),a.head.appendChild(l)}}}function DA(n,r,a){Mr.S(n,r,a);var l=Mo;if(l&&n){var d=vn(l).hoistableStyles,p=ko(n);r=r||"default";var E=d.get(p);if(!E){var x={loading:0,preload:null};if(E=l.querySelector(cc(p)))x.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},a),(a=ss.get(p))&&up(n,a);var O=E=l.createElement("link");St(O),on(O,"link",n),O._p=new Promise(function(Y,te){O.onload=Y,O.onerror=te}),O.addEventListener("load",function(){x.loading|=1}),O.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Dh(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:x},d.set(p,E)}}}function jA(n,r){Mr.X(n,r);var a=Mo;if(a&&n){var l=vn(a).hoistableScripts,d=Vo(n),p=l.get(d);p||(p=a.querySelector(uc(d)),p||(n=_({src:n,async:!0},r),(r=ss.get(d))&&hp(n,r),p=a.createElement("script"),St(p),on(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function OA(n,r){Mr.M(n,r);var a=Mo;if(a&&n){var l=vn(a).hoistableScripts,d=Vo(n),p=l.get(d);p||(p=a.querySelector(uc(d)),p||(n=_({src:n,async:!0,type:"module"},r),(r=ss.get(d))&&hp(n,r),p=a.createElement("script"),St(p),on(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function Nb(n,r,a,l){var d=(d=Re.current)?Ih(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ko(a.href),a=vn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ko(a.href);var p=vn(d).hoistableStyles,E=p.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=d.querySelector(cc(n)))&&!p._p&&(E.instance=p,E.state.loading=5),ss.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ss.set(n,a),p||MA(d,n,a,E.state))),r&&l===null)throw Error(i(528,""));return E}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Vo(a),a=vn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ko(n){return'href="'+Mt(n)+'"'}function cc(n){return'link[rel="stylesheet"]['+n+"]"}function Rb(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function MA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),on(r,"link",a),St(r),n.head.appendChild(r))}function Vo(n){return'[src="'+Mt(n)+'"]'}function uc(n){return"script[async]"+n}function Cb(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+Mt(a.href)+'"]');if(l)return r.instance=l,St(l),l;var d=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),St(l),on(l,"style",d),Dh(l,a.precedence,n),r.instance=l;case"stylesheet":d=ko(a.href);var p=n.querySelector(cc(d));if(p)return r.state.loading|=4,r.instance=p,St(p),p;l=Rb(a),(d=ss.get(d))&&up(l,d),p=(n.ownerDocument||n).createElement("link"),St(p);var E=p;return E._p=new Promise(function(x,O){E.onload=x,E.onerror=O}),on(p,"link",l),r.state.loading|=4,Dh(p,a.precedence,n),r.instance=p;case"script":return p=Vo(a.src),(d=n.querySelector(uc(p)))?(r.instance=d,St(d),d):(l=a,(d=ss.get(p))&&(l=_({},a),hp(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),St(d),on(d,"link",l),n.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Dh(l,a.precedence,n));return r.instance}function Dh(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,p=d,E=0;E<l.length;E++){var x=l[E];if(x.dataset.precedence===r)p=x;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function up(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function hp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var jh=null;function Ib(n,r,a){if(jh===null){var l=new Map,d=jh=new Map;d.set(a,l)}else d=jh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var p=a[d];if(!(p[Ji]||p[Ft]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=n+E;var x=l.get(E);x?x.push(p):l.set(E,[p])}}return l}function Db(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function kA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var hc=null;function VA(){}function PA(n,r,a){if(hc===null)throw Error(i(475));var l=hc;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=ko(a.href),p=n.querySelector(cc(d));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Oh.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=p,St(p);return}p=n.ownerDocument||n,a=Rb(a),(d=ss.get(d))&&up(a,d),p=p.createElement("link"),St(p);var E=p;E._p=new Promise(function(x,O){E.onload=x,E.onerror=O}),on(p,"link",a),r.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Oh.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function LA(){if(hc===null)throw Error(i(475));var n=hc;return n.stylesheets&&n.count===0&&dp(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&dp(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Oh(){if(this.count--,this.count===0){if(this.stylesheets)dp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Mh=null;function dp(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Mh=new Map,r.forEach(UA,n),Mh=null,Oh.call(n))}function UA(n,r){if(!(r.state.loading&4)){var a=Mh.get(n);if(a)var l=a.get(null);else{a=new Map,Mh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var E=d[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=r.instance,E=d.getAttribute("data-precedence"),p=a.get(E)||l,p===l&&a.set(null,d),a.set(E,d),this.count++,l=Oh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),r.state.loading|=4}}var dc={$$typeof:se,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function qA(n,r,a,l,d,p,E,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ur(0),this.hiddenUpdates=ur(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Ob(n,r,a,l,d,p,E,x,O,Y,te,ie){return n=new qA(n,r,a,E,x,O,Y,ie),r=1,p===!0&&(r|=24),p=Vn(3,null,null,r),n.current=p,p.stateNode=n,r=Yf(),r.refCount++,n.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},Wf(p),n}function Mb(n){return n?(n=fo,n):fo}function kb(n,r,a,l,d,p){d=Mb(d),l.context===null?l.context=d:l.pendingContext=d,l=ri(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=ii(n,l,r),a!==null&&(Bn(a,n,r),zl(a,n,r))}function Vb(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function fp(n,r){Vb(n,r),(n=n.alternate)&&Vb(n,r)}function Pb(n){if(n.tag===13){var r=ho(n,67108864);r!==null&&Bn(r,n,67108864),fp(n,67108864)}}var kh=!0;function BA(n,r,a,l){var d=W.T;W.T=null;var p=ue.p;try{ue.p=2,mp(n,r,a,l)}finally{ue.p=p,W.T=d}}function zA(n,r,a,l){var d=W.T;W.T=null;var p=ue.p;try{ue.p=8,mp(n,r,a,l)}finally{ue.p=p,W.T=d}}function mp(n,r,a,l){if(kh){var d=pp(l);if(d===null)tp(n,r,l,Vh,a),Ub(n,l);else if(HA(d,n,r,a,l))l.stopPropagation();else if(Ub(n,l),r&4&&-1<FA.indexOf(n)){for(;d!==null;){var p=Cs(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=On(p.pendingLanes);if(E!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var O=1<<31-rt(E);x.entanglements[1]|=O,E&=~O}Fs(p),(it&6)===0&&(_h=Sn()+500,ic(0))}}break;case 13:x=ho(p,2),x!==null&&Bn(x,p,2),Eh(),fp(p,2)}if(p=pp(l),p===null&&tp(n,r,l,Vh,a),p===d)break;d=p}d!==null&&l.stopPropagation()}else tp(n,r,l,null,a)}}function pp(n){return n=Qn(n),gp(n)}var Vh=null;function gp(n){if(Vh=null,n=dr(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Vh=n,null}function Lb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bu()){case Yr:return 2;case V:return 8;case Q:case ee:return 32;case ye:return 268435456;default:return 32}default:return 32}}var yp=!1,vi=null,_i=null,bi=null,fc=new Map,mc=new Map,Ei=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ub(n,r){switch(n){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":fc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(r.pointerId)}}function pc(n,r,a,l,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},r!==null&&(r=Cs(r),r!==null&&Pb(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function HA(n,r,a,l,d){switch(r){case"focusin":return vi=pc(vi,n,r,a,l,d),!0;case"dragenter":return _i=pc(_i,n,r,a,l,d),!0;case"mouseover":return bi=pc(bi,n,r,a,l,d),!0;case"pointerover":var p=d.pointerId;return fc.set(p,pc(fc.get(p)||null,n,r,a,l,d)),!0;case"gotpointercapture":return p=d.pointerId,mc.set(p,pc(mc.get(p)||null,n,r,a,l,d)),!0}return!1}function qb(n){var r=dr(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,Eu(n.priority,function(){if(a.tag===13){var l=qn();l=Kr(l);var d=ho(a,l);d!==null&&Bn(d,a,l),fp(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=pp(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);gr=l,a.target.dispatchEvent(l),gr=null}else return r=Cs(a),r!==null&&Pb(r),n.blockedOn=a,!1;r.shift()}return!0}function Bb(n,r,a){Ph(n)&&a.delete(r)}function GA(){yp=!1,vi!==null&&Ph(vi)&&(vi=null),_i!==null&&Ph(_i)&&(_i=null),bi!==null&&Ph(bi)&&(bi=null),fc.forEach(Bb),mc.forEach(Bb)}function Lh(n,r){n.blockedOn===r&&(n.blockedOn=null,yp||(yp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GA)))}var Uh=null;function zb(n){Uh!==n&&(Uh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uh===n&&(Uh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],d=n[r+2];if(typeof l!="function"){if(gp(l||a)===null)continue;break}var p=Cs(a);p!==null&&(n.splice(r,3),r-=3,gm(p,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function gc(n){function r(O){return Lh(O,n)}vi!==null&&Lh(vi,n),_i!==null&&Lh(_i,n),bi!==null&&Lh(bi,n),fc.forEach(r),mc.forEach(r);for(var a=0;a<Ei.length;a++){var l=Ei[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ei.length&&(a=Ei[0],a.blockedOn===null);)qb(a),a.blockedOn===null&&Ei.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],E=d[Ot]||null;if(typeof p=="function")E||zb(a);else if(E){var x=null;if(p&&p.hasAttribute("formAction")){if(d=p,E=p[Ot]||null)x=E.formAction;else if(gp(d)!==null)continue}else x=E.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),zb(a)}}}function vp(n){this._internalRoot=n}qh.prototype.render=vp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=qn();kb(a,l,n,r,null,null)},qh.prototype.unmount=vp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;kb(n.current,2,null,n,null,null),Eh(),r[$n]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Xr();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Ei.length&&r!==0&&r<Ei[a].priority;a++);Ei.splice(a,0,n),a===0&&qb(n)}};var Fb=e.version;if(Fb!=="19.1.0")throw Error(i(527,Fb,"19.1.0"));ue.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var $A={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{ge=Bh.inject($A),xe=Bh}catch{}}return vc.createRoot=function(n,r){if(!o(n))throw Error(i(299));var a=!1,l="",d=i_,p=a_,E=o_,x=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(x=r.unstable_transitionCallbacks)),r=Ob(n,1,!1,null,null,a,l,d,p,E,x,null),n[$n]=r.current,ep(n),new vp(r)},vc.hydrateRoot=function(n,r,a){if(!o(n))throw Error(i(299));var l=!1,d="",p=i_,E=a_,x=o_,O=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=Ob(n,1,!0,r,a??null,l,d,p,E,x,O,Y),r.context=Mb(null),a=r.current,l=qn(),l=Kr(l),d=ri(l),d.callback=null,ii(a,d,l),a=l,r.current.lanes=a,hr(r,a),Fs(r),n[$n]=r.current,ep(n),new qh(r)},vc.version="19.1.0",vc}var Jb;function nS(){if(Jb)return Ep.exports;Jb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ep.exports=tS(),Ep.exports}var sS=nS();const rS=uw(sS);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e0="popstate";function iS(s={}){function e(i,o){let{pathname:c,search:h,hash:m}=i.location;return Fp("",{pathname:c,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Uc(o)}return oS(e,t,null,s)}function _t(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aS(){return Math.random().toString(36).substring(2,10)}function t0(s,e){return{usr:s.state,key:s.key,idx:e}}function Fp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:t,key:e&&e.key||i||aS()}}function Uc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function rl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function oS(s,e,t,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,h=o.history,m="POP",g=null,y=_();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function _(){return(h.state||{idx:null}).idx}function w(){m="POP";let k=_(),F=k==null?null:k-y;y=k,g&&g({action:m,location:C.location,delta:F})}function T(k,F){m="PUSH";let J=Fp(C.location,k,F);y=_()+1;let se=t0(J,y),de=C.createHref(J);try{h.pushState(se,"",de)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(de)}c&&g&&g({action:m,location:C.location,delta:1})}function R(k,F){m="REPLACE";let J=Fp(C.location,k,F);y=_();let se=t0(J,y),de=C.createHref(J);h.replaceState(se,"",de),c&&g&&g({action:m,location:C.location,delta:0})}function M(k){return lS(k)}let C={get action(){return m},get location(){return s(o,h)},listen(k){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(e0,w),g=k,()=>{o.removeEventListener(e0,w),g=null}},createHref(k){return e(o,k)},createURL:M,encodeLocation(k){let F=M(k);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:R,go(k){return h.go(k)}};return C}function lS(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),_t(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Uc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function hw(s,e,t="/"){return cS(s,e,t,!1)}function cS(s,e,t,i){let o=typeof e=="string"?rl(e):e,c=qr(o.pathname||"/",t);if(c==null)return null;let h=dw(s);uS(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let y=ES(c);m=_S(h[g],y,i)}return m}function dw(s,e=[],t=[],i=""){let o=(c,h,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(_t(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let y=Lr([i,g.relativePath]),_=t.concat(g);c.children&&c.children.length>0&&(_t(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),dw(c.children,e,_,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:yS(y,c.index),routesMeta:_})};return s.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))o(c,h);else for(let m of fw(c.path))o(c,h,m)}),e}function fw(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let h=fw(i.join("/")),m=[];return m.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...h),m.map(g=>s.startsWith("/")&&g===""?"/":g)}function uS(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:vS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var hS=/^:[\w-]+$/,dS=3,fS=2,mS=1,pS=10,gS=-2,n0=s=>s==="*";function yS(s,e){let t=s.split("/"),i=t.length;return t.some(n0)&&(i+=gS),e&&(i+=fS),t.filter(o=>!n0(o)).reduce((o,c)=>o+(hS.test(c)?dS:c===""?mS:pS),i)}function vS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function _S(s,e,t=!1){let{routesMeta:i}=s,o={},c="/",h=[];for(let m=0;m<i.length;++m){let g=i[m],y=m===i.length-1,_=c==="/"?e:e.slice(c.length)||"/",w=ud({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),T=g.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=ud({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Lr([c,w.pathname]),pathnameBase:AS(Lr([c,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(c=Lr([c,w.pathnameBase]))}return h}function ud(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=bS(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:w},T)=>{if(_==="*"){let M=m[T]||"";h=c.slice(0,c.length-M.length).replace(/(.)\/+$/,"$1")}const R=m[T];return w&&!R?y[_]=void 0:y[_]=(R||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:s}}function bS(s,e=!1,t=!0){bs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(i.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ES(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function qr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function wS(s,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof s=="string"?rl(s):s;return{pathname:t?t.startsWith("/")?t:TS(t,e):e,search:SS(i),hash:NS(o)}}function TS(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ap(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xS(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sg(s){let e=xS(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Ng(s,e,t,i=!1){let o;typeof s=="string"?o=rl(s):(o={...s},_t(!o.pathname||!o.pathname.includes("?"),Ap("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),Ap("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),Ap("#","search","hash",o)));let c=s===""||o.pathname==="",h=c?"/":o.pathname,m;if(h==null)m=t;else{let w=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}m=w>=0?e[w]:"/"}let g=wS(o,m),y=h&&h!=="/"&&h.endsWith("/"),_=(c||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var Lr=s=>s.join("/").replace(/\/\/+/g,"/"),AS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),SS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,NS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function RS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var mw=["POST","PUT","PATCH","DELETE"];new Set(mw);var CS=["GET",...mw];new Set(CS);var il=B.createContext(null);il.displayName="DataRouter";var Ld=B.createContext(null);Ld.displayName="DataRouterState";B.createContext(!1);var pw=B.createContext({isTransitioning:!1});pw.displayName="ViewTransition";var IS=B.createContext(new Map);IS.displayName="Fetchers";var DS=B.createContext(null);DS.displayName="Await";var Ts=B.createContext(null);Ts.displayName="Navigation";var su=B.createContext(null);su.displayName="Location";var xs=B.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var Rg=B.createContext(null);Rg.displayName="RouteError";function jS(s,{relative:e}={}){_t(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=B.useContext(Ts),{hash:o,pathname:c,search:h}=iu(s,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:Lr([t,c])),i.createHref({pathname:m,search:h,hash:o})}function al(){return B.useContext(su)!=null}function Gr(){return _t(al(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(su).location}var gw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yw(s){B.useContext(Ts).static||B.useLayoutEffect(s)}function ru(){let{isDataRoute:s}=B.useContext(xs);return s?YS():OS()}function OS(){_t(al(),"useNavigate() may be used only in the context of a <Router> component.");let s=B.useContext(il),{basename:e,navigator:t}=B.useContext(Ts),{matches:i}=B.useContext(xs),{pathname:o}=Gr(),c=JSON.stringify(Sg(i)),h=B.useRef(!1);return yw(()=>{h.current=!0}),B.useCallback((g,y={})=>{if(bs(h.current,gw),!h.current)return;if(typeof g=="number"){t.go(g);return}let _=Ng(g,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Lr([e,_.pathname])),(y.replace?t.replace:t.push)(_,y.state,y)},[e,t,c,o,s])}var MS=B.createContext(null);function kS(s){let e=B.useContext(xs).outlet;return e&&B.createElement(MS.Provider,{value:s},e)}function iu(s,{relative:e}={}){let{matches:t}=B.useContext(xs),{pathname:i}=Gr(),o=JSON.stringify(Sg(t));return B.useMemo(()=>Ng(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function VS(s,e){return vw(s,e)}function vw(s,e,t,i){_t(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=B.useContext(Ts),{matches:c}=B.useContext(xs),h=c[c.length-1],m=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let F=_&&_.path||"";_w(g,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let w=Gr(),T;if(e){let F=typeof e=="string"?rl(e):e;_t(y==="/"||F.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${F.pathname}" was given in the \`location\` prop.`),T=F}else T=w;let R=T.pathname||"/",M=R;if(y!=="/"){let F=y.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(F.length).join("/")}let C=hw(s,{pathname:M});bs(_||C!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),bs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=BS(C&&C.map(F=>Object.assign({},F,{params:Object.assign({},m,F.params),pathname:Lr([y,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?y:Lr([y,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),c,t,i);return e&&k?B.createElement(su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},k):k}function PS(){let s=$S(),e=RS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:c},"ErrorBoundary")," or"," ",B.createElement("code",{style:c},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:o},t):null,h)}var LS=B.createElement(PS,null),US=class extends B.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?B.createElement(xs.Provider,{value:this.props.routeContext},B.createElement(Rg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qS({routeContext:s,match:e,children:t}){let i=B.useContext(il);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(xs.Provider,{value:s},t)}function BS(s,e=[],t=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);_t(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,m=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:_,errors:w}=t,T=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){h=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let w,T=!1,R=null,M=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,R=y.route.errorElement||LS,h&&(m<0&&_===0?(_w("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):m===_&&(T=!0,M=y.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,_+1)),k=()=>{let F;return w?F=R:T?F=M:y.route.Component?F=B.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=g,B.createElement(qS,{match:y,routeContext:{outlet:g,matches:C,isDataRoute:t!=null},children:F})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?B.createElement(US,{location:t.location,revalidation:t.revalidation,component:R,error:w,children:k(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):k()},null)}function Cg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(s){let e=B.useContext(il);return _t(e,Cg(s)),e}function FS(s){let e=B.useContext(Ld);return _t(e,Cg(s)),e}function HS(s){let e=B.useContext(xs);return _t(e,Cg(s)),e}function Ig(s){let e=HS(s),t=e.matches[e.matches.length-1];return _t(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function GS(){return Ig("useRouteId")}function $S(){let s=B.useContext(Rg),e=FS("useRouteError"),t=Ig("useRouteError");return s!==void 0?s:e.errors?.[t]}function YS(){let{router:s}=zS("useNavigate"),e=Ig("useNavigate"),t=B.useRef(!1);return yw(()=>{t.current=!0}),B.useCallback(async(o,c={})=>{bs(t.current,gw),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var s0={};function _w(s,e,t){!e&&!s0[s]&&(s0[s]=!0,bs(!1,t))}B.memo(QS);function QS({routes:s,future:e,state:t}){return vw(s,void 0,t,e)}function hd({to:s,replace:e,state:t,relative:i}){_t(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=B.useContext(Ts);bs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=B.useContext(xs),{pathname:h}=Gr(),m=ru(),g=Ng(s,Sg(c),h,i==="path"),y=JSON.stringify(g);return B.useEffect(()=>{m(JSON.parse(y),{replace:e,state:t,relative:i})},[m,y,i,e,t]),null}function KS(s){return kS(s.context)}function wn(s){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:c=!1}){_t(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),m=B.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof t=="string"&&(t=rl(t));let{pathname:g="/",search:y="",hash:_="",state:w=null,key:T="default"}=t,R=B.useMemo(()=>{let M=qr(g,h);return M==null?null:{location:{pathname:M,search:y,hash:_,state:w,key:T},navigationType:i}},[h,g,y,_,w,T,i]);return bs(R!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:B.createElement(Ts.Provider,{value:m},B.createElement(su.Provider,{children:e,value:R}))}function WS({children:s,location:e}){return VS(Hp(s),e)}function Hp(s,e=[]){let t=[];return B.Children.forEach(s,(i,o)=>{if(!B.isValidElement(i))return;let c=[...e,o];if(i.type===B.Fragment){t.push.apply(t,Hp(i.props.children,c));return}_t(i.type===wn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Hp(i.props.children,c)),t.push(h)}),t}var Wh="get",Zh="application/x-www-form-urlencoded";function Ud(s){return s!=null&&typeof s.tagName=="string"}function ZS(s){return Ud(s)&&s.tagName.toLowerCase()==="button"}function JS(s){return Ud(s)&&s.tagName.toLowerCase()==="form"}function eN(s){return Ud(s)&&s.tagName.toLowerCase()==="input"}function tN(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function nN(s,e){return s.button===0&&(!e||e==="_self")&&!tN(s)}var zh=null;function sN(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var rN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sp(s){return s!=null&&!rN.has(s)?(bs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zh}"`),null):s}function iN(s,e){let t,i,o,c,h;if(JS(s)){let m=s.getAttribute("action");i=m?qr(m,e):null,t=s.getAttribute("method")||Wh,o=Sp(s.getAttribute("enctype"))||Zh,c=new FormData(s)}else if(ZS(s)||eN(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||m.getAttribute("action");if(i=g?qr(g,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||Wh,o=Sp(s.getAttribute("formenctype"))||Sp(m.getAttribute("enctype"))||Zh,c=new FormData(m,s),!sN()){let{name:y,type:_,value:w}=s;if(_==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,w)}}else{if(Ud(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,i=null,o=Zh,h=s}return c&&o==="text/plain"&&(h=c,c=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aN(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&qr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function oN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function cN(s,e,t){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await oN(c,t);return h.links?h.links():[]}return[]}));return fN(i.flat(1).filter(lN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function r0(s,e,t,i,o,c){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>h(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{let _=i.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(h(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function uN(s,e,{includeHydrateFallback:t}={}){return hN(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function hN(s){return[...new Set(s)]}function dN(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function fN(s,e){let t=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(dN(o));return t.has(c)||(t.add(c),i.push({key:c,link:o})),i},[])}function bw(){let s=B.useContext(il);return Dg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function mN(){let s=B.useContext(Ld);return Dg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var jg=B.createContext(void 0);jg.displayName="FrameworkContext";function Ew(){let s=B.useContext(jg);return Dg(s,"You must render this element inside a <HydratedRouter> element"),s}function pN(s,e){let t=B.useContext(jg),[i,o]=B.useState(!1),[c,h]=B.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:w}=e,T=B.useRef(null);B.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let C=F=>{F.forEach(J=>{h(J.isIntersecting)})},k=new IntersectionObserver(C,{threshold:.5});return T.current&&k.observe(T.current),()=>{k.disconnect()}}},[s]),B.useEffect(()=>{if(i){let C=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(C)}}},[i]);let R=()=>{o(!0)},M=()=>{o(!1),h(!1)};return t?s!=="intent"?[c,T,{}]:[c,T,{onFocus:_c(m,R),onBlur:_c(g,M),onMouseEnter:_c(y,R),onMouseLeave:_c(_,M),onTouchStart:_c(w,R)}]:[!1,T,{}]}function _c(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function gN({page:s,...e}){let{router:t}=bw(),i=B.useMemo(()=>hw(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?B.createElement(vN,{page:s,matches:i,...e}):null}function yN(s){let{manifest:e,routeModules:t}=Ew(),[i,o]=B.useState([]);return B.useEffect(()=>{let c=!1;return cN(s,e,t).then(h=>{c||o(h)}),()=>{c=!0}},[s,e,t]),i}function vN({page:s,matches:e,...t}){let i=Gr(),{manifest:o,routeModules:c}=Ew(),{basename:h}=bw(),{loaderData:m,matches:g}=mN(),y=B.useMemo(()=>r0(s,e,g,o,i,"data"),[s,e,g,o,i]),_=B.useMemo(()=>r0(s,e,g,o,i,"assets"),[s,e,g,o,i]),w=B.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let M=new Set,C=!1;if(e.forEach(F=>{let J=o.routes[F.route.id];!J||!J.hasLoader||(!y.some(se=>se.route.id===F.route.id)&&F.route.id in m&&c[F.route.id]?.shouldRevalidate||J.hasClientLoader?C=!0:M.add(F.route.id))}),M.size===0)return[];let k=aN(s,h,"data");return C&&M.size>0&&k.searchParams.set("_routes",e.filter(F=>M.has(F.route.id)).map(F=>F.route.id).join(",")),[k.pathname+k.search]},[h,m,i,o,y,e,s,c]),T=B.useMemo(()=>uN(_,o),[_,o]),R=yN(_);return B.createElement(B.Fragment,null,w.map(M=>B.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>B.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),R.map(({key:M,link:C})=>B.createElement("link",{key:M,...C})))}function _N(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ww&&(window.__reactRouterVersion="7.7.1")}catch{}function bN({basename:s,children:e,window:t}){let i=B.useRef();i.current==null&&(i.current=iS({window:t,v5Compat:!0}));let o=i.current,[c,h]=B.useState({action:o.action,location:o.location}),m=B.useCallback(g=>{B.startTransition(()=>h(g))},[h]);return B.useLayoutEffect(()=>o.listen(m),[o,m]),B.createElement(XS,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var Tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ct=B.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:c,replace:h,state:m,target:g,to:y,preventScrollReset:_,viewTransition:w,...T},R){let{basename:M}=B.useContext(Ts),C=typeof y=="string"&&Tw.test(y),k,F=!1;if(typeof y=="string"&&C&&(k=y,ww))try{let I=new URL(window.location.href),j=y.startsWith("//")?new URL(I.protocol+y):new URL(y),U=qr(j.pathname,M);j.origin===I.origin&&U!=null?y=U+j.search+j.hash:F=!0}catch{bs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=jS(y,{relative:o}),[se,de,le]=pN(i,T),ce=xN(y,{replace:h,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:w});function D(I){e&&e(I),I.defaultPrevented||ce(I)}let S=B.createElement("a",{...T,...le,href:k||J,onClick:F||c?e:D,ref:_N(R,de),target:g,"data-discover":!C&&t==="render"?"true":void 0});return se&&!C?B.createElement(B.Fragment,null,S,B.createElement(gN,{page:J})):S});Ct.displayName="Link";var EN=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:c,to:h,viewTransition:m,children:g,...y},_){let w=iu(h,{relative:y.relative}),T=Gr(),R=B.useContext(Ld),{navigator:M,basename:C}=B.useContext(Ts),k=R!=null&&CN(w)&&m===!0,F=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,J=T.pathname,se=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(J=J.toLowerCase(),se=se?se.toLowerCase():null,F=F.toLowerCase()),se&&C&&(se=qr(se,C)||se);const de=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let le=J===F||!o&&J.startsWith(F)&&J.charAt(de)==="/",ce=se!=null&&(se===F||!o&&se.startsWith(F)&&se.charAt(F.length)==="/"),D={isActive:le,isPending:ce,isTransitioning:k},S=le?e:void 0,I;typeof i=="function"?I=i(D):I=[i,le?"active":null,ce?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(D):c;return B.createElement(Ct,{...y,"aria-current":S,className:I,ref:_,style:j,to:h,viewTransition:m},typeof g=="function"?g(D):g)});EN.displayName="NavLink";var wN=B.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:c,method:h=Wh,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:w,...T},R)=>{let M=NN(),C=RN(m,{relative:y}),k=h.toLowerCase()==="get"?"get":"post",F=typeof m=="string"&&Tw.test(m),J=se=>{if(g&&g(se),se.defaultPrevented)return;se.preventDefault();let de=se.nativeEvent.submitter,le=de?.getAttribute("formmethod")||h;M(de||se.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:w})};return B.createElement("form",{ref:R,method:k,action:C,onSubmit:i?g:J,...T,"data-discover":!F&&s==="render"?"true":void 0})});wN.displayName="Form";function TN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xw(s){let e=B.useContext(il);return _t(e,TN(s)),e}function xN(s,{target:e,replace:t,state:i,preventScrollReset:o,relative:c,viewTransition:h}={}){let m=ru(),g=Gr(),y=iu(s,{relative:c});return B.useCallback(_=>{if(nN(_,e)){_.preventDefault();let w=t!==void 0?t:Uc(g)===Uc(y);m(s,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:h})}},[g,m,y,t,i,e,s,o,c,h])}var AN=0,SN=()=>`__${String(++AN)}__`;function NN(){let{router:s}=xw("useSubmit"),{basename:e}=B.useContext(Ts),t=GS();return B.useCallback(async(i,o={})=>{let{action:c,method:h,encType:m,formData:g,body:y}=iN(i,e);if(o.navigate===!1){let _=o.fetcherKey||SN();await s.fetch(_,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function RN(s,{relative:e}={}){let{basename:t}=B.useContext(Ts),i=B.useContext(xs);_t(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...iu(s||".",{relative:e})},h=Gr();if(s==null){c.search=h.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(w=>w).forEach(w=>m.append("index",w));let _=m.toString();c.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Lr([t,c.pathname])),Uc(c)}function CN(s,{relative:e}={}){let t=B.useContext(pw);_t(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xw("useViewTransitionState"),o=iu(s,{relative:e});if(!t.isTransitioning)return!1;let c=qr(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=qr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ud(o.pathname,h)!=null||ud(o.pathname,c)!=null}const IN=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},DN=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},Sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,_=c>>2,w=(c&3)<<4|m>>4;let T=(m&15)<<2|y>>6,R=y&63;g||(R=64,h||(T=64)),i.push(t[_],t[w],t[T],t[R])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Aw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):DN(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||m==null||y==null||w==null)throw new jN;const T=c<<2|m>>4;if(i.push(T),y!==64){const R=m<<4&240|y>>2;if(i.push(R),w!==64){const M=y<<6&192|w;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ON=function(s){const e=Aw(s);return Sw.encodeByteArray(e,!0)},dd=function(s){return ON(s).replace(/\./g,"")},Nw=function(s){try{return Sw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=()=>MN().__FIREBASE_DEFAULTS__,VN=()=>{if(typeof process>"u"||typeof i0>"u")return;const s=i0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},PN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Nw(s[1]);return e&&JSON.parse(e)},qd=()=>{try{return IN()||kN()||VN()||PN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Rw=s=>qd()?.emulatorHosts?.[s],Cw=s=>{const e=Rw(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Iw=()=>qd()?.config,Dw=s=>qd()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Og(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[dd(JSON.stringify(t)),dd(JSON.stringify(h)),""].join(".")}const Ic={};function UN(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?s.emulator.push(e):s.prod.push(e);return s}function qN(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let a0=!1;function Mg(s,e){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||Ic[s]===e||Ic[s]||a0)return;Ic[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",c=UN().prod.length>0;function h(){const T=document.getElementById(i);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{a0=!0,h()},T}function _(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=qN(i),R=t("text"),M=document.getElementById(R)||document.createElement("span"),C=t("learnmore"),k=document.getElementById(C)||document.createElement("a"),F=t("preprendIcon"),J=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const se=T.element;m(se),_(k,C);const de=y();g(J,F),se.append(J,M,k,de),document.body.appendChild(se)}c?(M.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function zN(){const s=qd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function GN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $N(){const s=gn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function YN(){return!zN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QN(){try{return typeof indexedDB=="object"}catch{return!1}}function KN(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="FirebaseError";class sr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=XN,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?WN(c,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new sr(o,m,i)}}function WN(s,e){return s.replace(ZN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ZN=/\{\$([^}]+)}/g;function JN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Oa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(o0(c)&&o0(h)){if(!Oa(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function o0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Ac(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function eR(s,e){const t=new tR(s,e);return t.subscribe.bind(t)}class tR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");nR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Np),o.error===void 0&&(o.error=Np),o.complete===void 0&&(o.complete=Np);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(s){return s&&s._delegate?s._delegate:s}class Li{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new LN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iR(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rR(s){return s===Ra?void 0:s}function iR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})($e||($e={}));const oR={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},lR=$e.INFO,cR={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},uR=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=cR[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=lR,this._logHandler=uR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const hR=(s,e)=>e.some(t=>s instanceof t);let l0,c0;function dR(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fR(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,Gp=new WeakMap,Mw=new WeakMap,Rp=new WeakMap,Vg=new WeakMap;function mR(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{t(Oi(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Ow.set(t,s)}).catch(()=>{}),Vg.set(e,s),e}function pR(s){if(Gp.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Gp.set(s,e)}let $p={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Gp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Mw.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function gR(s){$p=s($p)}function yR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Cp(this),e,...t);return Mw.set(i,e.sort?e.sort():[e]),Oi(i)}:fR().includes(s)?function(...e){return s.apply(Cp(this),e),Oi(Ow.get(this))}:function(...e){return Oi(s.apply(Cp(this),e))}}function vR(s){return typeof s=="function"?yR(s):(s instanceof IDBTransaction&&pR(s),hR(s,dR())?new Proxy(s,$p):s)}function Oi(s){if(s instanceof IDBRequest)return mR(s);if(Rp.has(s))return Rp.get(s);const e=vR(s);return e!==s&&(Rp.set(s,e),Vg.set(e,s)),e}const Cp=s=>Vg.get(s);function _R(s,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),m=Oi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Oi(h.result),g.oldVersion,g.newVersion,Oi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const bR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],Ip=new Map;function u0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ER.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||bR.includes(t)))return;const c=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return Ip.set(e,c),c}gR(s=>({...s,get:(e,t,i)=>u0(e,t)||s.get(e,t,i),has:(e,t)=>!!u0(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TR(s){return s.getComponent()?.type==="VERSION"}const Yp="@firebase/app",h0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new kg("@firebase/app"),xR="@firebase/app-compat",AR="@firebase/analytics-compat",SR="@firebase/analytics",NR="@firebase/app-check-compat",RR="@firebase/app-check",CR="@firebase/auth",IR="@firebase/auth-compat",DR="@firebase/database",jR="@firebase/data-connect",OR="@firebase/database-compat",MR="@firebase/functions",kR="@firebase/functions-compat",VR="@firebase/installations",PR="@firebase/installations-compat",LR="@firebase/messaging",UR="@firebase/messaging-compat",qR="@firebase/performance",BR="@firebase/performance-compat",zR="@firebase/remote-config",FR="@firebase/remote-config-compat",HR="@firebase/storage",GR="@firebase/storage-compat",$R="@firebase/firestore",YR="@firebase/ai",QR="@firebase/firestore-compat",KR="firebase",XR="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="[DEFAULT]",WR={[Yp]:"fire-core",[xR]:"fire-core-compat",[SR]:"fire-analytics",[AR]:"fire-analytics-compat",[RR]:"fire-app-check",[NR]:"fire-app-check-compat",[CR]:"fire-auth",[IR]:"fire-auth-compat",[DR]:"fire-rtdb",[jR]:"fire-data-connect",[OR]:"fire-rtdb-compat",[MR]:"fire-fn",[kR]:"fire-fn-compat",[VR]:"fire-iid",[PR]:"fire-iid-compat",[LR]:"fire-fcm",[UR]:"fire-fcm-compat",[qR]:"fire-perf",[BR]:"fire-perf-compat",[zR]:"fire-rc",[FR]:"fire-rc-compat",[HR]:"fire-gcs",[GR]:"fire-gcs-compat",[$R]:"fire-fst",[QR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[KR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,ZR=new Map,Kp=new Map;function d0(s,e){try{s.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ma(s){const e=s.name;if(Kp.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Kp.set(e,s);for(const t of fd.values())d0(t,s);for(const t of ZR.values())d0(t,s);return!0}function Bd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function zn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new au("app","Firebase",JR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=XR;function kw(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Qp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Mi.create("bad-app-name",{appName:String(o)});if(t||(t=Iw()),!t)throw Mi.create("no-options");const c=fd.get(o);if(c){if(Oa(t,c.options)&&Oa(i,c.config))return c;throw Mi.create("duplicate-app",{appName:o})}const h=new aR(o);for(const g of Kp.values())h.addComponent(g);const m=new e2(t,i,h);return fd.set(o,m),m}function Pg(s=Qp){const e=fd.get(s);if(!e&&s===Qp&&Iw())return kw();if(!e)throw Mi.create("no-app",{appName:s});return e}function Ys(s,e,t){let i=WR[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(h.join(" "));return}Ma(new Li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="firebase-heartbeat-database",n2=1,qc="firebase-heartbeat-store";let Dp=null;function Vw(){return Dp||(Dp=_R(t2,n2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(s=>{throw Mi.create("idb-open",{originalErrorMessage:s.message})})),Dp}async function s2(s){try{const t=(await Vw()).transaction(qc),i=await t.objectStore(qc).get(Pw(s));return await t.done,i}catch(e){if(e instanceof sr)Br.warn(e.message);else{const t=Mi.create("idb-get",{originalErrorMessage:e?.message});Br.warn(t.message)}}}async function f0(s,e){try{const i=(await Vw()).transaction(qc,"readwrite");await i.objectStore(qc).put(e,Pw(s)),await i.done}catch(t){if(t instanceof sr)Br.warn(t.message);else{const i=Mi.create("idb-set",{originalErrorMessage:t?.message});Br.warn(i.message)}}}function Pw(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1024,i2=30;class a2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=m0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>i2){const o=c2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Br.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=m0(),{heartbeatsToSend:t,unsentEntries:i}=o2(this._heartbeatsCache.heartbeats),o=dd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Br.warn(e),""}}}function m0(){return new Date().toISOString().substring(0,10)}function o2(s,e=r2){const t=[];let i=s.slice();for(const o of s){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),p0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),p0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QN()?KN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await s2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function p0(s){return dd(JSON.stringify({version:2,heartbeats:s})).length}function c2(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(s){Ma(new Li("platform-logger",e=>new wR(e),"PRIVATE")),Ma(new Li("heartbeat",e=>new a2(e),"PRIVATE")),Ys(Yp,h0,s),Ys(Yp,h0,"esm2020"),Ys("fire-js","")}u2("");function Lw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h2=Lw,Uw=new au("auth","Firebase",Lw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new kg("@firebase/auth");function d2(s,...e){md.logLevel<=$e.WARN&&md.warn(`Auth (${Ba}): ${s}`,...e)}function Jh(s,...e){md.logLevel<=$e.ERROR&&md.error(`Auth (${Ba}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(s,...e){throw Lg(s,...e)}function Qs(s,...e){return Lg(s,...e)}function qw(s,e,t){const i={...h2(),[e]:t};return new au("auth","Firebase",i).create(e,{appName:s.name})}function Ur(s){return qw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Uw.create(s,...e)}function Ie(s,e,...t){if(!s)throw Lg(e,...t)}function Vr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Jh(e),new Error(e)}function zr(s,e){s||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){return typeof self<"u"&&self.location?.href||""}function f2(){return g0()==="http:"||g0()==="https:"}function g0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f2()||HN()||"connection"in navigator)?navigator.onLine:!0}function p2(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=BN()||GN()}get(){return m2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(s,e){zr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v2=new lu(3e4,6e4);function Ki(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Xi(s,e,t,i,o={}){return zw(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const m=ou({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...c};return FN()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&qa(s.emulatorConfig.host)&&(y.credentials="include"),Bw.fetch()(await Fw(s,s.config.apiHost,t,m),y)})}async function zw(s,e,t){s._canInitEmulator=!1;const i={...g2,...e};try{const o=new b2(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Fh(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Fh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Fh(s,"user-disabled",h);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw qw(s,_,y);Es(s,_)}}catch(o){if(o instanceof sr)throw o;Es(s,"network-request-failed",{message:String(o)})}}async function cu(s,e,t,i,o={}){const c=await Xi(s,e,t,i,o);return"mfaPendingCredential"in c&&Es(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Fw(s,e,t,i){const o=`${e}${t}?${i}`,c=s,h=c.config.emulator?Ug(s.config,o):`${s.config.apiScheme}://${o}`;return y2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function _2(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class b2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qs(this.auth,"network-request-failed")),v2.get())})}}function Fh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Qs(s,e,i);return o.customData._tokenResponse=t,o}function y0(s){return s!==void 0&&s.enterprise!==void 0}class E2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w2(s,e){return Xi(s,"GET","/v2/recaptchaConfig",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(s,e){return Xi(s,"POST","/v1/accounts:delete",e)}async function pd(s,e){return Xi(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x2(s,e=!1){const t=zt(s),i=await t.getIdToken(e),o=qg(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:i,authTime:Dc(jp(o.auth_time)),issuedAtTime:Dc(jp(o.iat)),expirationTime:Dc(jp(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function jp(s){return Number(s)*1e3}function qg(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Nw(t);return o?JSON.parse(o):(Jh("Failed to decode base64 JWT payload"),null)}catch(o){return Jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function v0(s){const e=qg(s);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof sr&&A2(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function A2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(s){const e=s.auth,t=await s.getIdToken(),i=await Bc(s,pd(e,{idToken:t}));Ie(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?Hw(o.providerUserInfo):[],h=R2(s.providerData,c),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!h?.length,y=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Wp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,_)}async function N2(s){const e=zt(s);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R2(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Hw(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(s,e){const t=await zw(s,{},async()=>{const i=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await Fw(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&qa(s.emulatorConfig.host)&&(g.credentials="include"),Bw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I2(s,e){return Xi(s,"POST","/v2/accounts:revokeToken",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=v0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await C2(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,h=new Ho;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ie(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(s,e){Ie(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new S2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return x2(this,e)}reload(){return N2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await Bc(this,T2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:R,providerData:M,stsTokenManager:C}=t;Ie(w&&C,e,"internal-error");const k=Ho.fromJSON(this.name,C);Ie(typeof w=="string",e,"internal-error"),Ti(i,e.name),Ti(o,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof R=="boolean",e,"internal-error"),Ti(c,e.name),Ti(h,e.name),Ti(m,e.name),Ti(g,e.name),Ti(y,e.name),Ti(_,e.name);const F=new vs({uid:w,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:R,photoURL:h,phoneNumber:c,tenantId:m,stsTokenManager:k,createdAt:y,lastLoginAt:_});return M&&Array.isArray(M)&&(F.providerData=M.map(J=>({...J}))),g&&(F._redirectEventId=g),F}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ho;o.updateFromServerResponse(t);const c=new vs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gd(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Hw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,m=new Ho;m.updateFromIdToken(i);const g=new vs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Wp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;function Pr(s){zr(s instanceof Function,"Expected a class definition");let e=_0.get(s);return e?(zr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,_0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gw.type="NONE";const b0=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(s,e,t){return`firebase:${s}:${e}:${t}`}class Go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=ed(this.userKey,o.apiKey,c),this.fullPersistenceKey=ed("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pd(this.auth,{idToken:e}).catch(()=>{});return t?vs._fromGetAccountInfoResponse(this.auth,t,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Go(Pr(b0),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Pr(b0);const h=ed(i,e.config.apiKey,e.name);let m=null;for(const y of t)try{const _=await y._get(h);if(_){let w;if(typeof _=="string"){const T=await pd(e,{idToken:_}).catch(()=>{});if(!T)break;w=await vs._fromGetAccountInfoResponse(e,T,_)}else w=vs._fromJSON(e,_);y!==c&&(m=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Go(c,e,i):(c=g[0],m&&await c._set(h,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new Go(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ww(e))return"Blackberry";if(Zw(e))return"Webos";if(Yw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Xw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function $w(s=gn()){return/firefox\//i.test(s)}function Yw(s=gn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(s=gn()){return/crios\//i.test(s)}function Kw(s=gn()){return/iemobile/i.test(s)}function Xw(s=gn()){return/android/i.test(s)}function Ww(s=gn()){return/blackberry/i.test(s)}function Zw(s=gn()){return/webos/i.test(s)}function Bg(s=gn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function D2(s=gn()){return Bg(s)&&!!window.navigator?.standalone}function j2(){return $N()&&document.documentMode===10}function Jw(s=gn()){return Bg(s)||Xw(s)||Zw(s)||Ww(s)||/windows phone/i.test(s)||Kw(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(s,e=[]){let t;switch(s){case"Browser":t=E0(gn());break;case"Worker":t=`${E0(gn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((h,m)=>{try{const g=e(c);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(s,e={}){return Xi(s,"GET","/v2/passwordPolicy",Ki(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=6;class V2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??k2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w0(this),this.idTokenSubscription=new w0(this),this.beforeStateQueue=new O2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pd(this,{idToken:e}),i=await vs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&m?.user&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Ur(this));const t=e?zt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M2(this),t=new V2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await I2(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&d2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function za(s){return zt(s)}class w0{constructor(e){this.auth=e,this.observer=null,this.addObserver=eR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L2(s){zd=s}function tT(s){return zd.loadJS(s)}function U2(){return zd.recaptchaEnterpriseScript}function q2(){return zd.gapiScript}function B2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class z2{constructor(){this.enterprise=new F2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class F2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const H2="recaptcha-enterprise",nT="NO_RECAPTCHA";class G2{constructor(e){this.type=H2,this.auth=za(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{w2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new E2(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,h,m){const g=window.grecaptcha;y0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(nT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z2().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(m=>{if(!t&&y0(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=U2();g.length!==0&&(g+=m),tT(g).then(()=>{o(m,c,h)}).catch(y=>{h(y)})}}).catch(m=>{h(m)})})}}async function T0(s,e,t,i=!1,o=!1){const c=new G2(s);let h;if(o)h=nT;else try{h=await c.verify(t)}catch{h=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Zp(s,e,t,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await T0(s,e,t,t==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await T0(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(s,e){const t=Bd(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Oa(c,e??{}))return o;Es(o,"already-initialized")}return t.initialize({options:e})}function Y2(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Pr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function Q2(s,e,t){const i=za(s);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=sT(e),{host:h,port:m}=K2(e),g=m===null?"":`:${m}`,y={url:`${c}//${h}${g}/`},_=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Oa(y,i.config.emulator)&&Oa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,qa(h)?(Og(`${c}//${h}${g}`),Mg("Auth",!0)):X2()}function sT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function K2(s){const e=sT(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:x0(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:x0(h)}}}function x0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function X2(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function W2(s,e){return Xi(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(s,e){return cu(s,"POST","/v1/accounts:signInWithPassword",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(s,e){return cu(s,"POST","/v1/accounts:signInWithEmailLink",Ki(s,e))}async function eC(s,e){return cu(s,"POST","/v1/accounts:signInWithEmailLink",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends zg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new zc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new zc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,t,"signInWithPassword",Z2);case"emailLink":return J2(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,i,"signUpPassword",W2);case"emailLink":return eC(e,{idToken:t,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(s,e){return cu(s,"POST","/v1/accounts:signInWithIdp",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="http://localhost";class ka extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Es("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const h=new ka(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,$o(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:tC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sC(s){const e=xc(Ac(s)).link,t=e?xc(Ac(e)).deep_link_id:null,i=xc(Ac(s)).deep_link_id;return(i?xc(Ac(i)).link:null)||i||t||e||s}class Fg{constructor(e){const t=xc(Ac(e)),i=t.apiKey??null,o=t.oobCode??null,c=nC(t.mode??null);Ie(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=sC(e);try{return new Fg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,t){return zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Fg.parseLink(t);return Ie(i,"argument-error"),zc._fromEmailAndCode(e,i.code,i.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends rT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends uu{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ka._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ri.credential(t,i)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends uu{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends uu{constructor(){super("twitter.com")}static credential(e,t){return ka._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ii.credential(t,i)}catch{return null}}}Ii.TWITTER_SIGN_IN_METHOD="twitter.com";Ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(s,e){return cu(s,"POST","/v1/accounts:signUp",Ki(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await vs._fromIdTokenResponse(e,i,o),h=A0(i);return new Va({user:c,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=A0(i);return new Va({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function A0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends sr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new yd(e,t,i,o)}}function iT(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(s,c,e,i):c})}async function iC(s,e,t=!1){const i=await Bc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Va._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(s,e,t=!1){const{auth:i}=s;if(zn(i.app))return Promise.reject(Ur(i));const o="reauthenticate";try{const c=await Bc(s,iT(i,o,e,s),t);Ie(c.idToken,i,"internal-error");const h=qg(c.idToken);Ie(h,i,"internal-error");const{sub:m}=h;return Ie(s.uid===m,i,"user-mismatch"),Va._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Es(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(s,e,t=!1){if(zn(s.app))return Promise.reject(Ur(s));const i="signIn",o=await iT(s,i,e),c=await Va._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(c.user),c}async function oC(s,e){return aT(za(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(s){const e=za(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lC(s,e,t){if(zn(s.app))return Promise.reject(Ur(s));const i=za(s),h=await Zp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&oT(s),g}),m=await Va._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function cC(s,e,t){return zn(s.app)?Promise.reject(Ur(s)):oC(zt(s),ol.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&oT(s),i})}function uC(s,e,t,i){return zt(s).onIdTokenChanged(e,t,i)}function hC(s,e,t){return zt(s).beforeAuthStateChanged(e,t)}function dC(s,e,t,i){return zt(s).onAuthStateChanged(e,t,i)}function fC(s){return zt(s).signOut()}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=1e3,pC=10;class cT extends lT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);j2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,pC):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cT.type="LOCAL";const gC=cT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT extends lT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uT.type="SESSION";const hT=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async y=>y(t.origin,c)),g=await yC(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,g)=>{const y=Hg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}function _C(s){Ks().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return typeof Ks().WorkerGlobalScope<"u"&&typeof Ks().importScripts=="function"}async function bC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EC(){return navigator?.serviceWorker?.controller||null}function wC(){return dT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebaseLocalStorageDb",TC=1,_d="firebaseLocalStorage",mT="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hd(s,e){return s.transaction([_d],e?"readwrite":"readonly").objectStore(_d)}function xC(){const s=indexedDB.deleteDatabase(fT);return new hu(s).toPromise()}function Jp(){const s=indexedDB.open(fT,TC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(_d,{keyPath:mT})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(_d)?e(i):(i.close(),await xC(),e(await Jp()))})})}async function S0(s,e,t){const i=Hd(s,!0).put({[mT]:e,value:t});return new hu(i).toPromise()}async function AC(s,e){const t=Hd(s,!1).get(e),i=await new hu(t).toPromise();return i===void 0?null:i.value}function N0(s,e){const t=Hd(s,!0).delete(e);return new hu(t).toPromise()}const SC=800,NC=3;class pT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>NC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(wC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await bC(),!this.activeServiceWorker)return;this.sender=new vC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await S0(e,vd,"1"),await N0(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>S0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>AC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Hd(o,!1).getAll();return new hu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pT.type="LOCAL";const RC=pT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(s,e){return e?Pr(e):(Ie(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IC(s){return aT(s.auth,new Gg(s),s.bypassAuthState)}function DC(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),aC(t,new Gg(s),s.bypassAuthState)}async function jC(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),iC(t,new Gg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:Es(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new lu(2e3,1e4);class Fo extends gT{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OC.get())};e()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="pendingRedirect",td=new Map;class kC extends gT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const i=await VC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VC(s,e){const t=UC(e),i=LC(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function PC(s,e){td.set(s._key(),e)}function LC(s){return Pr(s._redirectPersistence)}function UC(s){return ed(MC,s.config.apiKey,s.name)}async function qC(s,e,t=!1){if(zn(s.app))return Promise.reject(Ur(s));const i=za(s),o=CC(i,e),h=await new kC(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=600*1e3;class zC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yT(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Qs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BC&&this.cachedEventUids.clear(),this.cachedEventUids.has(R0(e))}saveEventToCache(e){this.cachedEventUids.add(R0(e)),this.lastProcessedEventTime=Date.now()}}function R0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function yT({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function FC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(s,e={}){return Xi(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$C=/^https?/;async function YC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await HC(s);for(const t of e)try{if(QC(t))return}catch{}Es(s,"unauthorized-domain")}function QC(s){const e=Xp(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!$C.test(t))return!1;if(GC.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new lu(3e4,6e4);function C0(){const s=Ks().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function XC(s){return new Promise((e,t)=>{function i(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),t(Qs(s,"network-request-failed"))},timeout:KC.get()})}if(Ks().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ks().gapi?.load)i();else{const o=B2("iframefcb");return Ks()[o]=()=>{gapi.load?i():t(Qs(s,"network-request-failed"))},tT(`${q2()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw nd=null,e})}let nd=null;function WC(s){return nd=nd||XC(s),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new lu(5e3,15e3),JC="__/auth/iframe",eI="emulator/auth/iframe",tI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sI(s){const e=s.config;Ie(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Ug(e,eI):`https://${s.config.authDomain}/${JC}`,i={apiKey:e.apiKey,appName:s.name,v:Ba},o=nI.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${ou(i).slice(1)}`}async function rI(s){const e=await WC(s),t=Ks().gapi;return Ie(t,s,"internal-error"),e.open({where:document.body,url:sI(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tI,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=Qs(s,"network-request-failed"),m=Ks().setTimeout(()=>{c(h)},ZC.get());function g(){Ks().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aI=500,oI=600,lI="_blank",cI="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uI(s,e,t,i=aI,o=oI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...iI,width:i.toString(),height:o.toString(),top:c,left:h},y=gn().toLowerCase();t&&(m=Qw(y)?lI:t),$w(y)&&(e=e||cI,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[R,M])=>`${T}${R}=${M},`,"");if(D2(y)&&m!=="_self")return hI(e||"",m),new I0(null);const w=window.open(e||"",m,_);Ie(w,s,"popup-blocked");try{w.focus()}catch{}return new I0(w)}function hI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="__/auth/handler",fI="emulator/auth/handler",mI=encodeURIComponent("fac");async function D0(s,e,t,i,o,c){Ie(s.config.authDomain,s,"auth-domain-config-required"),Ie(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Ba,eventId:o};if(e instanceof rT){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",JN(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof uu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await s._getAppCheckToken(),y=g?`#${mI}=${encodeURIComponent(g)}`:"";return`${pI(s)}?${ou(m).slice(1)}${y}`}function pI({config:s}){return s.emulator?Ug(s,fI):`https://${s.authDomain}/${dI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="webStorageSupport";class gI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hT,this._completeRedirectFn=qC,this._overrideRedirectResult=PC}async _openPopup(e,t,i,o){zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await D0(e,t,i,Xp(),o);return uI(e,c,Hg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await D0(e,t,i,Xp(),o);return _C(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(zr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await rI(e),i=new zC(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Op,{type:Op},o=>{const c=o?.[0]?.[Op];c!==void 0&&t(!!c),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jw()||Yw()||Bg()}}const yI=gI;var j0="@firebase/auth",O0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bI(s){Ma(new Li("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eT(s)},y=new P2(i,o,c,g);return Y2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ma(new Li("auth-internal",e=>{const t=za(e.getProvider("auth").getImmediate());return(i=>new vI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(j0,O0,_I(s)),Ys(j0,O0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=300,wI=Dw("authIdTokenMaxAge")||EI;let M0=null;const TI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>wI)return;const o=t?.token;M0!==o&&(M0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xI(s=Pg()){const e=Bd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=$2(s,{popupRedirectResolver:yI,persistence:[RC,gC,hT]}),i=Dw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=TI(c.toString());hC(t,h,()=>h(t.currentUser)),uC(t,m=>h(m))}}const o=Rw("auth");return o&&Q2(t,`http://${o}`),t}function AI(){return document.getElementsByTagName("head")?.[0]??document}L2({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Qs("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",AI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bI("Browser");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,vT;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function I(){}I.prototype=S.prototype,D.D=S.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(j,U,L){for(var N=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)N[Ve-2]=arguments[Ve];return S.prototype[U].apply(j,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,I){I||(I=0);var j=Array(16);if(typeof S=="string")for(var U=0;16>U;++U)j[U]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(U=0;16>U;++U)j[U]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=D.g[0],I=D.g[1],U=D.g[2];var L=D.g[3],N=S+(L^I&(U^L))+j[0]+3614090360&4294967295;S=I+(N<<7&4294967295|N>>>25),N=L+(U^S&(I^U))+j[1]+3905402710&4294967295,L=S+(N<<12&4294967295|N>>>20),N=U+(I^L&(S^I))+j[2]+606105819&4294967295,U=L+(N<<17&4294967295|N>>>15),N=I+(S^U&(L^S))+j[3]+3250441966&4294967295,I=U+(N<<22&4294967295|N>>>10),N=S+(L^I&(U^L))+j[4]+4118548399&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(U^S&(I^U))+j[5]+1200080426&4294967295,L=S+(N<<12&4294967295|N>>>20),N=U+(I^L&(S^I))+j[6]+2821735955&4294967295,U=L+(N<<17&4294967295|N>>>15),N=I+(S^U&(L^S))+j[7]+4249261313&4294967295,I=U+(N<<22&4294967295|N>>>10),N=S+(L^I&(U^L))+j[8]+1770035416&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(U^S&(I^U))+j[9]+2336552879&4294967295,L=S+(N<<12&4294967295|N>>>20),N=U+(I^L&(S^I))+j[10]+4294925233&4294967295,U=L+(N<<17&4294967295|N>>>15),N=I+(S^U&(L^S))+j[11]+2304563134&4294967295,I=U+(N<<22&4294967295|N>>>10),N=S+(L^I&(U^L))+j[12]+1804603682&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(U^S&(I^U))+j[13]+4254626195&4294967295,L=S+(N<<12&4294967295|N>>>20),N=U+(I^L&(S^I))+j[14]+2792965006&4294967295,U=L+(N<<17&4294967295|N>>>15),N=I+(S^U&(L^S))+j[15]+1236535329&4294967295,I=U+(N<<22&4294967295|N>>>10),N=S+(U^L&(I^U))+j[1]+4129170786&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^U&(S^I))+j[6]+3225465664&4294967295,L=S+(N<<9&4294967295|N>>>23),N=U+(S^I&(L^S))+j[11]+643717713&4294967295,U=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(U^L))+j[0]+3921069994&4294967295,I=U+(N<<20&4294967295|N>>>12),N=S+(U^L&(I^U))+j[5]+3593408605&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^U&(S^I))+j[10]+38016083&4294967295,L=S+(N<<9&4294967295|N>>>23),N=U+(S^I&(L^S))+j[15]+3634488961&4294967295,U=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(U^L))+j[4]+3889429448&4294967295,I=U+(N<<20&4294967295|N>>>12),N=S+(U^L&(I^U))+j[9]+568446438&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^U&(S^I))+j[14]+3275163606&4294967295,L=S+(N<<9&4294967295|N>>>23),N=U+(S^I&(L^S))+j[3]+4107603335&4294967295,U=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(U^L))+j[8]+1163531501&4294967295,I=U+(N<<20&4294967295|N>>>12),N=S+(U^L&(I^U))+j[13]+2850285829&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^U&(S^I))+j[2]+4243563512&4294967295,L=S+(N<<9&4294967295|N>>>23),N=U+(S^I&(L^S))+j[7]+1735328473&4294967295,U=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(U^L))+j[12]+2368359562&4294967295,I=U+(N<<20&4294967295|N>>>12),N=S+(I^U^L)+j[5]+4294588738&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^U)+j[8]+2272392833&4294967295,L=S+(N<<11&4294967295|N>>>21),N=U+(L^S^I)+j[11]+1839030562&4294967295,U=L+(N<<16&4294967295|N>>>16),N=I+(U^L^S)+j[14]+4259657740&4294967295,I=U+(N<<23&4294967295|N>>>9),N=S+(I^U^L)+j[1]+2763975236&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^U)+j[4]+1272893353&4294967295,L=S+(N<<11&4294967295|N>>>21),N=U+(L^S^I)+j[7]+4139469664&4294967295,U=L+(N<<16&4294967295|N>>>16),N=I+(U^L^S)+j[10]+3200236656&4294967295,I=U+(N<<23&4294967295|N>>>9),N=S+(I^U^L)+j[13]+681279174&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^U)+j[0]+3936430074&4294967295,L=S+(N<<11&4294967295|N>>>21),N=U+(L^S^I)+j[3]+3572445317&4294967295,U=L+(N<<16&4294967295|N>>>16),N=I+(U^L^S)+j[6]+76029189&4294967295,I=U+(N<<23&4294967295|N>>>9),N=S+(I^U^L)+j[9]+3654602809&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^U)+j[12]+3873151461&4294967295,L=S+(N<<11&4294967295|N>>>21),N=U+(L^S^I)+j[15]+530742520&4294967295,U=L+(N<<16&4294967295|N>>>16),N=I+(U^L^S)+j[2]+3299628645&4294967295,I=U+(N<<23&4294967295|N>>>9),N=S+(U^(I|~L))+j[0]+4096336452&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~U))+j[7]+1126891415&4294967295,L=S+(N<<10&4294967295|N>>>22),N=U+(S^(L|~I))+j[14]+2878612391&4294967295,U=L+(N<<15&4294967295|N>>>17),N=I+(L^(U|~S))+j[5]+4237533241&4294967295,I=U+(N<<21&4294967295|N>>>11),N=S+(U^(I|~L))+j[12]+1700485571&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~U))+j[3]+2399980690&4294967295,L=S+(N<<10&4294967295|N>>>22),N=U+(S^(L|~I))+j[10]+4293915773&4294967295,U=L+(N<<15&4294967295|N>>>17),N=I+(L^(U|~S))+j[1]+2240044497&4294967295,I=U+(N<<21&4294967295|N>>>11),N=S+(U^(I|~L))+j[8]+1873313359&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~U))+j[15]+4264355552&4294967295,L=S+(N<<10&4294967295|N>>>22),N=U+(S^(L|~I))+j[6]+2734768916&4294967295,U=L+(N<<15&4294967295|N>>>17),N=I+(L^(U|~S))+j[13]+1309151649&4294967295,I=U+(N<<21&4294967295|N>>>11),N=S+(U^(I|~L))+j[4]+4149444226&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~U))+j[11]+3174756917&4294967295,L=S+(N<<10&4294967295|N>>>22),N=U+(S^(L|~I))+j[2]+718787259&4294967295,U=L+(N<<15&4294967295|N>>>17),N=I+(L^(U|~S))+j[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+L&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var I=S-this.blockSize,j=this.B,U=this.h,L=0;L<S;){if(U==0)for(;L<=I;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<S;)if(j[U++]=D.charCodeAt(L++),U==this.blockSize){o(this,j),U=0;break}}else for(;L<S;)if(j[U++]=D[L++],U==this.blockSize){o(this,j),U=0;break}}this.h=U,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var I=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=I&255,I/=256;for(this.u(D),D=Array(16),S=I=0;4>S;++S)for(var j=0;32>j;j+=8)D[I++]=this.g[S]>>>j&255;return D};function c(D,S){var I=m;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=S(D)}function h(D,S){this.h=S;for(var I=[],j=!0,U=D.length-1;0<=U;U--){var L=D[U]|0;j&&L==S||(I[U]=L,j=!1)}this.g=I}var m={};function g(D){return-128<=D&&128>D?c(D,function(S){return new h([S|0],0>S?-1:0)}):new h([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return k(y(-D));for(var S=[],I=1,j=0;D>=I;j++)S[j]=D/I|0,I*=4294967296;return new h(S,0)}function _(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return k(_(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(S,8)),j=w,U=0;U<D.length;U+=8){var L=Math.min(8,D.length-U),N=parseInt(D.substring(U,U+L),S);8>L?(L=y(Math.pow(S,L)),j=j.j(L).add(y(N))):(j=j.j(I),j=j.add(y(N)))}return j}var w=g(0),T=g(1),R=g(16777216);s=h.prototype,s.m=function(){if(C(this))return-k(this).m();for(var D=0,S=1,I=0;I<this.g.length;I++){var j=this.i(I);D+=(0<=j?j:4294967296+j)*S,S*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(C(this))return"-"+k(this).toString(D);for(var S=y(Math.pow(D,6)),I=this,j="";;){var U=de(I,S).g;I=F(I,U.j(S));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=U,M(I))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function C(D){return D.h==-1}s.l=function(D){return D=F(this,D),C(D)?-1:M(D)?0:1};function k(D){for(var S=D.g.length,I=[],j=0;j<S;j++)I[j]=~D.g[j];return new h(I,~D.h).add(T)}s.abs=function(){return C(this)?k(this):this},s.add=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0,U=0;U<=S;U++){var L=j+(this.i(U)&65535)+(D.i(U)&65535),N=(L>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);j=N>>>16,L&=65535,N&=65535,I[U]=N<<16|L}return new h(I,I[I.length-1]&-2147483648?-1:0)};function F(D,S){return D.add(k(S))}s.j=function(D){if(M(this)||M(D))return w;if(C(this))return C(D)?k(this).j(k(D)):k(k(this).j(D));if(C(D))return k(this.j(k(D)));if(0>this.l(R)&&0>D.l(R))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,I=[],j=0;j<2*S;j++)I[j]=0;for(j=0;j<this.g.length;j++)for(var U=0;U<D.g.length;U++){var L=this.i(j)>>>16,N=this.i(j)&65535,Ve=D.i(U)>>>16,Le=D.i(U)&65535;I[2*j+2*U]+=N*Le,J(I,2*j+2*U),I[2*j+2*U+1]+=L*Le,J(I,2*j+2*U+1),I[2*j+2*U+1]+=N*Ve,J(I,2*j+2*U+1),I[2*j+2*U+2]+=L*Ve,J(I,2*j+2*U+2)}for(j=0;j<S;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=S;j<2*S;j++)I[j]=0;return new h(I,0)};function J(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function se(D,S){this.g=D,this.h=S}function de(D,S){if(M(S))throw Error("division by zero");if(M(D))return new se(w,w);if(C(D))return S=de(k(D),S),new se(k(S.g),k(S.h));if(C(S))return S=de(D,k(S)),new se(k(S.g),S.h);if(30<D.g.length){if(C(D)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var I=T,j=S;0>=j.l(D);)I=le(I),j=le(j);var U=ce(I,1),L=ce(j,1);for(j=ce(j,2),I=ce(I,2);!M(j);){var N=L.add(j);0>=N.l(D)&&(U=U.add(I),L=N),j=ce(j,1),I=ce(I,1)}return S=F(D,U.j(S)),new se(U,S)}for(U=w;0<=D.l(S);){for(I=Math.max(1,Math.floor(D.m()/S.m())),j=Math.ceil(Math.log(I)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=y(I),N=L.j(S);C(N)||0<N.l(D);)I-=j,L=y(I),N=L.j(S);M(L)&&(L=T),U=U.add(L),D=F(D,N)}return new se(U,D)}s.A=function(D){return de(this,D).h},s.and=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)&D.i(j);return new h(I,this.h&D.h)},s.or=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)|D.i(j);return new h(I,this.h|D.h)},s.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)^D.i(j);return new h(I,this.h^D.h)};function le(D){for(var S=D.g.length+1,I=[],j=0;j<S;j++)I[j]=D.i(j)<<1|D.i(j-1)>>>31;return new h(I,D.h)}function ce(D,S){var I=S>>5;S%=32;for(var j=D.g.length-I,U=[],L=0;L<j;L++)U[L]=0<S?D.i(L+I)>>>S|D.i(L+I+1)<<32-S:D.i(L+I);return new h(U,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vT=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,ki=h}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _T,Sc,bT,sd,eg,ET,wT,TT;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,b){return u==Array.prototype||u==Object.prototype||(u[v]=b.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var v=0;v<u.length;++v){var b=u[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function o(u,v){if(v)e:{var b=i;u=u.split(".");for(var A=0;A<u.length-1;A++){var H=u[A];if(!(H in b))break e;b=b[H]}u=u[u.length-1],A=b[u],v=v(A),v!=A&&v!=null&&e(b,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var b=0,A=!1,H={next:function(){if(!A&&b<u.length){var Z=b++;return{value:v(Z,u[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function _(u,v,b){return u.call.apply(u.bind,arguments)}function w(u,v,b){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),u.apply(v,H)}}return function(){return u.apply(v,arguments)}}function T(u,v,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function R(u,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function M(u,v){function b(){}b.prototype=v.prototype,u.aa=v.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(A,H,Z){for(var fe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)fe[Ke-2]=arguments[Ke];return v.prototype[H].apply(A,fe)}}function C(u){const v=u.length;if(0<v){const b=Array(v);for(let A=0;A<v;A++)b[A]=u[A];return b}return[]}function k(u,v){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(g(A)){const H=u.length||0,Z=A.length||0;u.length=H+Z;for(let fe=0;fe<Z;fe++)u[H+fe]=A[fe]}else u.push(A)}}class F{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var le=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function ce(u,v,b){for(const A in u)v.call(b,u[A],A,u)}function D(u,v){for(const b in u)v.call(void 0,u[b],b,u)}function S(u){const v={};for(const b in u)v[b]=u[b];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(u,v){let b,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(b in A)u[b]=A[b];for(let Z=0;Z<I.length;Z++)b=I[Z],Object.prototype.hasOwnProperty.call(A,b)&&(u[b]=A[b])}}function U(u){var v=1;u=u.split(":");const b=[];for(;0<v&&u.length;)b.push(u.shift()),v--;return u.length&&b.push(u.join(":")),b}function L(u){m.setTimeout(()=>{throw u},0)}function N(){var u=Ue;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class Ve{constructor(){this.h=this.g=null}add(v,b){const A=Le.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Le=new F(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,we=!1,Ue=new Ve,P=()=>{const u=m.Promise.resolve(void 0);ue=()=>{u.then(oe)}};var oe=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(b){L(b)}var v=Le;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}we=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};m.addEventListener("test",b,v),m.removeEventListener("test",b,v)}catch{}return u}();function ke(u,v){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(le){e:{try{de(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else b=="mouseover"?v=u.fromElement:b=="mouseout"&&(v=u.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}M(ke,$);var Re={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wt="closure_listenable_"+(1e6*Math.random()|0),st=0;function An(u,v,b,A,H){this.listener=u,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=H,this.key=++st,this.da=this.fa=!1}function Hn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ls(u){this.src=u,this.g={},this.h=0}ls.prototype.add=function(u,v,b,A,H){var Z=u.toString();u=this.g[Z],u||(u=this.g[Z]=[],this.h++);var fe=ir(u,v,A,H);return-1<fe?(v=u[fe],b||(v.fa=!1)):(v=new An(v,this.src,Z,!!A,H),v.fa=b,u.push(v)),v};function Ss(u,v){var b=v.type;if(b in u.g){var A=u.g[b],H=Array.prototype.indexOf.call(A,v,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(A,H,1),Z&&(Hn(v),u.g[b].length==0&&(delete u.g[b],u.h--))}}function ir(u,v,b,A){for(var H=0;H<u.length;++H){var Z=u[H];if(!Z.da&&Z.listener==v&&Z.capture==!!b&&Z.ha==A)return H}return-1}var Ns="closure_lm_"+(1e6*Math.random()|0),$r={};function $a(u,v,b,A,H){if(Array.isArray(v)){for(var Z=0;Z<v.length;Z++)$a(u,v[Z],b,A,H);return null}return b=he(b),u&&u[wt]?u.K(v,b,y(A)?!!A.capture:!1,H):Sn(u,v,b,!1,A,H)}function Sn(u,v,b,A,H,Z){if(!v)throw Error("Invalid event type");var fe=y(H)?!!H.capture:!!H,Ke=ye(u);if(Ke||(u[Ns]=Ke=new ls(u)),b=Ke.add(v,b,A,fe,Z),b.proxy)return b;if(A=bu(),b.proxy=A,A.src=u,A.listener=b,u.addEventListener)ve||(H=fe),H===void 0&&(H=!1),u.addEventListener(v.toString(),A,H);else if(u.attachEvent)u.attachEvent(Q(v.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function bu(){function u(b){return v.call(u.src,u.listener,b)}const v=ee;return u}function Yr(u,v,b,A,H){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)Yr(u,v[Z],b,A,H);else A=y(A)?!!A.capture:!!A,b=he(b),u&&u[wt]?(u=u.i,v=String(v).toString(),v in u.g&&(Z=u.g[v],b=ir(Z,b,A,H),-1<b&&(Hn(Z[b]),Array.prototype.splice.call(Z,b,1),Z.length==0&&(delete u.g[v],u.h--)))):u&&(u=ye(u))&&(v=u.g[v.toString()],u=-1,v&&(u=ir(v,b,A,H)),(b=-1<u?v[u]:null)&&V(b))}function V(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[wt])Ss(v.i,u);else{var b=u.type,A=u.proxy;v.removeEventListener?v.removeEventListener(b,A,u.capture):v.detachEvent?v.detachEvent(Q(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=ye(v))?(Ss(b,u),b.h==0&&(b.src=null,v[Ns]=null)):Hn(u)}}}function Q(u){return u in $r?$r[u]:$r[u]="on"+u}function ee(u,v){if(u.da)u=!0;else{v=new ke(v,this);var b=u.listener,A=u.ha||u.src;u.fa&&V(u),u=b.call(A,v)}return u}function ye(u){return u=u[Ns],u instanceof ls?u:null}var me="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(u){return typeof u=="function"?u:(u[me]||(u[me]=function(v){return u.handleEvent(v)}),u[me])}function ge(){pe.call(this),this.i=new ls(this),this.M=this,this.F=null}M(ge,pe),ge.prototype[wt]=!0,ge.prototype.removeEventListener=function(u,v,b,A){Yr(this,u,v,b,A)};function xe(u,v){var b,A=u.F;if(A)for(b=[];A;A=A.F)b.push(A);if(u=u.M,A=v.type||v,typeof v=="string")v=new $(v,u);else if(v instanceof $)v.target=v.target||u;else{var H=v;v=new $(A,u),j(v,H)}if(H=!0,b)for(var Z=b.length-1;0<=Z;Z--){var fe=v.g=b[Z];H=qe(fe,A,!0,v)&&H}if(fe=v.g=u,H=qe(fe,A,!0,v)&&H,H=qe(fe,A,!1,v)&&H,b)for(Z=0;Z<b.length;Z++)fe=v.g=b[Z],H=qe(fe,A,!1,v)&&H}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var b=u.g[v],A=0;A<b.length;A++)Hn(b[A]);delete u.g[v],u.h--}}this.F=null},ge.prototype.K=function(u,v,b,A){return this.i.add(String(u),v,!1,b,A)},ge.prototype.L=function(u,v,b,A){return this.i.add(String(u),v,!0,b,A)};function qe(u,v,b,A){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,Z=0;Z<v.length;++Z){var fe=v[Z];if(fe&&!fe.da&&fe.capture==b){var Ke=fe.listener,Ht=fe.ha||fe.src;fe.fa&&Ss(u.i,fe),H=Ke.call(Ht,A)!==!1&&H}}return H&&!A.defaultPrevented}function rt(u,v,b){if(typeof u=="function")b&&(u=T(u,b));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(u,v||0)}function ar(u){u.g=rt(()=>{u.g=null,u.i&&(u.i=!1,ar(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Gn extends pe{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ar(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function or(u){pe.call(this),this.h=u,this.g={}}M(or,pe);var cs=[];function us(u){ce(u.g,function(v,b){this.g.hasOwnProperty(b)&&V(v)},u),u.g={}}or.prototype.N=function(){or.aa.N.call(this),us(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var On=m.JSON.stringify,lr=m.JSON.parse,cr=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Qr(){}Qr.prototype.h=null;function fl(u){return u.h||(u.h=u.i())}function ml(){}var ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){$.call(this,"d")}M(hr,$);function pl(){$.call(this,"c")}M(pl,$);var Rs={},gl=null;function Kr(){return gl=gl||new ge}Rs.La="serverreachability";function Ya(u){$.call(this,Rs.La,u)}M(Ya,$);function Xr(u){const v=Kr();xe(v,new Ya(v))}Rs.STAT_EVENT="statevent";function Eu(u,v){$.call(this,Rs.STAT_EVENT,u),this.stat=v}M(Eu,$);function gt(u){const v=Kr();xe(v,new Eu(v,u))}Rs.Ma="timingevent";function Ft(u,v){$.call(this,Rs.Ma,u),this.size=v}M(Ft,$);function Ot(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},v)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function yl(u,v,b,A,H,Z){u.info(function(){if(u.g)if(Z)for(var fe="",Ke=Z.split("&"),Ht=0;Ht<Ke.length;Ht++){var Xe=Ke[Ht].split("=");if(1<Xe.length){var Xt=Xe[0];Xe=Xe[1];var Gt=Xt.split("_");fe=2<=Gt.length&&Gt[1]=="type"?fe+(Xt+"="+Xe+"&"):fe+(Xt+"=redacted&")}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+v+`
`+b+`
`+fe})}function wf(u,v,b,A,H,Z,fe){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+v+`
`+b+`
`+Z+" "+fe})}function Wr(u,v,b,A){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ji(u,b)+(A?" "+A:"")})}function wu(u,v){u.info(function(){return"TIMEOUT: "+v})}$n.prototype.info=function(){};function Ji(u,v){if(!u.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var A=b[u];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var fe=1;fe<H.length;fe++)H[fe]=""}}}}return On(b)}catch{return v}}var Zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cs;function Is(){}M(Is,Qr),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},Cs=new Is;function vn(u,v,b,A){this.j=u,this.i=v,this.l=b,this.R=A||1,this.U=new or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var vl={},Qa={};function hs(u,v,b){u.L=1,u.v=ra(Mn(v)),u.m=b,u.P=!0,fr(u,null)}function fr(u,v){u.F=Date.now(),ea(u),u.A=Mn(u.v);var b=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),xl(b.i,"t",A),u.C=0,b=u.j.J,u.h=new St,u.g=Lu(u.j,b?v:null,!u.m),0<u.O&&(u.M=new Gn(T(u.Y,u,u.g),u.O)),v=u.U,b=u.g,A=u.ca;var H="readystatechange";Array.isArray(H)||(H&&(cs[0]=H.toString()),H=cs);for(var Z=0;Z<H.length;Z++){var fe=$a(b,H[Z],A||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Xr(),yl(u.i,u.u,u.A,u.l,u.R,u.m)}vn.prototype.ca=function(u){u=u.target;const v=this.M;v&&Xn(u)==3?v.j():this.Y(u)},vn.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Xn(this.g);var v=this.g.Ba();const Er=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Gt!=4||v==7||(v==8||0>=Er?Xr(3):Xr(2)),Jr(this);var b=this.g.Z();this.X=b;t:if(Tu(this)){var A=Iu(this.g);u="";var H=A.length,Z=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nn(this),Ds(this);var fe="";break t}this.h.i=new m.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,u+=this.h.i.decode(A[v],{stream:!(Z&&v==H-1)});A.length=0,this.h.g+=u,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=b==200,wf(this.i,this.u,this.A,this.l,this.R,Gt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Ht=this.g;if((Ke=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Ke)){var Xe=Ke;break t}}Xe=null}if(b=Xe)Wr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,b);else{this.o=!1,this.s=3,gt(12),nn(this),Ds(this);break e}}if(this.P){b=!0;let sn;for(;!this.J&&this.C<fe.length;)if(sn=xu(this,fe),sn==Qa){Gt==4&&(this.s=4,gt(14),b=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==vl){this.s=4,gt(15),Wr(this.i,this.l,fe,"[Invalid Chunk]"),b=!1;break}else Wr(this.i,this.l,sn,null),ta(this,sn);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||fe.length!=0||this.h.h||(this.s=1,gt(16),b=!1),this.o=this.o&&b,!b)Wr(this.i,this.l,fe,"[Invalid Chunked Response]"),nn(this),Ds(this);else if(0<fe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),da(Xt),Xt.M=!0,gt(11))}}else Wr(this.i,this.l,fe,null),ta(this,fe);Gt==4&&nn(this),this.o&&!this.J&&(Gt==4?ku(this.j,this):(this.o=!1,ea(this)))}else Nf(this.g),b==400&&0<fe.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),nn(this),Ds(this)}}}catch{}finally{}};function Tu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xu(u,v){var b=u.C,A=v.indexOf(`
`,b);return A==-1?Qa:(b=Number(v.substring(b,A)),isNaN(b)?vl:(A+=1,A+b>v.length?Qa:(v=v.slice(A,A+b),u.C=A+b,v)))}vn.prototype.cancel=function(){this.J=!0,nn(this)};function ea(u){u.S=Date.now()+u.I,Au(u,u.I)}function Au(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ot(T(u.ba,u),v)}function Jr(u){u.B&&(m.clearTimeout(u.B),u.B=null)}vn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(wu(this.i,this.A),this.L!=2&&(Xr(),gt(17)),nn(this),this.s=2,Ds(this)):Au(this,this.S-u)};function Ds(u){u.j.G==0||u.J||ku(u.j,u)}function nn(u){Jr(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,us(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function ta(u,v){try{var b=u.j;if(b.G!=0&&(b.g==u||_l(b.h,u))){if(!u.K&&_l(b.h,u)&&b.G==3){try{var A=b.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)ao(b),ro(b);else break e;Cl(b),gt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ot(T(b.Za,b),6e3));if(1>=Xa(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else br(b,11)}else if((u.K||b.g==u)&&ao(b),!J(v))for(H=b.Da.g.parse(v),v=0;v<H.length;v++){let Xe=H[v];if(b.T=Xe[0],Xe=Xe[1],b.G==2)if(Xe[0]=="c"){b.K=Xe[1],b.ia=Xe[2];const Xt=Xe[3];Xt!=null&&(b.la=Xt,b.j.info("VER="+b.la));const Gt=Xe[4];Gt!=null&&(b.Aa=Gt,b.j.info("SVER="+b.Aa));const Er=Xe[5];Er!=null&&typeof Er=="number"&&0<Er&&(A=1.5*Er,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const sn=u.g;if(sn){const Ls=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var Z=A.h;Z.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Wa(Z,Z.h),Z.h=null))}if(A.D){const Dl=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(A.ya=Dl,ct(A.I,A.D,Dl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var fe=u;if(A.qa=Pu(A,A.J?A.ia:null,A.W),fe.K){_n(A.h,fe);var Ke=fe,Ht=A.L;Ht&&(Ke.I=Ht),Ke.B&&(Jr(Ke),ea(Ke)),A.g=fe}else Ou(A);0<b.i.length&&io(b)}else Xe[0]!="stop"&&Xe[0]!="close"||br(b,7);else b.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?br(b,7):Nl(b):Xe[0]!="noop"&&b.l&&b.l.ta(Xe),b.v=0)}}Xr(4)}catch{}}var Su=class{constructor(u,v){this.g=u,this.map=v}};function mr(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xa(u){return u.h?1:u.g?u.g.size:0}function _l(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Wa(u,v){u.g?u.g.add(v):u.h=v}function _n(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}mr.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const b of u.g.values())v=v.concat(b.D);return v}return C(u.i)}function Tf(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],b=u.length,A=0;A<b;A++)v.push(u[A]);return v}v=[],b=0;for(A in u)v[b++]=u[A];return v}function Za(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var b=0;b<u;b++)v.push(b);return v}v=[],b=0;for(const A in u)v[b++]=A;return v}}}function El(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var b=Za(u),A=Tf(u),H=A.length,Z=0;Z<H;Z++)v.call(void 0,A[Z],b&&b[Z],u)}var na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xf(u,v){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var A=u[b].indexOf("="),H=null;if(0<=A){var Z=u[b].substring(0,A);H=u[b].substring(A+1)}else Z=u[b];v(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Mt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Mt){this.h=u.h,sa(this,u.j),this.o=u.o,this.g=u.g,ei(this,u.s),this.l=u.l;var v=u.i,b=new gr;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),pr(this,b),this.m=u.m}else u&&(v=String(u).match(na))?(this.h=!1,sa(this,v[1]||"",!0),this.o=Yn(v[2]||""),this.g=Yn(v[3]||"",!0),ei(this,v[4]),this.l=Yn(v[5]||"",!0),pr(this,v[6]||"",!0),this.m=Yn(v[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}Mt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(ia(v,wl,!0),":");var b=this.g;return(b||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ia(v,wl,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ia(b,b.charAt(0)=="/"?Af:Tl,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ia(b,Ja)),u.join("")};function Mn(u){return new Mt(u)}function sa(u,v,b){u.j=b?Yn(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function ei(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function pr(u,v,b){v instanceof gr?(u.i=v,Ru(u.i,u.h)):(b||(v=ia(v,Sf)),u.i=new gr(v,u.h))}function ct(u,v,b){u.i.set(v,b)}function ra(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Yn(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ia(u,v,b){return typeof u=="string"?(u=encodeURI(u).replace(v,Nu),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wl=/[#\/\?@]/g,Tl=/[#\?:]/g,Af=/[#\?]/g,Sf=/[#\?@]/g,Ja=/#/g;function gr(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Qn(u){u.g||(u.g=new Map,u.h=0,u.i&&xf(u.i,function(v,b){u.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=gr.prototype,s.add=function(u,v){Qn(this),this.i=null,u=js(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(v),this.h+=1,this};function yr(u,v){Qn(u),v=js(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function vr(u,v){return Qn(u),v=js(u,v),u.g.has(v)}s.forEach=function(u,v){Qn(this),this.g.forEach(function(b,A){b.forEach(function(H){u.call(v,H,A,this)},this)},this)},s.na=function(){Qn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let A=0;A<v.length;A++){const H=u[A];for(let Z=0;Z<H.length;Z++)b.push(v[A])}return b},s.V=function(u){Qn(this);let v=[];if(typeof u=="string")vr(this,u)&&(v=v.concat(this.g.get(js(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)v=v.concat(u[b])}return v},s.set=function(u,v){return Qn(this),this.i=null,u=js(this,u),vr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},s.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function xl(u,v,b){yr(u,v),0<b.length&&(u.i=null,u.g.set(js(u,v),C(b)),u.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var A=v[b];const Z=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var H=Z;fe[A]!==""&&(H+="="+encodeURIComponent(String(fe[A]))),u.push(H)}}return this.i=u.join("&")};function js(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Ru(u,v){v&&!u.j&&(Qn(u),u.i=null,u.g.forEach(function(b,A){var H=A.toLowerCase();A!=H&&(yr(this,A),xl(this,H,b))},u)),u.j=v}function aa(u,v){const b=new $n;if(m.Image){const A=new Image;A.onload=R(Kn,b,"TestLoadImage: loaded",!0,v,A),A.onerror=R(Kn,b,"TestLoadImage: error",!1,v,A),A.onabort=R(Kn,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=R(Kn,b,"TestLoadImage: timeout",!1,v,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else v(!1)}function ds(u,v){const b=new $n,A=new AbortController,H=setTimeout(()=>{A.abort(),Kn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:A.signal}).then(Z=>{clearTimeout(H),Z.ok?Kn(b,"TestPingServer: ok",!0,v):Kn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Kn(b,"TestPingServer: error",!1,v)})}function Kn(u,v,b,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(b)}catch{}}function oa(){this.g=new cr}function Os(u,v,b){const A=b||"";try{El(u,function(H,Z){let fe=H;y(H)&&(fe=On(H)),v.push(A+Z+"="+encodeURIComponent(fe))})}catch(H){throw v.push(A+"type="+encodeURIComponent("_badmap")),H}}function ti(u){this.l=u.Ub||null,this.j=u.eb||!1}M(ti,Qr),ti.prototype.g=function(){return new _r(this.l,this.j)},ti.prototype.i=function(u){return function(){return u}}({});function _r(u,v){ge.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(_r,ge),s=_r.prototype,s.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,ks(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Ms(this):ks(this),this.readyState==3&&Al(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Ms(this))},s.Qa=function(u){this.g&&(this.response=u,Ms(this))},s.ga=function(){this.g&&Ms(this)};function Ms(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ks(u)}s.setRequestHeader=function(u,v){this.u.append(u,v)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=v.next();return u.join(`\r
`)};function ks(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sl(u){let v="";return ce(u,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function Kt(u,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Sl(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):ct(u,v,b))}function tt(u){ge.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(tt,ge);var eo=/^https?$/i,la=["POST","PUT"];s=tt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cs.g(),this.v=this.o?fl(this.o):fl(Cs),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Z){Cu(this,Z);return}if(u=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)b.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())b.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(la,v,void 0))||A||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of b)this.g.setRequestHeader(Z,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ca(this),this.u=!0,this.g.send(u),this.u=!1}catch(Z){Cu(this,Z)}};function Cu(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,to(u),Vs(u)}function to(u){u.A||(u.A=!0,xe(u,"complete"),xe(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xe(this,"complete"),xe(this,"abort"),Vs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vs(this,!0)),tt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},s.bb=function(){no(this)};function no(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xn(u)!=4||u.Z()!=2)){if(u.u&&Xn(u)==4)rt(u.Ea,0,u);else if(xe(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const fe=u.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=fe===0){var H=String(u.D).match(na)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),A=!eo.test(H?H.toLowerCase():"")}b=A}if(b)xe(u,"complete"),xe(u,"success");else{u.m=6;try{var Z=2<Xn(u)?u.g.statusText:""}catch{Z=""}u.l=Z+" ["+u.Z()+"]",to(u)}}finally{Vs(u)}}}}function Vs(u,v){if(u.g){ca(u);const b=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||xe(u,"ready");try{b.onreadystatechange=A}catch{}}}function ca(u){u.I&&(m.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),lr(v)}};function Iu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Nf(u){const v={};u=(u.g&&2<=Xn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(J(u[A]))continue;var b=U(u[A]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=v[H]||[];v[H]=Z,Z.push(b)}D(v,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||v}function so(u){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mr(u&&u.concurrentRequestLimit),this.Da=new oa,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=so.prototype,s.la=8,s.G=1,s.connect=function(u,v,b,A){gt(0),this.W=u,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=Pu(this,null,this.W),io(this)};function Nl(u){if(Du(u),u.G==3){var v=u.U++,b=Mn(u.I);if(ct(b,"SID",u.K),ct(b,"RID",v),ct(b,"TYPE","terminate"),ha(u,b),v=new vn(u,u.j,v),v.L=2,v.v=ra(Mn(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&m.Image&&(new Image().src=v.v,b=!0),b||(v.g=Lu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ea(v)}Vu(u)}function ro(u){u.g&&(da(u),u.g.cancel(),u.g=null)}function Du(u){ro(u),u.u&&(m.clearTimeout(u.u),u.u=null),ao(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function io(u){if(!Ka(u.h)&&!u.s){u.s=!0;var v=u.Ga;ue||P(),we||(ue(),we=!0),Ue.add(v,u),u.B=0}}function Rf(u,v){return Xa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ot(T(u.Ga,u,v),Il(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new vn(this,this.j,u);let Z=this.o;if(this.S&&(Z?(Z=S(Z),j(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=ju(this,H,v),b=Mn(this.I),ct(b,"RID",u),ct(b,"CVER",22),this.D&&ct(b,"X-HTTP-Session-Id",this.D),ha(this,b),Z&&(this.O?v="headers="+encodeURIComponent(String(Sl(Z)))+"&"+v:this.m&&Kt(b,this.m,Z)),Wa(this.h,H),this.Ua&&ct(b,"TYPE","init"),this.P?(ct(b,"$req",v),ct(b,"SID","null"),H.T=!0,hs(H,b,null)):hs(H,b,v),this.G=2}}else this.G==3&&(u?Rl(this,u):this.i.length==0||Ka(this.h)||Rl(this))};function Rl(u,v){var b;v?b=v.l:b=u.U++;const A=Mn(u.I);ct(A,"SID",u.K),ct(A,"RID",b),ct(A,"AID",u.T),ha(u,A),u.m&&u.o&&Kt(A,u.m,u.o),b=new vn(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),v&&(u.i=v.D.concat(u.i)),v=ju(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wa(u.h,b),hs(b,A,v)}function ha(u,v){u.H&&ce(u.H,function(b,A){ct(v,A,b)}),u.l&&El({},function(b,A){ct(v,A,b)})}function ju(u,v,b){b=Math.min(u.i.length,b);var A=u.l?T(u.l.Na,u.l,u):null;e:{var H=u.i;let Z=-1;for(;;){const fe=["count="+b];Z==-1?0<b?(Z=H[0].g,fe.push("ofs="+Z)):Z=0:fe.push("ofs="+Z);let Ke=!0;for(let Ht=0;Ht<b;Ht++){let Xe=H[Ht].g;const Xt=H[Ht].map;if(Xe-=Z,0>Xe)Z=Math.max(0,H[Ht].g-100),Ke=!1;else try{Os(Xt,fe,"req"+Xe+"_")}catch{A&&A(Xt)}}if(Ke){A=fe.join("&");break e}}}return u=u.i.splice(0,b),v.D=u,A}function Ou(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;ue||P(),we||(ue(),we=!0),Ue.add(v,u),u.v=0}}function Cl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ot(T(u.Fa,u),Il(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ot(T(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ro(this),Mu(this))};function da(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Mu(u){u.g=new vn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Mn(u.qa);ct(v,"RID","rpc"),ct(v,"SID",u.K),ct(v,"AID",u.T),ct(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(v,"TO",u.ja),ct(v,"TYPE","xmlhttp"),ha(u,v),u.m&&u.o&&Kt(v,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=ra(Mn(v)),b.m=null,b.P=!0,fr(b,u)}s.Za=function(){this.C!=null&&(this.C=null,ro(this),Cl(this),gt(19))};function ao(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function ku(u,v){var b=null;if(u.g==v){ao(u),da(u),u.g=null;var A=2}else if(_l(u.h,v))b=v.D,_n(u.h,v),A=1;else return;if(u.G!=0){if(v.o)if(A==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var H=u.B;A=Kr(),xe(A,new Ft(A,b)),io(u)}else Ou(u);else if(H=v.s,H==3||H==0&&0<v.X||!(A==1&&Rf(u,v)||A==2&&Cl(u)))switch(b&&0<b.length&&(v=u.h,v.i=v.i.concat(b)),H){case 1:br(u,5);break;case 4:br(u,10);break;case 3:br(u,6);break;default:br(u,2)}}}function Il(u,v){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*v}function br(u,v){if(u.j.info("Error code "+v),v==2){var b=T(u.fb,u),A=u.Xa;const H=!A;A=new Mt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||sa(A,"https"),ra(A),H?aa(A.toString(),b):ds(A.toString(),b)}else gt(2);u.G=0,u.l&&u.l.sa(v),Vu(u),Du(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Vu(u){if(u.G=0,u.ka=[],u.l){const v=bl(u.h);(v.length!=0||u.i.length!=0)&&(k(u.ka,v),k(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function Pu(u,v,b){var A=b instanceof Mt?Mn(b):new Mt(b);if(A.g!="")v&&(A.g=v+"."+A.g),ei(A,A.s);else{var H=m.location;A=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var Z=new Mt(null);A&&sa(Z,A),v&&(Z.g=v),H&&ei(Z,H),b&&(Z.l=b),A=Z}return b=u.D,v=u.ya,b&&v&&ct(A,b,v),ct(A,"VER",u.la),ha(u,A),A}function Lu(u,v,b){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new tt(new ti({eb:b})):new tt(u.pa),v.Ha(u.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}s=Uu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function oo(){}oo.prototype.g=function(u,v){return new bn(u,v)};function bn(u,v){ge.call(this),this.g=new so(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!J(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!J(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Ps(this)}M(bn,ge),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Nl(this.g)},bn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=On(u),u=b);v.i.push(new Su(v.Ya++,u)),v.G==3&&io(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,bn.aa.N.call(this)};function qu(u){hr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const b in v){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}M(qu,hr);function Bu(){pl.call(this),this.status=1}M(Bu,pl);function Ps(u){this.g=u}M(Ps,Uu),Ps.prototype.ua=function(){xe(this.g,"a")},Ps.prototype.ta=function(u){xe(this.g,new qu(u))},Ps.prototype.sa=function(u){xe(this.g,new Bu)},Ps.prototype.ra=function(){xe(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,TT=function(){return new oo},wT=function(){return Kr()},ET=Rs,eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,sd=Zr,dr.COMPLETE="complete",bT=dr,ml.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",ge.prototype.listen=ge.prototype.K,Sc=ml,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,_T=tt}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",P0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new kg("@firebase/firestore");function Uo(){return Pa.logLevel}function be(s,...e){if(Pa.logLevel<=$e.DEBUG){const t=e.map($g);Pa.debug(`Firestore (${ll}): ${s}`,...t)}}function Fr(s,...e){if(Pa.logLevel<=$e.ERROR){const t=e.map($g);Pa.error(`Firestore (${ll}): ${s}`,...t)}}function Ko(s,...e){if(Pa.logLevel<=$e.WARN){const t=e.map($g);Pa.warn(`Firestore (${ll}): ${s}`,...t)}}function $g(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,xT(s,i,t)}function xT(s,e,t){let i=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Fr(i),new Error(i)}function nt(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||xT(e,o,i)}function Me(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class NI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class RI{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Vi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new AT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class CI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class II{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new CI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const o=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=jI(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Ye(s,e){return s<e?-1:s>e?1:0}function tg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return Mp(o)===Mp(c)?Ye(o,c):Mp(o)?1:-1}return Ye(s.length,e.length)}const OI=55296,MI=57343;function Mp(s){const e=s.charCodeAt(0);return e>=OI&&e<=MI}function Xo(s,e,t){return s.length===e.length&&s.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class Hs{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&De(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=Hs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Ye(e.length,t.length)}static compareSegments(e,t){const i=Hs.isNumericId(e),o=Hs.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Hs.extractNumericId(e).compare(Hs.extractNumericId(t)):tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class pt extends Hs{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const kI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Hs{construct(e,t,i){return new cn(e,t,i)}static isValidIdentifier(e){return kI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new cn([U0])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(c(),o++)}if(c(),h)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(s,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function VI(s,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function q0(s){if(!Se.isDocumentKey(s))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function B0(s){if(Se.isDocumentKey(s))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function NT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Gd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":De(12329,{type:typeof s})}function is(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gd(s);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(s,e){const t={typeString:s};return e&&(t.value=e),t}function du(s,e){if(!NT(s))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=-62135596800,F0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*F0);return new lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<z0)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Bt("string",lt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new lt(0,0))}static max(){return new Oe(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=-1;function PI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new lt(t+1,0):new lt(t,i));return new Ui(o,Se.empty(),e)}function LI(s){return new Ui(s.readTime,s.key,Fc)}class Ui{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ui(Oe.min(),Se.empty(),Fc)}static max(){return new Ui(Oe.max(),Se.empty(),Fc)}}function UI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(s.documentKey,e.documentKey),t!==0?t:Ye(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==qI)throw s;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,i)=>{t(e)})}static reject(e){return new ae((t,i)=>{i(e)})}static waitFor(e){return new ae((t,i)=>{let o=0,c=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++c,h&&c===o&&t()},g=>i(g))}),h=!0,c===o&&t()})}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next(o=>o?ae.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,c)=>{i.push(t.call(this,o,c))}),this.waitFor(i)}static mapArray(e,t){return new ae((i,o)=>{const c=e.length,h=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;t(e[y]).next(_=>{h[y]=_,++m,m===c&&i(h)},_=>o(_))}})}static doWhile(e,t){return new ae((i,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):i()};c()})}}function zI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ul(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$d.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=-1;function Yd(s){return s==null}function bd(s){return s===0&&1/s==-1/0}function FI(s){return typeof s=="number"&&Number.isInteger(s)&&!bd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="";function HI(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=H0(e)),e=GI(s.get(t),e);return H0(e)}function GI(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case RT:t+="";break;default:t+=c}}return t}function H0(s){return s+RT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Wi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function CT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??ln.RED,this.left=o??ln.EMPTY,this.right=c??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new ln(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return ln.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new Qt(cn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new IT("Invalid base64 string: "+c):c}}(e);return new un(t)}static fromUint8Array(e){const t=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const $I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(s){if(nt(!!s,39018),typeof s=="string"){let e=0;const t=$I.exec(s);if(nt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(s.seconds),nanos:It(s.nanos)}}function It(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Bi(s){return typeof s=="string"?un.fromBase64String(s):un.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="server_timestamp",jT="__type__",OT="__previous_value__",MT="__local_write_time__";function Kg(s){return(s?.mapValue?.fields||{})[jT]?.stringValue===DT}function Qd(s){const e=s.mapValue.fields[OT];return Kg(e)?Qd(e):e}function Hc(s){const e=qi(s.mapValue.fields[MT].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i,o,c,h,m,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ed="(default)";class Gc{constructor(e,t){this.projectId=e,this.database=t||Ed}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__type__",QI="__max__",$h={mapValue:{}},VT="__vector__",wd="value";function zi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Kg(s)?4:XI(s)?9007199254740991:KI(s)?10:11:De(28295,{value:s})}function tr(s,e){if(s===e)return!0;const t=zi(s);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Hc(s).isEqual(Hc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=qi(o.timestampValue),m=qi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,c){return Bi(o.bytesValue).isEqual(Bi(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,c){return It(o.geoPointValue.latitude)===It(c.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(c.geoPointValue.longitude)}(s,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return It(o.integerValue)===It(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=It(o.doubleValue),m=It(c.doubleValue);return h===m?bd(h)===bd(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return Xo(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(G0(h)!==G0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!tr(h[g],m[g])))return!1;return!0}(s,e);default:return De(52216,{left:s})}}function $c(s,e){return(s.values||[]).find(t=>tr(t,e))!==void 0}function Wo(s,e){if(s===e)return 0;const t=zi(s),i=zi(e);if(t!==i)return Ye(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(s.booleanValue,e.booleanValue);case 2:return function(c,h){const m=It(c.integerValue||c.doubleValue),g=It(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return Y0(s.timestampValue,e.timestampValue);case 4:return Y0(Hc(s),Hc(e));case 5:return tg(s.stringValue,e.stringValue);case 6:return function(c,h){const m=Bi(c),g=Bi(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(c,h){const m=c.split("/"),g=h.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=Ye(m[y],g[y]);if(_!==0)return _}return Ye(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,h){const m=Ye(It(c.latitude),It(h.latitude));return m!==0?m:Ye(It(c.longitude),It(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Q0(s.arrayValue,e.arrayValue);case 10:return function(c,h){const m=c.fields||{},g=h.fields||{},y=m[wd]?.arrayValue,_=g[wd]?.arrayValue,w=Ye(y?.values?.length||0,_?.values?.length||0);return w!==0?w:Q0(y,_)}(s.mapValue,e.mapValue);case 11:return function(c,h){if(c===$h.mapValue&&h===$h.mapValue)return 0;if(c===$h.mapValue)return 1;if(h===$h.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=h.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let w=0;w<g.length&&w<_.length;++w){const T=tg(g[w],_[w]);if(T!==0)return T;const R=Wo(m[g[w]],y[_[w]]);if(R!==0)return R}return Ye(g.length,_.length)}(s.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function Y0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ye(s,e);const t=qi(s),i=qi(e),o=Ye(t.seconds,i.seconds);return o!==0?o:Ye(t.nanos,i.nanos)}function Q0(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Wo(t[o],i[o]);if(c)return c}return Ye(t.length,i.length)}function Zo(s){return ng(s)}function ng(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=qi(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Bi(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Se.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=ng(c);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${ng(t.fields[h])}`;return o+"}"}(s.mapValue):De(61005,{value:s})}function rd(s){switch(zi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(s);return e?16+rd(e):16;case 5:return 2*s.stringValue.length;case 6:return Bi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,c)=>o+rd(c),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return Wi(i.fields,(c,h)=>{o+=c.length+rd(h)}),o}(s.mapValue);default:throw De(13486,{value:s})}}function K0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function sg(s){return!!s&&"integerValue"in s}function Xg(s){return!!s&&"arrayValue"in s}function X0(s){return!!s&&"nullValue"in s}function W0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function id(s){return!!s&&"mapValue"in s}function KI(s){return(s?.mapValue?.fields||{})[kT]?.stringValue===VT}function jc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Wi(s.mapValue.fields,(t,i)=>e.mapValue.fields[t]=jc(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jc(s.arrayValue.values[t]);return e}return{...s}}function XI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===QI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=cn.emptyPath(),i={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=jc(h):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];id(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Wi(t,(o,c)=>e[o]=c);for(const o of i)delete e[o]}clone(){return new jn(jc(this.value))}}function PT(s){const e=[];return Wi(s.fields,(t,i)=>{const o=new cn([t]);if(id(i)){const c=PT(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,i,o,c,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new pn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,t,i,o){return new pn(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new pn(e,2,t,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.position=e,this.inclusive=t}}function Z0(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Se.comparator(Se.fromName(h.referenceValue),t.key):i=Wo(h,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!tr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function WI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class qt extends LT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new JI(e,t,i):t==="array-contains"?new nD(e,i):t==="in"?new sD(e,i):t==="not-in"?new rD(e,i):t==="array-contains-any"?new iD(e,i):new qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eD(e,i):new tD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ws extends LT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ws(e,t)}matches(e){return UT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UT(s){return s.op==="and"}function qT(s){return ZI(s)&&UT(s)}function ZI(s){for(const e of s.filters)if(e instanceof ws)return!1;return!0}function rg(s){if(s instanceof qt)return s.field.canonicalString()+s.op.toString()+Zo(s.value);if(qT(s))return s.filters.map(e=>rg(e)).join(",");{const e=s.filters.map(t=>rg(t)).join(",");return`${s.op}(${e})`}}function BT(s,e){return s instanceof qt?function(i,o){return o instanceof qt&&i.op===o.op&&i.field.isEqual(o.field)&&tr(i.value,o.value)}(s,e):s instanceof ws?function(i,o){return o instanceof ws&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((c,h,m)=>c&&BT(h,o.filters[m]),!0):!1}(s,e):void De(19439)}function zT(s){return s instanceof qt?function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`}(s):s instanceof ws?function(t){return t.op.toString()+" {"+t.getFilters().map(zT).join(" ,")+"}"}(s):"Filter"}class JI extends qt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class eD extends qt{constructor(e,t){super(e,"in",t),this.keys=FT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tD extends qt{constructor(e,t){super(e,"not-in",t),this.keys=FT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FT(s,e){return(e.arrayValue?.values||[]).map(t=>Se.fromName(t.referenceValue))}class nD extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xg(t)&&$c(t.arrayValue,this.value)}}class sD extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class rD extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$c(this.value.arrayValue,t)}}class iD extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>$c(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t=null,i=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function eE(s,e=null,t=[],i=[],o=null,c=null,h=null){return new aD(s,e,t,i,o,c,h)}function Wg(s){const e=Me(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>rg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(c){return c.field.canonicalString()+c.dir}(i)).join(","),Yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zo(i)).join(",")),e.Te=t}return e.Te}function Zg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!WI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!BT(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!J0(s.startAt,e.startAt)&&J0(s.endAt,e.endAt)}function ig(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t=null,i=[],o=[],c=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oD(s,e,t,i,o,c,h,m){return new hl(s,e,t,i,o,c,h,m)}function Kd(s){return new hl(s)}function tE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HT(s){return s.collectionGroup!==null}function Oc(s){const e=Me(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Qt(cn.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Yc(c,i))}),t.has(cn.keyField().canonicalString())||e.Ie.push(new Yc(cn.keyField(),i))}return e.Ie}function Xs(s){const e=Me(s);return e.Ee||(e.Ee=lD(e,Oc(s))),e.Ee}function lD(s,e){if(s.limitType==="F")return eE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Yc(o.field,c)});const t=s.endAt?new Td(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Td(s.startAt.position,s.startAt.inclusive):null;return eE(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function ag(s,e){const t=s.filters.concat([e]);return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function og(s,e,t){return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Xd(s,e){return Zg(Xs(s),Xs(e))&&s.limitType===e.limitType}function GT(s){return`${Wg(Xs(s))}|lt:${s.limitType}`}function qo(s){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>zT(o)).join(", ")}]`),Yd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Zo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Zo(o)).join(",")),`Target(${i})`}(Xs(s))}; limitType=${s.limitType})`}function Wd(s,e){return e.isFoundDocument()&&function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Se.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)}(s,e)&&function(i,o){for(const c of Oc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,m,g){const y=Z0(h,m,g);return h.inclusive?y<=0:y<0}(i.startAt,Oc(i),o)||i.endAt&&!function(h,m,g){const y=Z0(h,m,g);return h.inclusive?y>=0:y>0}(i.endAt,Oc(i),o))}(s,e)}function cD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function $T(s){return(e,t)=>{let i=!1;for(const o of Oc(s)){const c=uD(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function uD(s,e,t){const i=s.field.isKeyField()?Se.comparator(e.key,t.key):function(c,h,m){const g=h.data.field(c),y=m.data.field(c);return g!==null&&y!==null?Wo(g,y):De(42886)}(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,i)=>{for(const[o,c]of i)e(o,c)})}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Et(Se.comparator);function Hr(){return hD}const YT=new Et(Se.comparator);function Nc(...s){let e=YT;for(const t of s)e=e.insert(t.key,t);return e}function QT(s){let e=YT;return s.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ia(){return Mc()}function KT(){return Mc()}function Mc(){return new Fa(s=>s.toString(),(s,e)=>s.isEqual(e))}const dD=new Et(Se.comparator),fD=new Qt(Se.comparator);function Qe(...s){let e=fD;for(const t of s)e=e.add(t);return e}const mD=new Qt(Ye);function pD(){return mD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function XT(s){return{integerValue:""+s}}function gD(s,e){return FI(e)?XT(e):Jg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this._=void 0}}function yD(s,e,t){return s instanceof Qc?function(o,c){const h={fields:{[jT]:{stringValue:DT},[MT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Kg(c)&&(c=Qd(c)),c&&(h.fields[OT]=c),{mapValue:h}}(t,e):s instanceof Kc?ZT(s,e):s instanceof Xc?JT(s,e):function(o,c){const h=WT(o,c),m=nE(h)+nE(o.Ae);return sg(h)&&sg(o.Ae)?XT(m):Jg(o.serializer,m)}(s,e)}function vD(s,e,t){return s instanceof Kc?ZT(s,e):s instanceof Xc?JT(s,e):t}function WT(s,e){return s instanceof xd?function(i){return sg(i)||function(c){return!!c&&"doubleValue"in c}(i)}(e)?e:{integerValue:0}:null}class Qc extends Zd{}class Kc extends Zd{constructor(e){super(),this.elements=e}}function ZT(s,e){const t=e1(e);for(const i of s.elements)t.some(o=>tr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Xc extends Zd{constructor(e){super(),this.elements=e}}function JT(s,e){let t=e1(e);for(const i of s.elements)t=t.filter(o=>!tr(o,i));return{arrayValue:{values:t}}}class xd extends Zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nE(s){return It(s.integerValue||s.doubleValue)}function e1(s){return Xg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t){this.field=e,this.transform=t}}function bD(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof Kc&&o instanceof Kc||i instanceof Xc&&o instanceof Xc?Xo(i.elements,o.elements,tr):i instanceof xd&&o instanceof xd?tr(i.Ae,o.Ae):i instanceof Qc&&o instanceof Qc}(s.transform,e.transform)}class ED{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Jd{}function t1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ey(s.key,as.none()):new fu(s.key,s.data,as.none());{const t=s.data,i=jn.empty();let o=new Qt(cn.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Zi(s.key,i,new Fn(o.toArray()),as.none())}}function wD(s,e,t){s instanceof fu?function(o,c,h){const m=o.value.clone(),g=rE(o.fieldTransforms,c,h.transformResults);m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):s instanceof Zi?function(o,c,h){if(!ad(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=rE(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(n1(o)),g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function kc(s,e,t,i){return s instanceof fu?function(c,h,m,g){if(!ad(c.precondition,h))return m;const y=c.value.clone(),_=iE(c.fieldTransforms,g,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(s,e,t,i):s instanceof Zi?function(c,h,m,g){if(!ad(c.precondition,h))return m;const y=iE(c.fieldTransforms,g,h),_=h.data;return _.setAll(n1(c)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(w=>w.field))}(s,e,t,i):function(c,h,m){return ad(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,t)}function TD(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=WT(i.transform,o||null);c!=null&&(t===null&&(t=jn.empty()),t.set(i.field,c))}return t||null}function sE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Xo(i,o,(c,h)=>bD(c,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fu extends Jd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends Jd{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function n1(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}}),e}function rE(s,e,t){const i=new Map;nt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const c=s[o],h=c.transform,m=e.data.field(c.field);i.set(c.field,vD(h,m,t[o]))}return i}function iE(s,e,t){const i=new Map;for(const o of s){const c=o.transform,h=t.data.field(o.field);i.set(o.field,yD(c,h,e))}return i}class ey extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xD extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&wD(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=kc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=kc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=KT();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=t.has(o.key)?null:m;const g=t1(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>sE(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>sE(t,i))}}class ty{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return dD}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new ty(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ze;function RD(s){switch(s){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:s})}}function s1(s){if(s===void 0)return Fr("GRPC error has no .code"),re.UNKNOWN;switch(s){case Lt.OK:return re.OK;case Lt.CANCELLED:return re.CANCELLED;case Lt.UNKNOWN:return re.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return re.INTERNAL;case Lt.UNAVAILABLE:return re.UNAVAILABLE;case Lt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Lt.NOT_FOUND:return re.NOT_FOUND;case Lt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Lt.ABORTED:return re.ABORTED;case Lt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Lt.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:s})}}(Ze=Lt||(Lt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new ki([4294967295,4294967295],0);function aE(s){const e=CD().encode(s),t=new vT;return t.update(e),new Uint8Array(t.digest())}function oE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ki([t,i],0),new ki([o,c],0)]}class ny{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Rc(`Invalid padding: ${t}`);if(i<0)throw new Rc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(ki.fromNumber(i)));return o.compare(ID)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=aE(e),[i,o]=oE(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new ny(c,o,t);return i.forEach(m=>h.insert(m)),h}insert(e){if(this.ge===0)return;const t=aE(e),[i,o]=oE(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,mu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ef(Oe.min(),o,new Et(Ye),Hr(),Qe())}}class mu{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new mu(i,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class r1{constructor(e,t){this.targetId=e,this.Ce=t}}class i1{constructor(e,t,i=un.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=cE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),i=Qe();return this.Fe.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:De(38017,{changeType:c})}}),new mu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=cE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hr(),this.Je=Yh(),this.He=Yh(),this.Ye=new Et(Ye)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,o)=>{this.rt(o)&&t(o)})}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(ig(c))if(i===0){const h=new Se(c.path);this.et(t,h,pn.newNoDocument(h,Oe.min()))}else nt(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let h,m;try{h=Bi(i).toUint8Array()}catch(g){if(g instanceof IT)return Ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ny(h,o,c)}catch(g){return Ko(g instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach(c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)}),o}Tt(e){const t=new Map;this.ze.forEach((c,h)=>{const m=this.ot(h);if(m){if(c.current&&ig(m.target)){const g=new Se(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,pn.newNoDocument(g,e))}c.Be&&(t.set(h,c.ke()),c.qe())}});let i=Qe();this.He.forEach((c,h)=>{let m=!0;h.forEachWhile(g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(c))}),this.je.forEach((c,h)=>h.setReadTime(e));const o=new ef(e,t,this.Ye,this.je,i);return this.je=Hr(),this.Je=Yh(),this.He=Yh(),this.Ye=new Et(Ye),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Ye),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yh(){return new Et(Se.comparator)}function cE(){return new Et(Se.comparator)}const jD={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class kD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lg(s,e){return s.useProto3Json||Yd(e)?e:{value:e}}function Ad(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function VD(s,e){return Ad(s,e.toTimestamp())}function Ws(s){return nt(!!s,49232),Oe.fromTimestamp(function(t){const i=qi(t);return new lt(i.seconds,i.nanos)}(s))}function sy(s,e){return cg(s,e).canonicalString()}function cg(s,e){const t=function(o){return new pt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function o1(s){const e=pt.fromString(s);return nt(d1(e),10190,{key:e.toString()}),e}function ug(s,e){return sy(s.databaseId,e.path)}function kp(s,e){const t=o1(e);if(t.get(1)!==s.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Se(c1(t))}function l1(s,e){return sy(s.databaseId,e)}function PD(s){const e=o1(s);return e.length===4?pt.emptyPath():c1(e)}function hg(s){return new pt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function c1(s){return nt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function uE(s,e,t){return{name:ug(s,e),fields:t.value.mapValue.fields}}function LD(s,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:De(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,_){return y.useProto3Json?(nt(_===void 0||typeof _=="string",58123),un.fromBase64String(_||"")):(nt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),un.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(y){const _=y.code===void 0?re.UNKNOWN:s1(y.code);return new _e(_,y.message||"")}(h);t=new i1(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=kp(s,i.document.name),c=Ws(i.document.updateTime),h=i.document.createTime?Ws(i.document.createTime):Oe.min(),m=new jn({mapValue:{fields:i.document.fields}}),g=pn.newFoundDocument(o,c,h,m),y=i.targetIds||[],_=i.removedTargetIds||[];t=new od(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=kp(s,i.document),c=i.readTime?Ws(i.readTime):Oe.min(),h=pn.newNoDocument(o,c),m=i.removedTargetIds||[];t=new od([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=kp(s,i.document),c=i.removedTargetIds||[];t=new od([],c,o,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new ND(o,c),m=i.targetId;t=new r1(m,h)}}return t}function UD(s,e){let t;if(e instanceof fu)t={update:uE(s,e.key,e.value)};else if(e instanceof ey)t={delete:ug(s,e.key)};else if(e instanceof Zi)t={update:uE(s,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof xD))return De(16599,{Vt:e.type});t={verify:ug(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(c,h){const m=h.transform;if(m instanceof Qc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Kc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Xc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof xd)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw De(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:VD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:De(27497)}(s,e.precondition)),t}function qD(s,e){return s&&s.length>0?(nt(e!==void 0,14353),s.map(t=>function(o,c){let h=o.updateTime?Ws(o.updateTime):Ws(c);return h.isEqual(Oe.min())&&(h=Ws(c)),new ED(h,o.transformResults||[])}(t,e))):[]}function BD(s,e){return{documents:[l1(s,e.path)]}}function zD(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=l1(s,o);const c=function(y){if(y.length!==0)return h1(ws.create(y,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(_=>function(T){return{field:Bo(T.field),direction:GD(T.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=lg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:t,parent:o}}function FD(s){let e=PD(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=function(w){const T=u1(w);return T instanceof ws&&qT(T)?T.getFilters():[T]}(t.where));let h=[];t.orderBy&&(h=function(w){return w.map(T=>function(M){return new Yc(zo(M.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(w){let T;return T=typeof w=="object"?w.value:w,Yd(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(w){const T=!!w.before,R=w.values||[];return new Td(R,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,R=w.values||[];return new Td(R,T)}(t.endAt)),oD(e,o,h,c,m,"F",g,y)}function HD(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u1(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zo(t.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=zo(t.unaryFilter.field);return qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=zo(t.unaryFilter.field);return qt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(s):s.fieldFilter!==void 0?function(t){return qt.create(zo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return ws.create(t.compositeFilter.filters.map(i=>u1(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(t.compositeFilter.op))}(s):De(30097,{filter:s})}function GD(s){return jD[s]}function $D(s){return OD[s]}function YD(s){return MD[s]}function Bo(s){return{fieldPath:s.canonicalString()}}function zo(s){return cn.fromServerFormat(s.fieldPath)}function h1(s){return s instanceof qt?function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(X0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(X0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:$D(t.op),value:t.value}}}(s):s instanceof ws?function(t){const i=t.getFilters().map(o=>h1(o));return i.length===1?i[0]:{compositeFilter:{op:YD(t.op),filters:i}}}(s):De(54877,{filter:s})}function QD(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,i,o,c=Oe.min(),h=Oe.min(),m=un.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.yt=e}}function XD(s){const e=FD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?og(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.Cn=new ZD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ui.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class ZD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Qt(pt.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Qt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f1=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(f1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="LruGarbageCollector",JD=1048576;function fE([s,e],[t,i]){const o=Ye(s,t);return o===0?Ye(e,i):o}class ej{constructor(e){this.Ir=e,this.buffer=new Qt(fE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tj{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(dE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ul(t)?be(dE,"Ignoring IndexedDB error during garbage collection: ",t):await cl(t)}await this.Vr(3e5)})}}class nj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ae.resolve($d.ce);const i=new ej(t);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(hE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,h,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,m=Date.now(),this.removeTargets(e,i,t))).next(w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(y=Date.now(),Uo()<=$e.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w})))}}function sj(s,e){return new nj(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.changes=new Fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&kc(i.mutation,o,Fn.empty(),lt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qe()){const o=Ia();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(c=>{let h=Nc();return c.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=Ia();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qe()))}populateOverlays(e,t,i){const o=[];return i.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,i,o){let c=Hr();const h=Mc(),m=function(){return Mc()}();return t.forEach((g,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Zi)?c=c.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),kc(_.mutation,y,_.mutation.getFieldMask(),lt.now())):h.set(y.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,_)=>h.set(y,_)),t.forEach((y,_)=>m.set(y,new ij(_,h.get(y)??null))),m))}recalculateAndSaveOverlays(e,t){const i=Mc();let o=new Et((h,m)=>h-m),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let _=i.get(g)||Fn.empty();_=m.applyToLocalView(y,_),i.set(g,_);const w=(o.get(m.batchId)||Qe()).add(g);o=o.insert(m.batchId,w)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,w=KT();_.forEach(T=>{if(!c.has(T)){const R=t1(t.get(T),i.get(T));R!==null&&w.set(T,R),c=c.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ae.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):ae.resolve(Ia());let m=Fc,g=c;return h.next(y=>ae.forEach(y,(_,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),c.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{g=g.insert(_,T)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,Qe())).next(_=>({batchId:m,changes:QT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(i=>{let o=Nc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let h=Nc();return this.indexManager.getCollectionParents(e,c).next(m=>ae.forEach(m,g=>{const y=function(w,T){return new hl(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((w,T)=>{h=h.insert(w,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o))).next(h=>{c.forEach((g,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,pn.newInvalidDocument(_)))});let m=Nc();return h.forEach((g,y)=>{const _=c.get(g);_!==void 0&&kc(_.mutation,y,Fn.empty(),lt.now()),Wd(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ws(o.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(o){return{name:o.name,query:XD(o.bundledQuery),readTime:Ws(o.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.overlays=new Et(Se.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ia();return ae.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&i.set(o,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,c)=>{this.St(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const o=Ia(),c=t.length+1,h=new Se(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new Et((y,_)=>y-_);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=c.get(y.largestBatchId);_===null&&(_=Ia(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=Ia(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,_)=>m.set(y,_)),!(m.size()>=o)););return ae.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new SD(t,i));let c=this.qr.get(t);c===void 0&&(c=Qe(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.Qr=new Qt(tn.$r),this.Ur=new Qt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new tn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new tn(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){const t=new Se(new pt([])),i=new tn(t,e),o=new tn(t,e+1),c=[];return this.Ur.forEachInRange([i,o],h=>{this.Gr(h),c.push(h.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new pt([])),i=new tn(t,e),o=new tn(t,e+1);let c=Qe();return this.Ur.forEachInRange([i,o],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new tn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Ye(e.Yr,t.Yr)}static Kr(e,t){return Ye(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(tn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new AD(c,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new tn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Qg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tn(t,0),o=new tn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],h=>{const m=this.Xr(h.Yr);c.push(m)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(Ye);return t.forEach(o=>{const c=new tn(o,0),h=new tn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],m=>{i=i.add(m.Yr)})}),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Se.isDocumentKey(c)||(c=c.child(""));const h=new tn(new Se(c),0);let m=new Qt(Ye);return this.Zr.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)},h),ae.resolve(this.ti(m))}ti(e){const t=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(t.mutations,o=>{const c=new tn(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){const i=new tn(t,0),o=this.Zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.ri=e,this.docs=function(){return new Et(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let i=Hr();return t.forEach(o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():pn.newInvalidDocument(o))}),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Hr();const h=t.path,m=new Se(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||UI(LI(_),i)<=0||(o.has(_.key)||Wd(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,t,i,o){De(9500)}ii(e,t){return ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new dj(this)}getSize(e){return ae.resolve(this.size)}}class dj extends rj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.persistence=e,this.si=new Fa(t=>Wg(t),Zg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new ry,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,t){return this.si.forEach((i,o)=>t(o)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ae.waitFor(c).next(()=>o)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.ui={},this.overlays={},this.ci=new $d(0),this.li=!1,this.li=!0,this.hi=new cj,this.referenceDelegate=e(this),this.Pi=new fj(this),this.indexManager=new WD,this.remoteDocumentCache=function(o){return new hj(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new KD(t),this.Ii=new oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uj(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){be("MemoryPersistence","Starting transaction:",e);const o=new mj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,t){return ae.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class mj extends BI{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new ry,this.Vi=null}static mi(e){return new iy(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.fi.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,i=>{const o=Se.fromPath(i);return this.gi(e,o).next(c=>{c||t.removeEntry(o,Oe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sd{constructor(e,t){this.persistence=e,this.pi=new Fa(i=>HI(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=sj(this,t)}static mi(e,t){return new Sd(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return ae.forEach(this.pi,(i,o)=>this.br(e,i,o).next(c=>c?ae.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,h=>this.br(e,h,t).next(m=>{m||(i++,c.removeEntry(h,Oe.min()))})).next(()=>c.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}br(e,t,i){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ae.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Qe(),o=Qe();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ay(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return YN()?8:zI(gn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ws(e,t,o,i).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new pj;return this.Ss(e,t,h).next(m=>{if(c.result=m,this.Vs)return this.bs(e,t,h,m.size)})}).next(()=>c.result)}bs(e,t,i,o){return i.documentReadCount<this.fs?(Uo()<=$e.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Uo()<=$e.DEBUG&&be("QueryEngine","Query:",qo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Uo()<=$e.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(t))):ae.resolve())}ys(e,t){if(tE(t))return ae.resolve(null);let i=Xs(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=og(t,null,"F"),i=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const h=Qe(...c);return this.ps.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,i).next(g=>{const y=this.Ds(t,m);return this.Cs(t,y,h,g.readTime)?this.ys(e,og(t,null,"F")):this.vs(e,y,t,g)}))})))}ws(e,t,i,o){return tE(t)||o.isEqual(Oe.min())?ae.resolve(null):this.ps.getDocuments(e,i).next(c=>{const h=this.Ds(t,c);return this.Cs(t,h,i,o)?ae.resolve(null):(Uo()<=$e.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qo(t)),this.vs(e,h,t,PI(o,Fc)).next(m=>m))})}Ds(e,t){let i=new Qt($T(e));return t.forEach((o,c)=>{Wd(e,c)&&(i=i.add(c))}),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return Uo()<=$e.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",qo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ui.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",yj=3e8;class vj{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(Ye),this.xs=new Fa(c=>Wg(c),Zg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _j(s,e,t,i){return new vj(s,e,t,i)}async function p1(s,e){const t=Me(s);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const h=[],m=[];let g=Qe();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next(y=>({Ls:y,removedBatchIds:h,addedBatchIds:m}))})})}function bj(s,e){const t=Me(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,y,_){const w=y.batch,T=w.keys();let R=ae.resolve();return T.forEach(M=>{R=R.next(()=>_.getEntry(g,M)).next(C=>{const k=y.docVersions.get(M);nt(k!==null,48541),C.version.compareTo(k)<0&&(w.applyToRemoteDocument(C,y),C.isValidDocument()&&(C.setReadTime(y.commitVersion),_.addEntry(C)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(g,w))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let g=Qe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function g1(s){const e=Me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Ej(s,e){const t=Me(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach((_,w)=>{const T=o.get(w);if(!T)return;m.push(t.Pi.removeMatchingKeys(c,_.removedDocuments,w).next(()=>t.Pi.addMatchingKeys(c,_.addedDocuments,w)));let R=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(un.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(w,R),function(C,k,F){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=yj?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,R,_)&&m.push(t.Pi.updateTargetData(c,R))});let g=Hr(),y=Qe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(wj(c,h,e.documentUpdates).next(_=>{g=_.ks,y=_.qs})),!i.isEqual(Oe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(c).next(w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i));m.push(_)}return ae.waitFor(m).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(t.Ms=o,c))}function wj(s,e,t){let i=Qe(),o=Qe();return t.forEach(c=>i=i.add(c)),e.getEntries(s,i).next(c=>{let h=Hr();return t.forEach((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):be(oy,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{ks:h,qs:o}})}function Tj(s,e){const t=Me(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Qg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xj(s,e){const t=Me(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Pi.getTargetData(i,e).next(c=>c?(o=c,ae.resolve(o)):t.Pi.allocateTargetId(i).next(h=>(o=new ji(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function dg(s,e,t){const i=Me(s),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ul(h))throw h;be(oy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function mE(s,e,t){const i=Me(s);let o=Oe.min(),c=Qe();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,_){const w=Me(g),T=w.xs.get(_);return T!==void 0?ae.resolve(w.Ms.get(T)):w.Pi.getTargetData(y,_)}(i,h,Xs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next(g=>{c=g})}).next(()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Oe.min(),t?c:Qe())).next(m=>(Aj(i,cD(e),m),{documents:m,Qs:c})))}function Aj(s,e,t){let i=s.Os.get(e)||Oe.min();t.forEach((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),s.Os.set(e,i)}class pE{constructor(){this.activeTargetIds=pD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sj{constructor(){this.Mo=new pE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="ConnectivityMonitor";class yE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(gE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(gE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function fg(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="RestConnection",Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ed?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const h=fg(),m=this.zo(e,t.toUriEncodedString());be(Vp,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(m),_=qa(y);return this.Jo(e,m,g,i,_).then(w=>(be(Vp,`Received RPC '${e}' ${h}: `,w),w),w=>{throw Ko(Vp,`RPC '${e}' ${h} failed with error: `,w,"url: ",m,"request:",i),w})}Ho(e,t,i,o,c,h){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),i&&i.headers.forEach((o,c)=>e[c]=o)}zo(e,t){const i=Rj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class Dj extends Cj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const h=fg();return new Promise((m,g)=>{const y=new _T;y.setWithCredentials(!0),y.listenOnce(bT.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case sd.NO_ERROR:const w=y.getResponseJson();be(fn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),m(w);break;case sd.TIMEOUT:be(fn,`RPC '${e}' ${h} timed out`),g(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const T=y.getStatus();if(be(fn,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R?.error;if(M&&M.status&&M.message){const C=function(F){const J=F.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(J)>=0?J:re.UNKNOWN}(M.status);g(new _e(C,M.message))}else g(new _e(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new _e(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{be(fn,`RPC '${e}' ${h} completed.`)}});const _=JSON.stringify(o);be(fn,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)})}T_(e,t,i){const o=fg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=TT(),m=wT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=c.join("");be(fn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const w=h.createWebChannel(_,g);this.I_(w);let T=!1,R=!1;const M=new Ij({Yo:k=>{R?be(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(T||(be(fn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),be(fn,`RPC '${e}' stream ${o} sending:`,k),w.send(k))},Zo:()=>w.close()}),C=(k,F,J)=>{k.listen(F,se=>{try{J(se)}catch(de){setTimeout(()=>{throw de},0)}})};return C(w,Sc.EventType.OPEN,()=>{R||(be(fn,`RPC '${e}' stream ${o} transport opened.`),M.o_())}),C(w,Sc.EventType.CLOSE,()=>{R||(R=!0,be(fn,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(w))}),C(w,Sc.EventType.ERROR,k=>{R||(R=!0,Ko(fn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),M.a_(new _e(re.UNAVAILABLE,"The operation could not be completed")))}),C(w,Sc.EventType.MESSAGE,k=>{if(!R){const F=k.data[0];nt(!!F,16349);const J=F,se=J?.error||J[0]?.error;if(se){be(fn,`RPC '${e}' stream ${o} received error:`,se);const de=se.status;let le=function(S){const I=Lt[S];if(I!==void 0)return s1(I)}(de),ce=se.message;le===void 0&&(le=re.INTERNAL,ce="Unknown error status: "+de+" with message "+se.message),R=!0,M.a_(new _e(le,ce)),w.close()}else be(fn,`RPC '${e}' stream ${o} received:`,F),M.u_(F)}}),C(m,ET.STAT_EVENT,k=>{k.stat===eg.PROXY?be(fn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===eg.NOPROXY&&be(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s){return new kD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="PersistentStream";class v1{constructor(e,t,i,o,c,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===t&&this.G_(i,o)},i=>{e(()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(be(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jj extends v1{constructor(e,t,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LD(this.serializer,e),i=function(c){if(!("targetChange"in c))return Oe.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Oe.min():h.readTime?Ws(h.readTime):Oe.min()}(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=hg(this.serializer),t.addTarget=function(c,h){let m;const g=h.target;if(m=ig(g)?{documents:BD(c,g)}:{query:zD(c,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=a1(c,h.resumeToken);const y=lg(c,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Ad(c,h.snapshotVersion.toTimestamp());const y=lg(c,h.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const i=HD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=hg(this.serializer),t.removeTarget=e,this.q_(t)}}class Oj extends v1{constructor(e,t,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qD(e.writeResults,e.commitTime),i=Ws(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>UD(this.serializer,i))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{}class kj extends Mj{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Go(e,cg(t,i),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(re.UNKNOWN,c.toString())})}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Ho(e,cg(t,i),o,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new _e(re.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Vj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fr(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="RemoteStore";class Pj{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(h=>{i.enqueueAndForget(async()=>{Ha(this)&&(be(La,"Restarting streams for network reachability change."),await async function(g){const y=Me(g);y.Ea.add(4),await pu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await nf(y)}(this))})}),this.Ra=new Vj(i,o)}}async function nf(s){if(Ha(s))for(const e of s.da)await e(!0)}async function pu(s){for(const e of s.da)await e(!1)}function _1(s,e){const t=Me(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hy(t)?uy(t):dl(t).O_()&&cy(t,e))}function ly(s,e){const t=Me(s),i=dl(t);t.Ia.delete(e),i.O_()&&b1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ha(t)&&t.Ra.set("Unknown"))}function cy(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(s).Y_(e)}function b1(s,e){s.Va.Ue(e),dl(s).Z_(e)}function uy(s){s.Va=new DD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),dl(s).start(),s.Ra.ua()}function hy(s){return Ha(s)&&!dl(s).x_()&&s.Ia.size>0}function Ha(s){return Me(s).Ea.size===0}function E1(s){s.Va=void 0}async function Lj(s){s.Ra.set("Online")}async function Uj(s){s.Ia.forEach((e,t)=>{cy(s,e)})}async function qj(s,e){E1(s),hy(s)?(s.Ra.ha(e),uy(s)):s.Ra.set("Unknown")}async function Bj(s,e,t){if(s.Ra.set("Online"),e instanceof i1&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))}(s,e)}catch(i){be(La,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nd(s,i)}else if(e instanceof od?s.Va.Ze(e):e instanceof r1?s.Va.st(e):s.Va.tt(e),!t.isEqual(Oe.min()))try{const i=await g1(s.localStore);t.compareTo(i)>=0&&await function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(y);_&&c.Ia.set(y,_.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,y)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),b1(c,g);const w=new ji(_.target,g,y,_.sequenceNumber);cy(c,w)}),c.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(i){be(La,"Failed to raise snapshot:",i),await Nd(s,i)}}async function Nd(s,e,t){if(!ul(e))throw e;s.Ea.add(1),await pu(s),s.Ra.set("Offline"),t||(t=()=>g1(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{be(La,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await nf(s)})}function w1(s,e){return e().catch(t=>Nd(s,t,e))}async function sf(s){const e=Me(s),t=Fi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qg;for(;zj(e);)try{const o=await Tj(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Fj(e,o)}catch(o){await Nd(e,o)}T1(e)&&x1(e)}function zj(s){return Ha(s)&&s.Ta.length<10}function Fj(s,e){s.Ta.push(e);const t=Fi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function T1(s){return Ha(s)&&!Fi(s).x_()&&s.Ta.length>0}function x1(s){Fi(s).start()}async function Hj(s){Fi(s).ra()}async function Gj(s){const e=Fi(s);for(const t of s.Ta)e.ea(t.mutations)}async function $j(s,e,t){const i=s.Ta.shift(),o=ty.from(i,e,t);await w1(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await sf(s)}async function Yj(s,e){e&&Fi(s).X_&&await async function(i,o){if(function(h){return RD(h)&&h!==re.ABORTED}(o.code)){const c=i.Ta.shift();Fi(i).B_(),await w1(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o)),await sf(i)}}(s,e),T1(s)&&x1(s)}async function _E(s,e){const t=Me(s);t.asyncQueue.verifyOperationInProgress(),be(La,"RemoteStore received new credentials");const i=Ha(t);t.Ea.add(3),await pu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nf(t)}async function Qj(s,e){const t=Me(s);e?(t.Ea.delete(2),await nf(t)):e||(t.Ea.add(2),await pu(t),t.Ra.set("Unknown"))}function dl(s){return s.ma||(s.ma=function(t,i,o){const c=Me(t);return c.sa(),new jj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Xo:Lj.bind(null,s),t_:Uj.bind(null,s),r_:qj.bind(null,s),H_:Bj.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),hy(s)?uy(s):s.Ra.set("Unknown")):(await s.ma.stop(),E1(s))})),s.ma}function Fi(s){return s.fa||(s.fa=function(t,i,o){const c=Me(t);return c.sa(),new Oj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hj.bind(null,s),r_:Yj.bind(null,s),ta:Gj.bind(null,s),na:$j.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await sf(s)):(await s.fa.stop(),s.Ta.length>0&&(be(La,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const h=Date.now()+i,m=new dy(e,t,h,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(s,e){if(Fr("AsyncQueue",`${e}: ${s}`),ul(s))return new _e(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Nc(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.ga=new Et(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}}class el{constructor(e,t,i,o,c,h,m,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,c){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new el(e,t,Yo.emptySet(t),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xj{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),c=o.queries;o.queries=EE(),c.forEach((h,m)=>{for(const g of m.Sa)g.onError(i)})})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function EE(){return new Fa(s=>GT(s),Xd)}async function A1(s,e){const t=Me(s);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new Kj,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=fy(h,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&my(t)}async function S1(s,e){const t=Me(s),i=e.query;let o=3;const c=t.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Wj(s,e){const t=Me(s);let i=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&my(t)}function Zj(s,e,t){const i=Me(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function my(s){s.Ca.forEach(e=>{e.next()})}var mg,wE;(wE=mg||(mg={})).Ma="default",wE.Cache="cache";class N1{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new el(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class Jj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=$T(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new bE,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const T=o.get(_),R=Wd(this.query,w)?w:null,M=!!T&&this.mutatedKeys.has(T.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;T&&R?T.data.isEqual(R.data)?M!==C&&(i.track({type:3,doc:R}),k=!0):this.su(T,R)||(i.track({type:2,doc:R}),k=!0,(g&&this.eu(R,g)>0||y&&this.eu(R,y)<0)&&(m=!0)):!T&&R?(i.track({type:0,doc:R}),k=!0):T&&!R&&(i.track({type:1,doc:T}),k=!0,(g||y)&&(m=!0)),k&&(R?(h=h.add(R),c=C?c.add(_):c.delete(_)):(h=h.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),c=c.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((_,w)=>function(R,M){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:k})}};return C(R)-C(M)}(_.type,w.type)||this.eu(_.doc,w.doc)),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new el(this.query,e.tu,c,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new C1(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new R1(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const py="SyncEngine";class eO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tO{constructor(e){this.key=e,this.hu=!1}}class nO{constructor(e,t,i,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Fa(m=>GT(m),Xd),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Se.comparator),this.Au=new Map,this.Ru=new ry,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sO(s,e,t=!0){const i=k1(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await I1(i,e,t,!0),o}async function rO(s,e){const t=k1(s);await I1(t,e,!0,!1)}async function I1(s,e,t,i){const o=await xj(s.localStore,Xs(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await iO(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&_1(s.remoteStore,o),m}async function iO(s,e,t,i,o){s.pu=(w,T,R)=>async function(C,k,F,J){let se=k.view.ru(F);se.Cs&&(se=await mE(C.localStore,k.query,!1).then(({documents:D})=>k.view.ru(D,se)));const de=J&&J.targetChanges.get(k.targetId),le=J&&J.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(se,C.isPrimaryClient,de,le);return xE(C,k.targetId,ce.au),ce.snapshot}(s,w,T,R);const c=await mE(s.localStore,e,!0),h=new Jj(e,c.Qs),m=h.ru(c.documents),g=mu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),y=h.applyChanges(m,s.isPrimaryClient,g);xE(s,t,y.au);const _=new eO(e,t,h);return s.Tu.set(e,_),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function aO(s,e,t){const i=Me(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter(h=>!Xd(h,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await dg(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ly(i.remoteStore,o.targetId),pg(i,o.targetId)}).catch(cl)):(pg(i,o.targetId),await dg(i.localStore,o.targetId,!0))}async function oO(s,e){const t=Me(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ly(t.remoteStore,i.targetId))}async function lO(s,e,t){const i=pO(s);try{const o=await function(h,m){const g=Me(h),y=lt.now(),_=m.reduce((R,M)=>R.add(M.key),Qe());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Hr(),C=Qe();return g.Ns.getEntries(R,_).next(k=>{M=k,M.forEach((F,J)=>{J.isValidDocument()||(C=C.add(F))})}).next(()=>g.localDocuments.getOverlayedDocuments(R,M)).next(k=>{w=k;const F=[];for(const J of m){const se=TD(J,w.get(J.key).overlayedDocument);se!=null&&F.push(new Zi(J.key,se,PT(se.value.mapValue),as.exists(!0)))}return g.mutationQueue.addMutationBatch(R,y,F,m)}).next(k=>{T=k;const F=k.applyToLocalDocumentSet(w,C);return g.documentOverlayCache.saveOverlays(R,k.batchId,F)})}).then(()=>({batchId:T.batchId,changes:QT(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new Et(Ye)),y=y.insert(m,g),h.Vu[h.currentUser.toKey()]=y}(i,o.batchId,t),await gu(i,o.changes),await sf(i.remoteStore)}catch(o){const c=fy(o,"Failed to persist write");t.reject(c)}}async function D1(s,e){const t=Me(s);try{const i=await Ej(t.localStore,e);e.targetChanges.forEach((o,c)=>{const h=t.Au.get(c);h&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?nt(h.hu,14607):o.removedDocuments.size>0&&(nt(h.hu,42227),h.hu=!1))}),await gu(t,i,e)}catch(i){await cl(i)}}function TE(s,e,t){const i=Me(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach((c,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=Me(h);g.onlineState=m;let y=!1;g.queries.forEach((_,w)=>{for(const T of w.Sa)T.va(m)&&(y=!0)}),y&&my(g)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function cO(s,e,t){const i=Me(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let h=new Et(Se.comparator);h=h.insert(c,pn.newNoDocument(c,Oe.min()));const m=Qe().add(c),g=new ef(Oe.min(),new Map,new Et(Ye),h,m);await D1(i,g),i.du=i.du.remove(c),i.Au.delete(e),gy(i)}else await dg(i.localStore,e,!1).then(()=>pg(i,e,t)).catch(cl)}async function uO(s,e){const t=Me(s),i=e.batch.batchId;try{const o=await bj(t.localStore,e);O1(t,i,null),j1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await gu(t,o)}catch(o){await cl(o)}}async function hO(s,e,t){const i=Me(s);try{const o=await function(h,m){const g=Me(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next(w=>(nt(w!==null,37113),_=w.keys(),g.mutationQueue.removeMutationBatch(y,w))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>g.localDocuments.getDocuments(y,_))})}(i.localStore,e);O1(i,e,t),j1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await gu(i,o)}catch(o){await cl(o)}}function j1(s,e){(s.mu.get(e)||[]).forEach(t=>{t.resolve()}),s.mu.delete(e)}function O1(s,e,t){const i=Me(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function pg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(i=>{s.Ru.containsKey(i)||M1(s,i)})}function M1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(ly(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),gy(s))}function xE(s,e,t){for(const i of t)i instanceof R1?(s.Ru.addReference(i.key,e),dO(s,i)):i instanceof C1?(be(py,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||M1(s,i.key)):De(19791,{wu:i})}function dO(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(be(py,"New document in limbo: "+t),s.Eu.add(i),gy(s))}function gy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Se(pt.fromString(e)),i=s.fu.next();s.Au.set(i,new tO(t)),s.du=s.du.insert(t,i),_1(s.remoteStore,new ji(Xs(Kd(t.path)),i,"TargetPurposeLimboResolution",$d.ce))}}async function gu(s,e,t){const i=Me(s),o=[],c=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach((m,g)=>{h.push(i.pu(g,e,t).then(y=>{if((y||t)&&i.isPrimaryClient){const _=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=ay.As(g.targetId,y);c.push(_)}}))}),await Promise.all(h),i.Pu.H_(o),await async function(g,y){const _=Me(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ae.forEach(y,T=>ae.forEach(T.Es,R=>_.persistence.referenceDelegate.addReference(w,T.targetId,R)).next(()=>ae.forEach(T.ds,R=>_.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))}catch(w){if(!ul(w))throw w;be(oy,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const R=_.Ms.get(T),M=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(M);_.Ms=_.Ms.insert(T,C)}}}(i.localStore,c))}async function fO(s,e){const t=Me(s);if(!t.currentUser.isEqual(e)){be(py,"User change. New user:",e.toKey());const i=await p1(t.localStore,e);t.currentUser=e,function(c,h){c.mu.forEach(m=>{m.forEach(g=>{g.reject(new _e(re.CANCELLED,h))})}),c.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gu(t,i.Ls)}}function mO(s,e){const t=Me(s),i=t.Au.get(e);if(i&&i.hu)return Qe().add(i.key);{let o=Qe();const c=t.Iu.get(e);if(!c)return o;for(const h of c){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function k1(s){const e=Me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=D1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cO.bind(null,e),e.Pu.H_=Wj.bind(null,e.eventManager),e.Pu.yu=Zj.bind(null,e.eventManager),e}function pO(s){const e=Me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hO.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _j(this.persistence,new gj,e.initialUser,this.serializer)}Cu(e){return new m1(iy.mi,this.serializer)}Du(e){return new Sj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class gO extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof Sd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tj(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new m1(i=>Sd.mi(i,t),this.serializer)}}class gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fO.bind(null,this.syncEngine),await Qj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xj}()}createDatastore(e){const t=tf(e.databaseInfo.databaseId),i=function(c){return new Dj(c)}(e.databaseInfo);return function(c,h,m,g){return new kj(c,h,m,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,c,h,m){return new Pj(i,o,c,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>TE(this.syncEngine,t,0),function(){return yE.v()?new yE:new Nj}())}createSyncEngine(e,t){return function(o,c,h,m,g,y,_){const w=new nO(o,c,h,m,g,y);return _&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const i=Me(t);be(La,"RemoteStore shutting down."),i.Ea.add(5),await pu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gg.provider={build:()=>new gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="FirestoreClient";class yO{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,async h=>{be(Hi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(be(Hi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lp(s,e){s.asyncQueue.verifyOperationInProgress(),be(Hi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await p1(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function AE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await vO(s);be(Hi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(i=>_E(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>_E(e.remoteStore,o)),s._onlineComponents=e}async function vO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){be(Hi,"Using user provided OfflineComponentProvider");try{await Lp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),await Lp(s,new Rd)}}else be(Hi,"Using default OfflineComponentProvider"),await Lp(s,new gO(void 0));return s._offlineComponents}async function P1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(be(Hi,"Using user provided OnlineComponentProvider"),await AE(s,s._uninitializedComponentsProvider._online)):(be(Hi,"Using default OnlineComponentProvider"),await AE(s,new gg))),s._onlineComponents}function _O(s){return P1(s).then(e=>e.syncEngine)}async function yg(s){const e=await P1(s),t=e.eventManager;return t.onListen=sO.bind(null,e.syncEngine),t.onUnlisten=aO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oO.bind(null,e.syncEngine),t}function bO(s,e,t={}){const i=new Vi;return s.asyncQueue.enqueueAndForget(async()=>function(c,h,m,g,y){const _=new V1({next:T=>{_.Nu(),h.enqueueAndForget(()=>S1(c,w));const R=T.docs.has(m);!R&&T.fromCache?y.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&g&&g.source==="server"?y.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new N1(Kd(m.path),_,{includeMetadataChanges:!0,qa:!0});return A1(c,w)}(await yg(s),s.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="firestore.googleapis.com",NE=!0;class RE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U1,this.ssl=NE}else this.host=e.host,this.ssl=e.ssl??NE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JD)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L1(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SI;switch(i.type){case"firstParty":return new II(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=SE.get(t);i&&(be("ComponentProvider","Removing Datastore"),SE.delete(t),i.terminate())}(this),Promise.resolve()}}function EO(s,e,t,i={}){s=is(s,rf);const o=qa(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(Og(`https://${m}`),Mg("Firestore",!0)),c.host!==U1&&c.host!==m&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Oa(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=mn.MOCK_USER;else{y=jw(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new mn(w)}s._authCredentials=new NI(new AT(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ga(this.firestore,e,this._query)}}class At{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(du(t,At._jsonSchema))return new At(e,i||null,new Se(pt.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Bt("string",At._jsonSchemaVersion),referencePath:Bt("string")};class Pi extends Ga{constructor(e,t,i){super(e,t,Kd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Se(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function Zs(s,e,...t){if(s=zt(s),ST("collection","path",e),s instanceof rf){const i=pt.fromString(e,...t);return B0(i),new Pi(s,null,i)}{if(!(s instanceof At||s instanceof Pi))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(pt.fromString(e,...t));return B0(i),new Pi(s.firestore,null,i)}}function os(s,e,...t){if(s=zt(s),arguments.length===1&&(e=Yg.newId()),ST("doc","path",e),s instanceof rf){const i=pt.fromString(e,...t);return q0(i),new At(s,null,new Se(i))}{if(!(s instanceof At||s instanceof Pi))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(pt.fromString(e,...t));return q0(i),new At(s.firestore,s instanceof Pi?s.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="AsyncQueue";class IE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y1(this,"async_queue_retry"),this._c=()=>{const i=Pp();i&&be(CE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;be(CE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Fr("INTERNAL UNHANDLED ERROR: ",DE(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=dy.createAndSchedule(this,e,t,i,c=>this.hc(c));return this.tc.push(o),o}uc(){this.nc&&De(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(s){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1}(s,["next","error","complete"])}class Gi extends rf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new IE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IE(e),this._firestoreClient=void 0,await e}}}function wO(s,e){const t=typeof s=="object"?s:Pg(),i=typeof s=="string"?s:Ed,o=Bd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=Cw("firestore");c&&EO(o,...c)}return o}function yy(s){if(s._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||TO(s),s._firestoreClient}function TO(s){const e=s._freezeSettings(),t=function(o,c,h,m){return new YI(o,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,L1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new yO(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(un.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rs(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,rs._jsonSchema))return rs.fromBase64String(e.bytes)}}rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:Bt("string",rs._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(e){if(du(e,Js._jsonSchema))return new Js(e.latitude,e.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:Bt("string",Js._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new er(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:Bt("string",er._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^__.*__$/;class AO{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class q1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function B1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:s})}}class vy{constructor(e,t,i,o,c,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(B1(this.Ac)&&xO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SO{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||tf(e)}Cc(e,t,i,o=!1){return new vy({Ac:e,methodName:t,Dc:i,path:cn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(s){const e=s._freezeSettings(),t=tf(s._databaseId);return new SO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function z1(s,e,t,i,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,t,o);by("Data must be an object, but it was:",h,i);const m=F1(i,h);let g,y;if(c.merge)g=new Fn(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const _=[];for(const w of c.mergeFields){const T=vg(e,w,t);if(!h.contains(T))throw new _e(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);G1(_,T)||_.push(T)}g=new Fn(_),y=h.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,y=h.fieldTransforms;return new AO(new jn(m),g,y)}class cf extends of{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}class _y extends of{_toFieldTransform(e){return new _D(e.path,new Qc)}isEqual(e){return e instanceof _y}}function NO(s,e,t,i){const o=s.Cc(1,e,t);by("Data must be an object, but it was:",o,i);const c=[],h=jn.empty();Wi(i,(g,y)=>{const _=Ey(e,g,t);y=zt(y);const w=o.yc(_);if(y instanceof cf)c.push(_);else{const T=yu(y,w);T!=null&&(c.push(_),h.set(_,T))}});const m=new Fn(c);return new q1(h,m,o.fieldTransforms)}function RO(s,e,t,i,o,c){const h=s.Cc(1,e,t),m=[vg(e,i,t)],g=[o];if(c.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(vg(e,c[T])),g.push(c[T+1]);const y=[],_=jn.empty();for(let T=m.length-1;T>=0;--T)if(!G1(y,m[T])){const R=m[T];let M=g[T];M=zt(M);const C=h.yc(R);if(M instanceof cf)y.push(R);else{const k=yu(M,C);k!=null&&(y.push(R),_.set(R,k))}}const w=new Fn(y);return new q1(_,w,h.fieldTransforms)}function CO(s,e,t,i=!1){return yu(t,s.Cc(i?4:3,e))}function yu(s,e){if(H1(s=zt(s)))return by("Unsupported field value:",e,s),F1(s,e);if(s instanceof of)return function(i,o){if(!B1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const c=[];let h=0;for(const m of i){let g=yu(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}}(s,e)}return function(i,o){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gD(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=lt.fromDate(i);return{timestampValue:Ad(o.serializer,c)}}if(i instanceof lt){const c=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ad(o.serializer,c)}}if(i instanceof Js)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof rs)return{bytesValue:a1(o.serializer,i._byteString)};if(i instanceof At){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sy(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof er)return function(h,m){return{mapValue:{fields:{[kT]:{stringValue:VT},[wd]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Jg(m.serializer,y)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${Gd(i)}`)}(s,e)}function F1(s,e){const t={};return CT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(s,(i,o)=>{const c=yu(o,e.mc(i));c!=null&&(t[i]=c)}),{mapValue:{fields:t}}}function H1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof lt||s instanceof Js||s instanceof rs||s instanceof At||s instanceof of||s instanceof er)}function by(s,e,t){if(!H1(t)||!NT(t)){const i=Gd(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function vg(s,e,t){if((e=zt(e))instanceof af)return e._internalPath;if(typeof e=="string")return Ey(s,e);throw Cd("Field path arguments must be of type string or ",s,!1,void 0,t)}const IO=new RegExp("[~\\*/\\[\\]]");function Ey(s,e,t){if(e.search(IO)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new af(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Cd(s,e,t,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new _e(re.INVALID_ARGUMENT,m+s+g)}function G1(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DO extends $1{data(){return super.data()}}function uf(s,e){return typeof e=="string"?Ey(s,e):e instanceof af?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wy{}class Y1 extends wy{}function tl(s,e,...t){let i=[];e instanceof wy&&i.push(e),i=i.concat(t),function(c){const h=c.filter(g=>g instanceof Ty).length,m=c.filter(g=>g instanceof hf).length;if(h>1||h>0&&m>0)throw new _e(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class hf extends Y1{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new hf(e,t,i)}_apply(e){const t=this._parse(e);return Q1(e._query,t),new Ga(e.firestore,e.converter,ag(e._query,t))}_parse(e){const t=lf(e.firestore);return function(c,h,m,g,y,_,w){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ME(w,_);const M=[];for(const C of w)M.push(OE(g,c,C));T={arrayValue:{values:M}}}else T=OE(g,c,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ME(w,_),T=CO(m,h,w,_==="in"||_==="not-in");return qt.create(y,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _g(s,e,t){const i=e,o=uf("where",s);return hf._create(o,i,t)}class Ty extends wy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ty(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ws.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let h=o;const m=c.getFlattenedFilters();for(const g of m)Q1(h,g),h=ag(h,g)}(e._query,t),new Ga(e.firestore,e.converter,ag(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends Y1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=function(o,c,h){if(o.startAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(c,h)}(e._query,this._field,this._direction);return new Ga(e.firestore,e.converter,function(o,c){const h=o.explicitOrderBy.concat([c]);return new hl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Wc(s,e="asc"){const t=e,i=uf("orderBy",s);return xy._create(i,t)}function OE(s,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new _e(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HT(e)&&t.indexOf("/")!==-1)throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pt.fromString(t));if(!Se.isDocumentKey(i))throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return K0(s,new Se(i))}if(t instanceof At)return K0(s,t._key);throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(t)}.`)}function ME(s,e){if(!Array.isArray(s)||s.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q1(s,e){const t=function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OO{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wi(e,(o,c)=>{i[o]=this.convertValue(c,t)}),i}convertVectorValue(e){const t=e.fields?.[wd].arrayValue?.values?.map(i=>It(i.doubleValue));return new er(t)}convertGeoPoint(e){return new Js(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Qd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=qi(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);nt(d1(i),9688,{name:e});const o=new Gc(i.get(1),i.get(3)),c=new Se(i.popFirst(5));return o.isEqual(t)||Fr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class Cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ja extends $1{constructor(e,t,i,o,c,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ja._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",ja._jsonSchema={type:Bt("string",ja._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class ld extends ja{data(e={}){return super.data(e)}}class Qo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Cc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ld(this._firestore,this._userDataWriter,i.key,i,new Cc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new ld(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Cc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new ld(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Cc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:MO(m.type),doc:g,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(s){s=is(s,At);const e=is(s.firestore,Gi);return bO(yy(e),s._key).then(t=>Z1(e,s,t))}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:Bt("string",Qo._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class W1 extends OO{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function kO(s,e,t){s=is(s,At);const i=is(s.firestore,Gi),o=K1(s.converter,e);return pf(i,[z1(lf(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,as.none())])}function df(s,e,t,...i){s=is(s,At);const o=is(s.firestore,Gi),c=lf(o);let h;return h=typeof(e=zt(e))=="string"||e instanceof af?RO(c,"updateDoc",s._key,e,t,i):NO(c,"updateDoc",s._key,e),pf(o,[h.toMutation(s._key,as.exists(!0))])}function ff(s){return pf(is(s.firestore,Gi),[new ey(s._key,as.none())])}function mf(s,e){const t=is(s.firestore,Gi),i=os(s),o=K1(s.converter,e);return pf(t,[z1(lf(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,as.exists(!1))]).then(()=>i)}function Zc(s,...e){s=zt(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||jE(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(jE(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let c,h,m;if(s instanceof At)h=is(s.firestore,Gi),m=Kd(s._key.path),c={next:g=>{e[i]&&e[i](Z1(h,s,g))},error:e[i+1],complete:e[i+2]};else{const g=is(s,Ga);h=is(g.firestore,Gi),m=g._query;const y=new W1(h);c={next:_=>{e[i]&&e[i](new Qo(h,y,g,_))},error:e[i+1],complete:e[i+2]},jO(s._query)}return function(y,_,w,T){const R=new V1(T),M=new N1(_,R,w);return y.asyncQueue.enqueueAndForget(async()=>A1(await yg(y),M)),()=>{R.Nu(),y.asyncQueue.enqueueAndForget(async()=>S1(await yg(y),M))}}(yy(h),m,o,c)}function pf(s,e){return function(i,o){const c=new Vi;return i.asyncQueue.enqueueAndForget(async()=>lO(await _O(i),o,c)),c.promise}(yy(s),e)}function Z1(s,e,t){const i=t.docs.get(e._key),o=new W1(s);return new ja(s,o,e._key,i,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}function Up(){return new _y("serverTimestamp")}(function(e,t=!0){(function(o){ll=o})(Ba),Ma(new Li("firestore",(i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),m=new Gi(new RI(i.getProvider("auth-internal")),new DI(h,i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(y.options.projectId,_)}(h,o),h);return c={useFetchStreams:t,...c},m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ys(V0,P0,e),Ys(V0,P0,"esm2020")})();var VO="firebase",PO="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(VO,PO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebasestorage.googleapis.com",LO="storageBucket",UO=120*1e3,qO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends sr{constructor(e,t,i=0){super(qp(e),`Firebase Storage: ${t} (${qp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nr;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nr||(nr={}));function qp(s){return"storage/"+s}function BO(){const s="An unknown error occurred, please check the error payload for server response.";return new rr(nr.UNKNOWN,s)}function zO(){return new rr(nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FO(){return new rr(nr.CANCELED,"User canceled the upload/download.")}function HO(s){return new rr(nr.INVALID_URL,"Invalid URL '"+s+"'.")}function GO(s){return new rr(nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function kE(s){return new rr(nr.INVALID_ARGUMENT,s)}function ex(){return new rr(nr.APP_DELETED,"The Firebase app was deleted.")}function $O(s){return new rr(nr.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=_s.makeFromUrl(e,t)}catch{return new _s(e,"")}if(i.path==="")return i;throw GO(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function y(de){de.path_=decodeURIComponent(de.path)}const _="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${w}/${_}/b/${o}/o${T}`,"i"),M={bucket:1,path:3},C=t===J1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",F=new RegExp(`^https?://${C}/${o}/${k}`,"i"),se=[{regex:m,indices:g,postModify:c},{regex:R,indices:M,postModify:y},{regex:F,indices:{bucket:1,path:2},postModify:y}];for(let de=0;de<se.length;de++){const le=se[de],ce=le.regex.exec(e);if(ce){const D=ce[le.indices.bucket];let S=ce[le.indices.path];S||(S=""),i=new _s(D,S),le.postModify(i);break}}if(i==null)throw HO(e);return i}}class YO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(s,e,t){let i=1,o=null,c=null,h=!1,m=0;function g(){return m===2}let y=!1;function _(...k){y||(y=!0,e.apply(null,k))}function w(k){o=setTimeout(()=>{o=null,s(R,g())},k)}function T(){c&&clearTimeout(c)}function R(k,...F){if(y){T();return}if(k){T(),_.call(null,k,...F);return}if(g()||h){T(),_.call(null,k,...F);return}i<64&&(i*=2);let se;m===1?(m=2,se=0):se=(i+Math.random())*1e3,w(se)}let M=!1;function C(k){M||(M=!0,T(),!y&&(o!==null?(k||(m=2),clearTimeout(o),w(0)):k||(m=1)))}return w(0),c=setTimeout(()=>{h=!0,C(!0)},t),C}function KO(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(s){return s!==void 0}function VE(s,e,t,i){if(i<e)throw kE(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw kE(`Invalid value for '${s}'. Expected ${t} or less.`)}function WO(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Id;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Id||(Id={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,i,o,c,h,m,g,y,_,w,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,C)=>{this.resolve_=M,this.reject_=C,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Kh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const m=c.getErrorCode()===Id.NO_ERROR,g=c.getStatus();if(!m||ZO(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Id.ABORT;i(!1,new Kh(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Kh(y,c))})},t=(i,o)=>{const c=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());XO(g)?c(g):c()}catch(g){h(g)}else if(m!==null){const g=BO();g.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,g)):h(g)}else if(o.canceled){const g=this.appDelete_?ex():FO();h(g)}else{const g=zO();h(g)}};this.canceled_?t(!1,new Kh(!1,null,!0)):this.backoffId_=QO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function eM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function tM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function sM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function rM(s,e,t,i,o,c,h=!0,m=!1){const g=WO(s.urlParams),y=s.url+g,_=Object.assign({},s.headers);return nM(_,e),eM(_,t),tM(_,c),sM(_,i),new JO(y,s.method,_,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function aM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this._service=e,t instanceof _s?this._location=t:this._location=_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dd(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aM(this._location.path)}get storage(){return this._service}get parent(){const e=iM(this._location.path);if(e===null)return null;const t=new _s(this._location.bucket,e);return new Dd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $O(e)}}function PE(s,e){const t=e?.[LO];return t==null?null:_s.makeFromBucketSpec(t,s)}function oM(s,e,t,i={}){s.host=`${e}:${t}`;const o=qa(e);o&&(Og(`https://${s.host}/b`),Mg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=i;c&&(s._overrideAuthToken=typeof c=="string"?c:jw(c,s.app.options.projectId))}class lM{constructor(e,t,i,o,c,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=J1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UO,this._maxUploadRetryTime=qO,this._requests=new Set,o!=null?this._bucket=_s.makeFromBucketSpec(o,this._host):this._bucket=PE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_s.makeFromBucketSpec(this._url,e):this._bucket=PE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dd(this,e)}_makeRequest(e,t,i,o,c=!0){if(this._deleted)return new YO(ex());{const h=rM(e,this._appId,i,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const LE="@firebase/storage",UE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="storage";function cM(s=Pg(),e){s=zt(s);const i=Bd(s,tx).getImmediate({identifier:e}),o=Cw("storage");return o&&uM(i,...o),i}function uM(s,e,t,i={}){oM(s,e,t,i)}function hM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new lM(t,i,o,e,Ba)}function dM(){Ma(new Li(tx,hM,"PUBLIC").setMultipleInstances(!0)),Ys(LE,UE,""),Ys(LE,UE,"esm2020")}dM();const bg={apiKey:"AIzaSyDZy64P-GPs86jrrKs3ka-wn25LEZ1Iplc",authDomain:"sems-e875a.firebaseapp.com",projectId:"sems-e875a",storageBucket:"sems-e875a.firebasestorage.app",messagingSenderId:"573564947435",appId:"1:573564947435:web:0b71d6cbfd4e95390267a"},fM=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],qE=fM.filter(s=>!bg[s]||bg[s]===`your-${s.toLowerCase().replace(/([A-Z])/g,"-$1")}-here`);qE.length>0&&(console.error("Missing Firebase configuration keys:",qE),console.error("Please update src/lib/firebase.ts with your actual Firebase configuration"));const Ay=kw(bg),Xh=xI(Ay),Dt=wO(Ay);cM(Ay);const nx=B.createContext(void 0),yn=()=>{const s=B.useContext(nx);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},mM=({children:s})=>{const[e,t]=B.useState(null),[i,o]=B.useState(null),[c,h]=B.useState(!0),m=async(w,T)=>{try{await cC(Xh,w,T)}catch(R){throw console.error("Login error:",R),new Error(R.message||"Failed to log in. Please try again")}},g=async(w,T,R)=>{try{console.log("Starting user registration...",{email:w,userData:R});const{user:M}=await lC(Xh,w,T);console.log("User account created:",M.uid);const C={id:M.uid,email:M.email,name:R.name||"",role:R.role||"employee",department:R.department||"",position:R.position||"",phone:R.phone||"",createdAt:new Date,updatedAt:new Date};console.log("Creating user profile document...",C),await kO(os(Dt,"users",M.uid),C),console.log("User profile created successfully")}catch(M){throw console.error("Registration error:",M),M.code==="auth/email-already-in-use"?new Error("An account with this email already exists"):M.code==="auth/weak-password"?new Error("Password should be at least 6 characters"):M.code==="auth/invalid-email"?new Error("Invalid email address"):M.code==="permission-denied"?new Error("Permission denied. Please check Firestore security rules"):M.code==="unavailable"?new Error("Firebase service is currently unavailable. Please try again later"):new Error(M.message||"Failed to create account. Please try again")}},y=async()=>{try{await fC(Xh)}catch(w){throw console.error("Logout error:",w),new Error(w.message||"Failed to log out. Please try again")}};B.useEffect(()=>dC(Xh,async T=>{if(t(T),T){const R=await X1(os(Dt,"users",T.uid));R.exists()&&o(R.data())}else o(null);h(!1)}),[]);const _={currentUser:e,userProfile:i,login:m,register:g,logout:y,loading:c};return f.jsx(nx.Provider,{value:_,children:!c&&s})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gM=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),BE=s=>{const e=gM(s);return e.charAt(0).toUpperCase()+e.slice(1)},sx=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),yM=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=B.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:h,...m},g)=>B.createElement("svg",{ref:g,...vM,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:sx("lucide",o),...!c&&!yM(m)&&{"aria-hidden":"true"},...m},[...h.map(([y,_])=>B.createElement(y,_)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(s,e)=>{const t=B.forwardRef(({className:i,...o},c)=>B.createElement(_M,{ref:c,iconNode:e,className:sx(`lucide-${pM(BE(s))}`,`lucide-${s}`,i),...o}));return t.displayName=BE(s),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],EM=Fe("arrow-right",bM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],TM=Fe("bell",wM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],rx=Fe("briefcase",xM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ua=Fe("building-2",AM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$i=Fe("calendar",SM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zE=Fe("chart-column",NM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ix=Fe("circle-alert",RM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jc=Fe("circle-check-big",CM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],FE=Fe("circle-plus",IM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Eg=Fe("circle-x",DM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gf=Fe("clock",jM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],MM=Fe("copy",OM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],VM=Fe("dollar-sign",kM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wg=Fe("eye-off",PM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eu=Fe("eye",LM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ax=Fe("file-text",UM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],yf=Fe("graduation-cap",qM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],jd=Fe("key",BM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],FM=Fe("layout-dashboard",zM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Tg=Fe("lock",HM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$M=Fe("log-out",GM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vf=Fe("mail",YM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ox=Fe("map-pin",QM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],XM=Fe("menu",KM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Sy=Fe("phone",WM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nl=Fe("plus",ZM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e4=Fe("refresh-cw",JM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n4=Fe("save",t4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lx=Fe("search",s4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Od=Fe("settings",r4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],sl=Fe("shield",i4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ny=Fe("square-pen",a4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_f=Fe("trash-2",o4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],HE=Fe("trending-up",l4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],u4=Fe("triangle-alert",c4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tu=Fe("user",h4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yi=Fe("users",d4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cx=Fe("x",f4),m4=()=>{const{userProfile:s,logout:e}=yn(),t=ru(),i=async()=>{try{await e(),t("/login")}catch(o){console.error("Failed to logout:",o)}};return f.jsxs("div",{className:"navbar bg-base-100 shadow-lg border-b border-base-200",children:[f.jsxs("div",{className:"navbar-start",children:[f.jsxs("div",{className:"dropdown",children:[f.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost lg:hidden",children:f.jsx(XM,{className:"h-5 w-5"})}),f.jsxs("ul",{tabIndex:0,className:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52",children:[f.jsx("li",{children:f.jsx(Ct,{to:"/dashboard",children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/employees",children:"Employees"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/leave-requests",children:"Leave Requests"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/departments",children:"Departments"})})]})]}),f.jsxs(Ct,{to:"/dashboard",className:"btn btn-ghost text-xl",children:[f.jsx(yf,{className:"h-6 w-6 text-primary"}),f.jsx("span",{className:"font-bold text-primary",children:"School EMS"})]})]}),f.jsx("div",{className:"navbar-center hidden lg:flex",children:f.jsxs("ul",{className:"menu menu-horizontal px-1",children:[f.jsx("li",{children:f.jsx(Ct,{to:"/dashboard",className:"btn btn-ghost",children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/employees",className:"btn btn-ghost",children:"Employees"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/leave-requests",className:"btn btn-ghost",children:"Leave Requests"})}),f.jsx("li",{children:f.jsx(Ct,{to:"/departments",className:"btn btn-ghost",children:"Departments"})})]})}),f.jsx("div",{className:"navbar-end",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{className:"btn btn-ghost btn-circle",children:f.jsxs("div",{className:"indicator",children:[f.jsx(TM,{className:"h-5 w-5"}),f.jsx("span",{className:"badge badge-xs badge-primary indicator-item"})]})}),f.jsxs("div",{className:"dropdown dropdown-end",children:[f.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-circle avatar",children:f.jsx("div",{className:"w-10 rounded-full",children:f.jsx("div",{className:"avatar placeholder",children:f.jsx("div",{className:"bg-primary text-primary-content rounded-full w-10",children:f.jsx("span",{className:"text-sm",children:s?.name?.charAt(0)||"U"})})})})}),f.jsxs("ul",{tabIndex:0,className:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52",children:[f.jsxs("li",{className:"menu-title",children:[f.jsx("span",{children:s?.name}),f.jsx("span",{className:"text-xs opacity-60",children:s?.role})]}),f.jsx("li",{children:f.jsxs(Ct,{to:"/profile",children:[f.jsx(tu,{className:"h-4 w-4"}),"Profile"]})}),f.jsx("li",{children:f.jsxs(Ct,{to:"/settings",children:[f.jsx(Od,{className:"h-4 w-4"}),"Settings"]})}),f.jsx("li",{children:f.jsxs("button",{onClick:i,children:[f.jsx($M,{className:"h-4 w-4"}),"Logout"]})})]})]})]})})]})},p4=()=>{const s=Gr(),{userProfile:e}=yn(),i=[{path:"/dashboard",icon:FM,label:"Dashboard"},{path:"/employees",icon:Yi,label:"Employees",adminOnly:!1},{path:"/leave-requests",icon:$i,label:"Leave Requests"},{path:"/departments",icon:Ua,label:"Departments"},{path:"/admin",icon:Od,label:"Administration",adminOnly:!0},{path:"/reports",icon:ax,label:"Reports",adminOnly:!0},{path:"/profile",icon:tu,label:"Profile"}].filter(o=>!o.adminOnly||e?.role==="admin"||e?.role==="manager");return f.jsxs("div",{className:"drawer-side",children:[f.jsx("label",{htmlFor:"drawer-toggle",className:"drawer-overlay"}),f.jsx("aside",{className:"w-64 min-h-full bg-base-200",children:f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:"avatar",children:f.jsx("div",{className:"w-16 rounded-full bg-primary",children:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("span",{className:"text-2xl text-primary-content font-bold",children:e?.name?.charAt(0)||"U"})})})}),f.jsx("h3",{className:"font-semibold mt-2",children:e?.name}),f.jsx("p",{className:"text-sm opacity-60 capitalize",children:e?.role})]}),f.jsx("ul",{className:"menu p-0 space-y-2",children:i.map(o=>{const c=o.icon,h=s.pathname===o.path;return f.jsx("li",{children:f.jsxs(Ct,{to:o.path,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${h?"bg-primary text-primary-content":"hover:bg-base-300"}`,children:[f.jsx(c,{className:"h-5 w-5"}),f.jsx("span",{children:o.label})]})},o.path)})})]})})]})},g4=()=>f.jsxs("div",{className:"drawer lg:drawer-open",children:[f.jsx("input",{id:"drawer-toggle",type:"checkbox",className:"drawer-toggle"}),f.jsxs("div",{className:"drawer-content flex flex-col",children:[f.jsx(m4,{}),f.jsx("main",{className:"flex-1 p-6 bg-base-100",children:f.jsx(KS,{})})]}),f.jsx(p4,{})]}),y4=({children:s,requiredRole:e})=>{const{currentUser:t,userProfile:i}=yn();return t?e&&i?.role!==e&&i?.role!=="admin"?f.jsx(hd,{to:"/dashboard",replace:!0}):f.jsx(f.Fragment,{children:s}):f.jsx(hd,{to:"/login",replace:!0})};var vu=s=>s.type==="checkbox",Da=s=>s instanceof Date,xn=s=>s==null;const ux=s=>typeof s=="object";var jt=s=>!xn(s)&&!Array.isArray(s)&&ux(s)&&!Da(s),v4=s=>jt(s)&&s.target?vu(s.target)?s.target.checked:s.target.value:s,_4=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,b4=(s,e)=>s.has(_4(e)),E4=s=>{const e=s.constructor&&s.constructor.prototype;return jt(e)&&e.hasOwnProperty("isPrototypeOf")},Ry=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function en(s){let e;const t=Array.isArray(s),i=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)e=new Date(s);else if(!(Ry&&(s instanceof Blob||i))&&(t||jt(s)))if(e=t?[]:Object.create(Object.getPrototypeOf(s)),!t&&!E4(s))e=s;else for(const o in s)s.hasOwnProperty(o)&&(e[o]=en(s[o]));else return s;return e}var bf=s=>/^\w*$/.test(s),Ut=s=>s===void 0,Cy=s=>Array.isArray(s)?s.filter(Boolean):[],Iy=s=>Cy(s.replace(/["|']|\]/g,"").split(/\.|\[/)),Te=(s,e,t)=>{if(!e||!jt(s))return t;const i=(bf(e)?[e]:Iy(e)).reduce((o,c)=>xn(o)?o:o[c],s);return Ut(i)||i===s?Ut(s[e])?t:s[e]:i},Gs=s=>typeof s=="boolean",vt=(s,e,t)=>{let i=-1;const o=bf(e)?[e]:Iy(e),c=o.length,h=c-1;for(;++i<c;){const m=o[i];let g=t;if(i!==h){const y=s[m];g=jt(y)||Array.isArray(y)?y:isNaN(+o[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;s[m]=g,s=s[m]}};const GE={BLUR:"blur",FOCUS_OUT:"focusout"},gs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},kr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},w4=Tn.createContext(null);w4.displayName="HookFormContext";var T4=(s,e,t,i=!0)=>{const o={defaultValues:e._defaultValues};for(const c in s)Object.defineProperty(o,c,{get:()=>{const h=c;return e._proxyFormState[h]!==gs.all&&(e._proxyFormState[h]=!i||gs.all),s[h]}});return o};const x4=typeof window<"u"?Tn.useLayoutEffect:Tn.useEffect;var $s=s=>typeof s=="string",A4=(s,e,t,i,o)=>$s(s)?(i&&e.watch.add(s),Te(t,s,o)):Array.isArray(s)?s.map(c=>(i&&e.watch.add(c),Te(t,c))):(i&&(e.watchAll=!0),t),xg=s=>xn(s)||!ux(s);function Di(s,e,t=new WeakSet){if(xg(s)||xg(e))return s===e;if(Da(s)&&Da(e))return s.getTime()===e.getTime();const i=Object.keys(s),o=Object.keys(e);if(i.length!==o.length)return!1;if(t.has(s)||t.has(e))return!0;t.add(s),t.add(e);for(const c of i){const h=s[c];if(!o.includes(c))return!1;if(c!=="ref"){const m=e[c];if(Da(h)&&Da(m)||jt(h)&&jt(m)||Array.isArray(h)&&Array.isArray(m)?!Di(h,m,t):h!==m)return!1}}return!0}var S4=(s,e,t,i,o)=>e?{...t[s],types:{...t[s]&&t[s].types?t[s].types:{},[i]:o||!0}}:{},Vc=s=>Array.isArray(s)?s:[s],$E=()=>{let s=[];return{get observers(){return s},next:o=>{for(const c of s)c.next&&c.next(o)},subscribe:o=>(s.push(o),{unsubscribe:()=>{s=s.filter(c=>c!==o)}}),unsubscribe:()=>{s=[]}}},In=s=>jt(s)&&!Object.keys(s).length,Dy=s=>s.type==="file",ys=s=>typeof s=="function",Md=s=>{if(!Ry)return!1;const e=s?s.ownerDocument:0;return s instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},hx=s=>s.type==="select-multiple",jy=s=>s.type==="radio",N4=s=>jy(s)||vu(s),Bp=s=>Md(s)&&s.isConnected;function R4(s,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)s=Ut(s)?i++:s[e[i++]];return s}function C4(s){for(const e in s)if(s.hasOwnProperty(e)&&!Ut(s[e]))return!1;return!0}function Pt(s,e){const t=Array.isArray(e)?e:bf(e)?[e]:Iy(e),i=t.length===1?s:R4(s,t),o=t.length-1,c=t[o];return i&&delete i[c],o!==0&&(jt(i)&&In(i)||Array.isArray(i)&&C4(i))&&Pt(s,t.slice(0,-1)),s}var dx=s=>{for(const e in s)if(ys(s[e]))return!0;return!1};function kd(s,e={}){const t=Array.isArray(s);if(jt(s)||t)for(const i in s)Array.isArray(s[i])||jt(s[i])&&!dx(s[i])?(e[i]=Array.isArray(s[i])?[]:{},kd(s[i],e[i])):xn(s[i])||(e[i]=!0);return e}function fx(s,e,t){const i=Array.isArray(s);if(jt(s)||i)for(const o in s)Array.isArray(s[o])||jt(s[o])&&!dx(s[o])?Ut(e)||xg(t[o])?t[o]=Array.isArray(s[o])?kd(s[o],[]):{...kd(s[o])}:fx(s[o],xn(e)?{}:e[o],t[o]):t[o]=!Di(s[o],e[o]);return t}var bc=(s,e)=>fx(s,e,kd(e));const YE={value:!1,isValid:!1},QE={value:!0,isValid:!0};var mx=s=>{if(Array.isArray(s)){if(s.length>1){const e=s.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!Ut(s[0].attributes.value)?Ut(s[0].value)||s[0].value===""?QE:{value:s[0].value,isValid:!0}:QE:YE}return YE},px=(s,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>Ut(s)?s:e?s===""?NaN:s&&+s:t&&$s(s)?new Date(s):i?i(s):s;const KE={isValid:!1,value:null};var gx=s=>Array.isArray(s)?s.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,KE):KE;function XE(s){const e=s.ref;return Dy(e)?e.files:jy(e)?gx(s.refs).value:hx(e)?[...e.selectedOptions].map(({value:t})=>t):vu(e)?mx(s.refs).value:px(Ut(e.value)?s.ref.value:e.value,s)}var I4=(s,e,t,i)=>{const o={};for(const c of s){const h=Te(e,c);h&&vt(o,c,h._f)}return{criteriaMode:t,names:[...s],fields:o,shouldUseNativeValidation:i}},Vd=s=>s instanceof RegExp,Ec=s=>Ut(s)?s:Vd(s)?s.source:jt(s)?Vd(s.value)?s.value.source:s.value:s,WE=s=>({isOnSubmit:!s||s===gs.onSubmit,isOnBlur:s===gs.onBlur,isOnChange:s===gs.onChange,isOnAll:s===gs.all,isOnTouch:s===gs.onTouched});const ZE="AsyncFunction";var D4=s=>!!s&&!!s.validate&&!!(ys(s.validate)&&s.validate.constructor.name===ZE||jt(s.validate)&&Object.values(s.validate).find(e=>e.constructor.name===ZE)),j4=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),JE=(s,e,t)=>!t&&(e.watchAll||e.watch.has(s)||[...e.watch].some(i=>s.startsWith(i)&&/^\.\w+/.test(s.slice(i.length))));const Pc=(s,e,t,i)=>{for(const o of t||Object.keys(s)){const c=Te(s,o);if(c){const{_f:h,...m}=c;if(h){if(h.refs&&h.refs[0]&&e(h.refs[0],o)&&!i)return!0;if(h.ref&&e(h.ref,h.name)&&!i)return!0;if(Pc(m,e))break}else if(jt(m)&&Pc(m,e))break}}};function ew(s,e,t){const i=Te(s,t);if(i||bf(t))return{error:i,name:t};const o=t.split(".");for(;o.length;){const c=o.join("."),h=Te(e,c),m=Te(s,c);if(h&&!Array.isArray(h)&&t!==c)return{name:t};if(m&&m.type)return{name:c,error:m};if(m&&m.root&&m.root.type)return{name:`${c}.root`,error:m.root};o.pop()}return{name:t}}var O4=(s,e,t,i)=>{t(s);const{name:o,...c}=s;return In(c)||Object.keys(c).length>=Object.keys(e).length||Object.keys(c).find(h=>e[h]===(!i||gs.all))},M4=(s,e,t)=>!s||!e||s===e||Vc(s).some(i=>i&&(t?i===e:i.startsWith(e)||e.startsWith(i))),k4=(s,e,t,i,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(e||s):(t?i.isOnBlur:o.isOnBlur)?!s:(t?i.isOnChange:o.isOnChange)?s:!0,V4=(s,e)=>!Cy(Te(s,e)).length&&Pt(s,e),P4=(s,e,t)=>{const i=Vc(Te(s,t));return vt(i,"root",e[t]),vt(s,t,i),s},cd=s=>$s(s);function tw(s,e,t="validate"){if(cd(s)||Array.isArray(s)&&s.every(cd)||Gs(s)&&!s)return{type:t,message:cd(s)?s:"",ref:e}}var Po=s=>jt(s)&&!Vd(s)?s:{value:s,message:""},nw=async(s,e,t,i,o,c)=>{const{ref:h,refs:m,required:g,maxLength:y,minLength:_,min:w,max:T,pattern:R,validate:M,name:C,valueAsNumber:k,mount:F}=s._f,J=Te(t,C);if(!F||e.has(C))return{};const se=m?m[0]:h,de=L=>{o&&se.reportValidity&&(se.setCustomValidity(Gs(L)?"":L||""),se.reportValidity())},le={},ce=jy(h),D=vu(h),S=ce||D,I=(k||Dy(h))&&Ut(h.value)&&Ut(J)||Md(h)&&h.value===""||J===""||Array.isArray(J)&&!J.length,j=S4.bind(null,C,i,le),U=(L,N,Ve,Le=kr.maxLength,W=kr.minLength)=>{const ue=L?N:Ve;le[C]={type:L?Le:W,message:ue,ref:h,...j(L?Le:W,ue)}};if(c?!Array.isArray(J)||!J.length:g&&(!S&&(I||xn(J))||Gs(J)&&!J||D&&!mx(m).isValid||ce&&!gx(m).isValid)){const{value:L,message:N}=cd(g)?{value:!!g,message:g}:Po(g);if(L&&(le[C]={type:kr.required,message:N,ref:se,...j(kr.required,N)},!i))return de(N),le}if(!I&&(!xn(w)||!xn(T))){let L,N;const Ve=Po(T),Le=Po(w);if(!xn(J)&&!isNaN(J)){const W=h.valueAsNumber||J&&+J;xn(Ve.value)||(L=W>Ve.value),xn(Le.value)||(N=W<Le.value)}else{const W=h.valueAsDate||new Date(J),ue=P=>new Date(new Date().toDateString()+" "+P),we=h.type=="time",Ue=h.type=="week";$s(Ve.value)&&J&&(L=we?ue(J)>ue(Ve.value):Ue?J>Ve.value:W>new Date(Ve.value)),$s(Le.value)&&J&&(N=we?ue(J)<ue(Le.value):Ue?J<Le.value:W<new Date(Le.value))}if((L||N)&&(U(!!L,Ve.message,Le.message,kr.max,kr.min),!i))return de(le[C].message),le}if((y||_)&&!I&&($s(J)||c&&Array.isArray(J))){const L=Po(y),N=Po(_),Ve=!xn(L.value)&&J.length>+L.value,Le=!xn(N.value)&&J.length<+N.value;if((Ve||Le)&&(U(Ve,L.message,N.message),!i))return de(le[C].message),le}if(R&&!I&&$s(J)){const{value:L,message:N}=Po(R);if(Vd(L)&&!J.match(L)&&(le[C]={type:kr.pattern,message:N,ref:h,...j(kr.pattern,N)},!i))return de(N),le}if(M){if(ys(M)){const L=await M(J,t),N=tw(L,se);if(N&&(le[C]={...N,...j(kr.validate,N.message)},!i))return de(N.message),le}else if(jt(M)){let L={};for(const N in M){if(!In(L)&&!i)break;const Ve=tw(await M[N](J,t),se,N);Ve&&(L={...Ve,...j(N,Ve.message)},de(Ve.message),i&&(le[C]=L))}if(!In(L)&&(le[C]={ref:se,...L},!i))return le}}return de(!0),le};const L4={mode:gs.onSubmit,reValidateMode:gs.onChange,shouldFocusError:!0};function U4(s={}){let e={...L4,...s},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ys(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},o=jt(e.defaultValues)||jt(e.values)?en(e.defaultValues||e.values)||{}:{},c=e.shouldUnregister?{}:en(o),h={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,y=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let w={..._};const T={array:$E(),state:$E()},R=e.criteriaMode===gs.all,M=V=>Q=>{clearTimeout(y),y=setTimeout(V,Q)},C=async V=>{if(!e.disabled&&(_.isValid||w.isValid||V)){const Q=e.resolver?In((await D()).errors):await I(i,!0);Q!==t.isValid&&T.state.next({isValid:Q})}},k=(V,Q)=>{!e.disabled&&(_.isValidating||_.validatingFields||w.isValidating||w.validatingFields)&&((V||Array.from(m.mount)).forEach(ee=>{ee&&(Q?vt(t.validatingFields,ee,Q):Pt(t.validatingFields,ee))}),T.state.next({validatingFields:t.validatingFields,isValidating:!In(t.validatingFields)}))},F=(V,Q=[],ee,ye,me=!0,he=!0)=>{if(ye&&ee&&!e.disabled){if(h.action=!0,he&&Array.isArray(Te(i,V))){const ge=ee(Te(i,V),ye.argA,ye.argB);me&&vt(i,V,ge)}if(he&&Array.isArray(Te(t.errors,V))){const ge=ee(Te(t.errors,V),ye.argA,ye.argB);me&&vt(t.errors,V,ge),V4(t.errors,V)}if((_.touchedFields||w.touchedFields)&&he&&Array.isArray(Te(t.touchedFields,V))){const ge=ee(Te(t.touchedFields,V),ye.argA,ye.argB);me&&vt(t.touchedFields,V,ge)}(_.dirtyFields||w.dirtyFields)&&(t.dirtyFields=bc(o,c)),T.state.next({name:V,isDirty:U(V,Q),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else vt(c,V,Q)},J=(V,Q)=>{vt(t.errors,V,Q),T.state.next({errors:t.errors})},se=V=>{t.errors=V,T.state.next({errors:t.errors,isValid:!1})},de=(V,Q,ee,ye)=>{const me=Te(i,V);if(me){const he=Te(c,V,Ut(ee)?Te(o,V):ee);Ut(he)||ye&&ye.defaultChecked||Q?vt(c,V,Q?he:XE(me._f)):Ve(V,he),h.mount&&C()}},le=(V,Q,ee,ye,me)=>{let he=!1,ge=!1;const xe={name:V};if(!e.disabled){if(!ee||ye){(_.isDirty||w.isDirty)&&(ge=t.isDirty,t.isDirty=xe.isDirty=U(),he=ge!==xe.isDirty);const qe=Di(Te(o,V),Q);ge=!!Te(t.dirtyFields,V),qe?Pt(t.dirtyFields,V):vt(t.dirtyFields,V,!0),xe.dirtyFields=t.dirtyFields,he=he||(_.dirtyFields||w.dirtyFields)&&ge!==!qe}if(ee){const qe=Te(t.touchedFields,V);qe||(vt(t.touchedFields,V,ee),xe.touchedFields=t.touchedFields,he=he||(_.touchedFields||w.touchedFields)&&qe!==ee)}he&&me&&T.state.next(xe)}return he?xe:{}},ce=(V,Q,ee,ye)=>{const me=Te(t.errors,V),he=(_.isValid||w.isValid)&&Gs(Q)&&t.isValid!==Q;if(e.delayError&&ee?(g=M(()=>J(V,ee)),g(e.delayError)):(clearTimeout(y),g=null,ee?vt(t.errors,V,ee):Pt(t.errors,V)),(ee?!Di(me,ee):me)||!In(ye)||he){const ge={...ye,...he&&Gs(Q)?{isValid:Q}:{},errors:t.errors,name:V};t={...t,...ge},T.state.next(ge)}},D=async V=>{k(V,!0);const Q=await e.resolver(c,e.context,I4(V||m.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return k(V),Q},S=async V=>{const{errors:Q}=await D(V);if(V)for(const ee of V){const ye=Te(Q,ee);ye?vt(t.errors,ee,ye):Pt(t.errors,ee)}else t.errors=Q;return Q},I=async(V,Q,ee={valid:!0})=>{for(const ye in V){const me=V[ye];if(me){const{_f:he,...ge}=me;if(he){const xe=m.array.has(he.name),qe=me._f&&D4(me._f);qe&&_.validatingFields&&k([ye],!0);const rt=await nw(me,m.disabled,c,R,e.shouldUseNativeValidation&&!Q,xe);if(qe&&_.validatingFields&&k([ye]),rt[he.name]&&(ee.valid=!1,Q))break;!Q&&(Te(rt,he.name)?xe?P4(t.errors,rt,he.name):vt(t.errors,he.name,rt[he.name]):Pt(t.errors,he.name))}!In(ge)&&await I(ge,Q,ee)}}return ee.valid},j=()=>{for(const V of m.unMount){const Q=Te(i,V);Q&&(Q._f.refs?Q._f.refs.every(ee=>!Bp(ee)):!Bp(Q._f.ref))&&wt(V)}m.unMount=new Set},U=(V,Q)=>!e.disabled&&(V&&Q&&vt(c,V,Q),!Di(P(),o)),L=(V,Q,ee)=>A4(V,m,{...h.mount?c:Ut(Q)?o:$s(V)?{[V]:Q}:Q},ee,Q),N=V=>Cy(Te(h.mount?c:o,V,e.shouldUnregister?Te(o,V,[]):[])),Ve=(V,Q,ee={})=>{const ye=Te(i,V);let me=Q;if(ye){const he=ye._f;he&&(!he.disabled&&vt(c,V,px(Q,he)),me=Md(he.ref)&&xn(Q)?"":Q,hx(he.ref)?[...he.ref.options].forEach(ge=>ge.selected=me.includes(ge.value)):he.refs?vu(he.ref)?he.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(me)?ge.checked=!!me.find(xe=>xe===ge.value):ge.checked=me===ge.value||!!me)}):he.refs.forEach(ge=>ge.checked=ge.value===me):Dy(he.ref)?he.ref.value="":(he.ref.value=me,he.ref.type||T.state.next({name:V,values:en(c)})))}(ee.shouldDirty||ee.shouldTouch)&&le(V,me,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&Ue(V)},Le=(V,Q,ee)=>{for(const ye in Q){if(!Q.hasOwnProperty(ye))return;const me=Q[ye],he=V+"."+ye,ge=Te(i,he);(m.array.has(V)||jt(me)||ge&&!ge._f)&&!Da(me)?Le(he,me,ee):Ve(he,me,ee)}},W=(V,Q,ee={})=>{const ye=Te(i,V),me=m.array.has(V),he=en(Q);vt(c,V,he),me?(T.array.next({name:V,values:en(c)}),(_.isDirty||_.dirtyFields||w.isDirty||w.dirtyFields)&&ee.shouldDirty&&T.state.next({name:V,dirtyFields:bc(o,c),isDirty:U(V,he)})):ye&&!ye._f&&!xn(he)?Le(V,he,ee):Ve(V,he,ee),JE(V,m)&&T.state.next({...t,name:V}),T.state.next({name:h.mount?V:void 0,values:en(c)})},ue=async V=>{h.mount=!0;const Q=V.target;let ee=Q.name,ye=!0;const me=Te(i,ee),he=qe=>{ye=Number.isNaN(qe)||Da(qe)&&isNaN(qe.getTime())||Di(qe,Te(c,ee,qe))},ge=WE(e.mode),xe=WE(e.reValidateMode);if(me){let qe,rt;const ar=Q.type?XE(me._f):v4(V),Gn=V.type===GE.BLUR||V.type===GE.FOCUS_OUT,or=!j4(me._f)&&!e.resolver&&!Te(t.errors,ee)&&!me._f.deps||k4(Gn,Te(t.touchedFields,ee),t.isSubmitted,xe,ge),cs=JE(ee,m,Gn);vt(c,ee,ar),Gn?(!Q||!Q.readOnly)&&(me._f.onBlur&&me._f.onBlur(V),g&&g(0)):me._f.onChange&&me._f.onChange(V);const us=le(ee,ar,Gn),On=!In(us)||cs;if(!Gn&&T.state.next({name:ee,type:V.type,values:en(c)}),or)return(_.isValid||w.isValid)&&(e.mode==="onBlur"?Gn&&C():Gn||C()),On&&T.state.next({name:ee,...cs?{}:us});if(!Gn&&cs&&T.state.next({...t}),e.resolver){const{errors:lr}=await D([ee]);if(he(ar),ye){const cr=ew(t.errors,i,ee),Qr=ew(lr,i,cr.name||ee);qe=Qr.error,ee=Qr.name,rt=In(lr)}}else k([ee],!0),qe=(await nw(me,m.disabled,c,R,e.shouldUseNativeValidation))[ee],k([ee]),he(ar),ye&&(qe?rt=!1:(_.isValid||w.isValid)&&(rt=await I(i,!0)));ye&&(me._f.deps&&Ue(me._f.deps),ce(ee,rt,qe,us))}},we=(V,Q)=>{if(Te(t.errors,Q)&&V.focus)return V.focus(),1},Ue=async(V,Q={})=>{let ee,ye;const me=Vc(V);if(e.resolver){const he=await S(Ut(V)?V:me);ee=In(he),ye=V?!me.some(ge=>Te(he,ge)):ee}else V?(ye=(await Promise.all(me.map(async he=>{const ge=Te(i,he);return await I(ge&&ge._f?{[he]:ge}:ge)}))).every(Boolean),!(!ye&&!t.isValid)&&C()):ye=ee=await I(i);return T.state.next({...!$s(V)||(_.isValid||w.isValid)&&ee!==t.isValid?{}:{name:V},...e.resolver||!V?{isValid:ee}:{},errors:t.errors}),Q.shouldFocus&&!ye&&Pc(i,we,V?me:m.mount),ye},P=V=>{const Q={...h.mount?c:o};return Ut(V)?Q:$s(V)?Te(Q,V):V.map(ee=>Te(Q,ee))},oe=(V,Q)=>({invalid:!!Te((Q||t).errors,V),isDirty:!!Te((Q||t).dirtyFields,V),error:Te((Q||t).errors,V),isValidating:!!Te(t.validatingFields,V),isTouched:!!Te((Q||t).touchedFields,V)}),pe=V=>{V&&Vc(V).forEach(Q=>Pt(t.errors,Q)),T.state.next({errors:V?t.errors:{}})},$=(V,Q,ee)=>{const ye=(Te(i,V,{_f:{}})._f||{}).ref,me=Te(t.errors,V)||{},{ref:he,message:ge,type:xe,...qe}=me;vt(t.errors,V,{...qe,...Q,ref:ye}),T.state.next({name:V,errors:t.errors,isValid:!1}),ee&&ee.shouldFocus&&ye&&ye.focus&&ye.focus()},ve=(V,Q)=>ys(V)?T.state.subscribe({next:ee=>"values"in ee&&V(L(void 0,Q),ee)}):L(V,Q,!0),ke=V=>T.state.subscribe({next:Q=>{M4(V.name,Q.name,V.exact)&&O4(Q,V.formState||_,Sn,V.reRenderRoot)&&V.callback({values:{...c},...t,...Q,defaultValues:o})}}).unsubscribe,Re=V=>(h.mount=!0,w={...w,...V.formState},ke({...V,formState:w})),wt=(V,Q={})=>{for(const ee of V?Vc(V):m.mount)m.mount.delete(ee),m.array.delete(ee),Q.keepValue||(Pt(i,ee),Pt(c,ee)),!Q.keepError&&Pt(t.errors,ee),!Q.keepDirty&&Pt(t.dirtyFields,ee),!Q.keepTouched&&Pt(t.touchedFields,ee),!Q.keepIsValidating&&Pt(t.validatingFields,ee),!e.shouldUnregister&&!Q.keepDefaultValue&&Pt(o,ee);T.state.next({values:en(c)}),T.state.next({...t,...Q.keepDirty?{isDirty:U()}:{}}),!Q.keepIsValid&&C()},st=({disabled:V,name:Q})=>{(Gs(V)&&h.mount||V||m.disabled.has(Q))&&(V?m.disabled.add(Q):m.disabled.delete(Q))},An=(V,Q={})=>{let ee=Te(i,V);const ye=Gs(Q.disabled)||Gs(e.disabled);return vt(i,V,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:V}},name:V,mount:!0,...Q}}),m.mount.add(V),ee?st({disabled:Gs(Q.disabled)?Q.disabled:e.disabled,name:V}):de(V,!0,Q.value),{...ye?{disabled:Q.disabled||e.disabled}:{},...e.progressive?{required:!!Q.required,min:Ec(Q.min),max:Ec(Q.max),minLength:Ec(Q.minLength),maxLength:Ec(Q.maxLength),pattern:Ec(Q.pattern)}:{},name:V,onChange:ue,onBlur:ue,ref:me=>{if(me){An(V,Q),ee=Te(i,V);const he=Ut(me.value)&&me.querySelectorAll&&me.querySelectorAll("input,select,textarea")[0]||me,ge=N4(he),xe=ee._f.refs||[];if(ge?xe.find(qe=>qe===he):he===ee._f.ref)return;vt(i,V,{_f:{...ee._f,...ge?{refs:[...xe.filter(Bp),he,...Array.isArray(Te(o,V))?[{}]:[]],ref:{type:he.type,name:V}}:{ref:he}}}),de(V,!1,void 0,he)}else ee=Te(i,V,{}),ee._f&&(ee._f.mount=!1),(e.shouldUnregister||Q.shouldUnregister)&&!(b4(m.array,V)&&h.action)&&m.unMount.add(V)}}},Hn=()=>e.shouldFocusError&&Pc(i,we,m.mount),ls=V=>{Gs(V)&&(T.state.next({disabled:V}),Pc(i,(Q,ee)=>{const ye=Te(i,ee);ye&&(Q.disabled=ye._f.disabled||V,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(me=>{me.disabled=ye._f.disabled||V}))},0,!1))},Ss=(V,Q)=>async ee=>{let ye;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let me=en(c);if(T.state.next({isSubmitting:!0}),e.resolver){const{errors:he,values:ge}=await D();t.errors=he,me=en(ge)}else await I(i);if(m.disabled.size)for(const he of m.disabled)Pt(me,he);if(Pt(t.errors,"root"),In(t.errors)){T.state.next({errors:{}});try{await V(me,ee)}catch(he){ye=he}}else Q&&await Q({...t.errors},ee),Hn(),setTimeout(Hn);if(T.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(t.errors)&&!ye,submitCount:t.submitCount+1,errors:t.errors}),ye)throw ye},ir=(V,Q={})=>{Te(i,V)&&(Ut(Q.defaultValue)?W(V,en(Te(o,V))):(W(V,Q.defaultValue),vt(o,V,en(Q.defaultValue))),Q.keepTouched||Pt(t.touchedFields,V),Q.keepDirty||(Pt(t.dirtyFields,V),t.isDirty=Q.defaultValue?U(V,en(Te(o,V))):U()),Q.keepError||(Pt(t.errors,V),_.isValid&&C()),T.state.next({...t}))},Ns=(V,Q={})=>{const ee=V?en(V):o,ye=en(ee),me=In(V),he=me?o:ye;if(Q.keepDefaultValues||(o=ee),!Q.keepValues){if(Q.keepDirtyValues){const ge=new Set([...m.mount,...Object.keys(bc(o,c))]);for(const xe of Array.from(ge))Te(t.dirtyFields,xe)?vt(he,xe,Te(c,xe)):W(xe,Te(he,xe))}else{if(Ry&&Ut(V))for(const ge of m.mount){const xe=Te(i,ge);if(xe&&xe._f){const qe=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(Md(qe)){const rt=qe.closest("form");if(rt){rt.reset();break}}}}if(Q.keepFieldsRef)for(const ge of m.mount)W(ge,Te(he,ge));else i={}}c=e.shouldUnregister?Q.keepDefaultValues?en(o):{}:en(he),T.array.next({values:{...he}}),T.state.next({values:{...he}})}m={mount:Q.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!_.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues,h.watch=!!e.shouldUnregister,T.state.next({submitCount:Q.keepSubmitCount?t.submitCount:0,isDirty:me?!1:Q.keepDirty?t.isDirty:!!(Q.keepDefaultValues&&!Di(V,o)),isSubmitted:Q.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:me?{}:Q.keepDirtyValues?Q.keepDefaultValues&&c?bc(o,c):t.dirtyFields:Q.keepDefaultValues&&V?bc(o,V):Q.keepDirty?t.dirtyFields:{},touchedFields:Q.keepTouched?t.touchedFields:{},errors:Q.keepErrors?t.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},$r=(V,Q)=>Ns(ys(V)?V(c):V,Q),$a=(V,Q={})=>{const ee=Te(i,V),ye=ee&&ee._f;if(ye){const me=ye.refs?ye.refs[0]:ye.ref;me.focus&&(me.focus(),Q.shouldSelect&&ys(me.select)&&me.select())}},Sn=V=>{t={...t,...V}},Yr={control:{register:An,unregister:wt,getFieldState:oe,handleSubmit:Ss,setError:$,_subscribe:ke,_runSchema:D,_focusError:Hn,_getWatch:L,_getDirty:U,_setValid:C,_setFieldArray:F,_setDisabledField:st,_setErrors:se,_getFieldArray:N,_reset:Ns,_resetDefaultValues:()=>ys(e.defaultValues)&&e.defaultValues().then(V=>{$r(V,e.resetOptions),T.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:ls,_subjects:T,_proxyFormState:_,get _fields(){return i},get _formValues(){return c},get _state(){return h},set _state(V){h=V},get _defaultValues(){return o},get _names(){return m},set _names(V){m=V},get _formState(){return t},get _options(){return e},set _options(V){e={...e,...V}}},subscribe:Re,trigger:Ue,register:An,handleSubmit:Ss,watch:ve,setValue:W,getValues:P,reset:$r,resetField:ir,clearErrors:pe,unregister:wt,setError:$,setFocus:$a,getFieldState:oe};return{...Yr,formControl:Yr}}function _u(s={}){const e=Tn.useRef(void 0),t=Tn.useRef(void 0),[i,o]=Tn.useState({isDirty:!1,isValidating:!1,isLoading:ys(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:ys(s.defaultValues)?void 0:s.defaultValues});if(!e.current)if(s.formControl)e.current={...s.formControl,formState:i},s.defaultValues&&!ys(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:h,...m}=U4(s);e.current={...m,formState:i}}const c=e.current.control;return c._options=s,x4(()=>{const h=c._subscribe({formState:c._proxyFormState,callback:()=>o({...c._formState}),reRenderRoot:!0});return o(m=>({...m,isReady:!0})),c._formState.isReady=!0,h},[c]),Tn.useEffect(()=>c._disableForm(s.disabled),[c,s.disabled]),Tn.useEffect(()=>{s.mode&&(c._options.mode=s.mode),s.reValidateMode&&(c._options.reValidateMode=s.reValidateMode)},[c,s.mode,s.reValidateMode]),Tn.useEffect(()=>{s.errors&&(c._setErrors(s.errors),c._focusError())},[c,s.errors]),Tn.useEffect(()=>{s.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,s.shouldUnregister]),Tn.useEffect(()=>{if(c._proxyFormState.isDirty){const h=c._getDirty();h!==i.isDirty&&c._subjects.state.next({isDirty:h})}},[c,i.isDirty]),Tn.useEffect(()=>{s.values&&!Di(s.values,t.current)?(c._reset(s.values,{keepFieldsRef:!0,...c._options.resetOptions}),t.current=s.values,o(h=>({...h}))):c._resetDefaultValues()},[c,s.values]),Tn.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),e.current.formState=T4(i,c),e.current}const q4=()=>{const[s,e]=B.useState(!1),[t,i]=B.useState(!1),{login:o}=yn(),c=ru(),{register:h,handleSubmit:m,formState:{errors:g},setError:y}=_u(),_=async w=>{i(!0);try{await o(w.email,w.password),c("/dashboard")}catch{y("email",{message:"Invalid email or password"})}finally{i(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10",children:f.jsx("div",{className:"card w-full max-w-md bg-base-100 shadow-2xl",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"p-3 bg-primary rounded-full",children:f.jsx(yf,{className:"h-8 w-8 text-primary-content"})})}),f.jsx("h1",{className:"text-3xl font-bold text-primary",children:"School EMS"}),f.jsx("p",{className:"text-base-content/60",children:"Employee Management System"})]}),f.jsxs("form",{onSubmit:m(_),className:"space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Email"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"email",placeholder:"Enter your email",className:`input input-bordered w-full pl-10 ${g.email?"input-error":""}`,...h("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),f.jsx(vf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),g.email&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.email.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Password"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:s?"text":"password",placeholder:"Enter your password",className:`input input-bordered w-full pl-10 pr-10 ${g.password?"input-error":""}`,...h("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),f.jsx(Tg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"}),f.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2",onClick:()=>e(!s),children:s?f.jsx(wg,{className:"h-5 w-5 text-base-content/40"}):f.jsx(eu,{className:"h-5 w-5 text-base-content/40"})})]}),g.password&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.password.message})})]}),f.jsx("div",{className:"form-control mt-6",children:f.jsx("button",{type:"submit",className:`btn btn-primary w-full ${t?"loading":""}`,disabled:t,children:t?"Signing In...":"Sign In"})})]}),f.jsx("div",{className:"divider",children:"OR"}),f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-sm",children:["Don't have an account?"," ",f.jsx(Ct,{to:"/register",className:"link link-primary",children:"Sign up here"})]})}),f.jsx("div",{className:"divider",children:"Demo Credentials"}),f.jsxs("div",{className:"text-sm text-base-content/70 space-y-1",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Admin:"})," admin@school.edu / admin123"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Manager:"})," manager@school.edu / manager123"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Employee:"})," employee@school.edu / employee123"]})]})]})})})},Oy=()=>{const[s,e]=B.useState([]),[t,i]=B.useState(!0),[o,c]=B.useState(null),{userProfile:h,currentUser:m}=yn();return B.useEffect(()=>{if(!h||h.role!=="admin"){i(!1);return}const C=tl(Zs(Dt,"invitationCodes"),Wc("createdAt","desc")),k=Zc(C,F=>{const J=F.docs.map(se=>({id:se.id,...se.data(),createdAt:se.data().createdAt?.toDate()||new Date,expiresAt:se.data().expiresAt?.toDate()||new Date,usedAt:se.data().usedAt?.toDate()}));e(J),i(!1)},F=>{console.error("Error fetching invitation codes:",F),c("Failed to fetch invitation codes"),i(!1)});return()=>k()},[h]),{codes:s,loading:t,error:o,generateCode:async(C,k=7)=>{if(!h||!m)throw new Error("User not authenticated");try{c(null);const F=Math.random().toString(36).substring(2,10).toUpperCase(),J=new Date;J.setDate(J.getDate()+k);const se=h.id||m.uid,de=h.name||m.email||"Unknown User";console.log("Creating invitation code with:",{userId:se,userName:de,userProfile:h,currentUser:m});const le={code:F,role:C,createdBy:se,createdByName:de,isUsed:!1,expiresAt:J,createdAt:new Date};return{id:(await mf(Zs(Dt,"invitationCodes"),le)).id,code:F}}catch(F){throw console.error("Error generating invitation code:",F),c(F.message||"Failed to generate invitation code"),F}},verifyCode:async C=>{try{c(null);const k=tl(Zs(Dt,"invitationCodes"),_g("code","==",C.toUpperCase()),_g("isUsed","==",!1));return new Promise((F,J)=>{const se=Zc(k,de=>{if(se(),de.empty){F(null);return}const le=de.docs[0],ce={id:le.id,...le.data(),createdAt:le.data().createdAt?.toDate()||new Date,expiresAt:le.data().expiresAt?.toDate()||new Date,usedAt:le.data().usedAt?.toDate()};if(ce.expiresAt<new Date){F(null);return}F(ce)},J)})}catch(k){throw console.error("Error verifying invitation code:",k),c(k.message||"Failed to verify invitation code"),k}},markCodeAsUsed:async(C,k)=>{try{c(null),await df(os(Dt,"invitationCodes",C),{isUsed:!0,usedBy:k,usedAt:new Date})}catch(F){throw console.error("Error marking code as used:",F),c(F.message||"Failed to mark code as used"),F}},deleteCode:async C=>{try{c(null),await ff(os(Dt,"invitationCodes",C))}catch(k){throw console.error("Error deleting invitation code:",k),c(k.message||"Failed to delete invitation code"),k}},getActiveCodesByRole:C=>s.filter(k=>k.role===C&&!k.isUsed&&k.expiresAt>new Date),getUsedCodes:()=>s.filter(C=>C.isUsed),getExpiredCodes:()=>s.filter(C=>!C.isUsed&&C.expiresAt<=new Date)}},B4=({onCodeVerified:s,onBack:e})=>{const[t,i]=B.useState(!1),[o,c]=B.useState(null),{verifyCode:h}=Oy(),{register:m,handleSubmit:g,formState:{errors:y},setError:_}=_u(),w=async T=>{i(!0),c(null);try{const R=await h(T.code);if(!R){c("Invalid or expired invitation code"),_("code",{message:"Invalid or expired invitation code"});return}s(R)}catch(R){c(R.message||"Failed to verify code"),_("code",{message:"Verification failed"})}finally{i(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10",children:f.jsx("div",{className:"card w-full max-w-md bg-base-100 shadow-2xl",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"p-3 bg-primary rounded-full",children:f.jsx(yf,{className:"h-8 w-8 text-primary-content"})})}),f.jsx("h1",{className:"text-3xl font-bold text-primary",children:"School EMS"}),f.jsx("p",{className:"text-base-content/60",children:"Enter your invitation code"})]}),f.jsxs("form",{onSubmit:g(w),className:"space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Invitation Code"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Enter 8-character code",className:`input input-bordered w-full pl-10 uppercase tracking-wider ${y.code?"input-error":""}`,maxLength:8,...m("code",{required:"Invitation code is required",minLength:{value:8,message:"Code must be 8 characters"},maxLength:{value:8,message:"Code must be 8 characters"},pattern:{value:/^[A-Z0-9]{8}$/,message:"Code must contain only letters and numbers"}}),onChange:T=>{T.target.value=T.target.value.toUpperCase(),c(null)}}),f.jsx(jd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),y.code&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:y.code.message})})]}),o&&f.jsxs("div",{className:"alert alert-error",children:[f.jsx(ix,{className:"h-5 w-5"}),f.jsx("span",{children:o})]}),f.jsx("div",{className:"form-control mt-6",children:f.jsx("button",{type:"submit",className:`btn btn-primary w-full ${t?"loading":""}`,disabled:t,children:t?"Verifying...":f.jsxs(f.Fragment,{children:["Verify Code",f.jsx(EM,{className:"h-5 w-5 ml-2"})]})})})]}),f.jsx("div",{className:"divider",children:"OR"}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm mb-4",children:"Don't have an invitation code?"}),f.jsx("button",{onClick:e,className:"btn btn-outline btn-sm",children:"Back to Login"})]}),f.jsxs("div",{className:"mt-6 p-4 bg-base-200 rounded-lg",children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Need an invitation code?"}),f.jsxs("ul",{className:"text-sm text-base-content/70 space-y-1",children:[f.jsx("li",{children:"• Contact your system administrator"}),f.jsx("li",{children:"• Admin codes allow full system access"}),f.jsx("li",{children:"• Manager codes allow department management"}),f.jsx("li",{children:"• Employee accounts are created internally"})]})]})]})})})},z4=({invitationCode:s,onBack:e})=>{const[t,i]=B.useState(!1),[o,c]=B.useState(!1),[h,m]=B.useState(!1),{register:g}=yn(),{markCodeAsUsed:y}=Oy(),_=ru(),{register:w,handleSubmit:T,formState:{errors:R},watch:M,setError:C}=_u(),k=M("password"),F=["Administration","Teaching Staff","IT Department","Human Resources","Finance","Maintenance","Security","Library"],J=async ce=>{m(!0);try{await g(ce.email,ce.password,{name:ce.name,department:ce.department,position:ce.position,phone:ce.phone,role:s.role}),await y(s.id,ce.email),_("/dashboard")}catch{C("email",{message:"Failed to create account. Email may already exist."})}finally{m(!1)}},de=s.role==="admin"?{title:"Administrator Account",description:"Full system access and management capabilities",color:"text-error",bgColor:"bg-error/10",icon:sl}:{title:"Manager Account",description:"Department management and employee oversight",color:"text-warning",bgColor:"bg-warning/10",icon:sl},le=de.icon;return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10 py-8",children:f.jsx("div",{className:"card w-full max-w-2xl bg-base-100 shadow-2xl",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"p-3 bg-primary rounded-full",children:f.jsx(yf,{className:"h-8 w-8 text-primary-content"})})}),f.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Create Account"}),f.jsx("p",{className:"text-base-content/60",children:"Complete your registration"})]}),f.jsxs("div",{className:`alert ${de.bgColor} mb-6`,children:[f.jsx(le,{className:`h-6 w-6 ${de.color}`}),f.jsxs("div",{children:[f.jsx("h3",{className:`font-bold ${de.color}`,children:de.title}),f.jsx("div",{className:"text-sm",children:de.description}),f.jsxs("div",{className:"text-xs mt-1 opacity-70",children:["Code: ",s.code," • Created by: ",s.createdByName]})]})]}),f.jsxs("form",{onSubmit:T(J),className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Full Name *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Enter your full name",className:`input input-bordered w-full pl-10 ${R.name?"input-error":""}`,...w("name",{required:"Name is required"})}),f.jsx(tu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),R.name&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.name.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Email *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"email",placeholder:"Enter your email",className:`input input-bordered w-full pl-10 ${R.email?"input-error":""}`,...w("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),f.jsx(vf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),R.email&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.email.message})})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Password *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:t?"text":"password",placeholder:"Enter your password",className:`input input-bordered w-full pl-10 pr-10 ${R.password?"input-error":""}`,...w("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),f.jsx(Tg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"}),f.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2",onClick:()=>i(!t),children:t?f.jsx(wg,{className:"h-5 w-5 text-base-content/40"}):f.jsx(eu,{className:"h-5 w-5 text-base-content/40"})})]}),R.password&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.password.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Confirm Password *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:o?"text":"password",placeholder:"Confirm your password",className:`input input-bordered w-full pl-10 pr-10 ${R.confirmPassword?"input-error":""}`,...w("confirmPassword",{required:"Please confirm your password",validate:ce=>ce===k||"Passwords do not match"})}),f.jsx(Tg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"}),f.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2",onClick:()=>c(!o),children:o?f.jsx(wg,{className:"h-5 w-5 text-base-content/40"}):f.jsx(eu,{className:"h-5 w-5 text-base-content/40"})})]}),R.confirmPassword&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.confirmPassword.message})})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Department *"})}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:`select select-bordered w-full pl-10 ${R.department?"select-error":""}`,...w("department",{required:"Department is required"}),children:[f.jsx("option",{value:"",children:"Select Department"}),F.map(ce=>f.jsx("option",{value:ce,children:ce},ce))]}),f.jsx(Ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40 pointer-events-none"})]}),R.department&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.department.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Position *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Enter your position",className:`input input-bordered w-full pl-10 ${R.position?"input-error":""}`,...w("position",{required:"Position is required"})}),f.jsx(rx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),R.position&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.position.message})})]})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Phone Number *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"tel",placeholder:"Enter your phone number",className:`input input-bordered w-full pl-10 ${R.phone?"input-error":""}`,...w("phone",{required:"Phone number is required"})}),f.jsx(Sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),R.phone&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:R.phone.message})})]}),f.jsx("div",{className:"form-control mt-6",children:f.jsx("button",{type:"submit",className:`btn btn-primary w-full ${h?"loading":""}`,disabled:h,children:h?"Creating Account...":"Create Account"})})]}),f.jsx("div",{className:"divider",children:"OR"}),f.jsxs("div",{className:"text-center",children:[f.jsx("button",{onClick:e,className:"btn btn-outline btn-sm",children:"Use Different Code"}),f.jsxs("p",{className:"text-sm mt-2",children:["Already have an account?"," ",f.jsx(Ct,{to:"/login",className:"link link-primary",children:"Sign in here"})]})]})]})})})},F4=()=>{const[s,e]=B.useState(null),t=o=>{e(o)},i=()=>{e(null)};return s?f.jsx(z4,{invitationCode:s,onBack:i}):f.jsx(B4,{onCodeVerified:t,onBack:i})},yx=()=>{const[s,e]=B.useState([]),[t,i]=B.useState(!0),[o,c]=B.useState(null);return B.useEffect(()=>{const w=tl(Zs(Dt,"employees"),Wc("createdAt","desc")),T=Zc(w,R=>{const M=R.docs.map(C=>({id:C.id,...C.data(),createdAt:C.data().createdAt?.toDate()||new Date,updatedAt:C.data().updatedAt?.toDate()||new Date,hireDate:C.data().hireDate?.toDate()||new Date}));e(M),i(!1)},R=>{console.error("Error fetching employees:",R),c("Failed to fetch employees"),i(!1)});return()=>T()},[]),{employees:s,loading:t,error:o,createEmployee:async w=>{try{return c(null),(await mf(Zs(Dt,"employees"),{...w,createdAt:new Date,updatedAt:new Date})).id}catch(T){throw console.error("Error creating employee:",T),c(T.message||"Failed to create employee"),T}},updateEmployee:async(w,T)=>{try{c(null),await df(os(Dt,"employees",w),{...T,updatedAt:new Date})}catch(R){throw console.error("Error updating employee:",R),c(R.message||"Failed to update employee"),R}},deleteEmployee:async w=>{try{c(null),await ff(os(Dt,"employees",w))}catch(T){throw console.error("Error deleting employee:",T),c(T.message||"Failed to delete employee"),T}},getEmployeesByDepartment:w=>s.filter(T=>T.department===w),getEmployeesByStatus:w=>s.filter(T=>T.status===w)}},vx=()=>{const[s,e]=B.useState([]),[t,i]=B.useState(!0),[o,c]=B.useState(null),{userProfile:h}=yn();B.useEffect(()=>{if(!h)return;let M;h.role==="employee"?M=tl(Zs(Dt,"leaveRequests"),_g("employeeId","==",h.id),Wc("createdAt","desc")):M=tl(Zs(Dt,"leaveRequests"),Wc("createdAt","desc"));const C=Zc(M,k=>{const F=k.docs.map(J=>({id:J.id,...J.data(),startDate:J.data().startDate?.toDate()||new Date,endDate:J.data().endDate?.toDate()||new Date,createdAt:J.data().createdAt?.toDate()||new Date,updatedAt:J.data().updatedAt?.toDate()||new Date,approvedAt:J.data().approvedAt?.toDate()}));e(F),i(!1)},k=>{console.error("Error fetching leave requests:",k),c("Failed to fetch leave requests"),i(!1)});return()=>C()},[h]);const m=async M=>{try{return c(null),(await mf(Zs(Dt,"leaveRequests"),{...M,status:"pending",createdAt:new Date,updatedAt:new Date})).id}catch(C){throw console.error("Error creating leave request:",C),c(C.message||"Failed to create leave request"),C}},g=async(M,C)=>{try{c(null),await df(os(Dt,"leaveRequests",M),{...C,updatedAt:new Date,...C.status&&C.status!=="pending"&&{approvedAt:new Date}})}catch(k){throw console.error("Error updating leave request:",k),c(k.message||"Failed to update leave request"),k}};return{leaveRequests:s,loading:t,error:o,createLeaveRequest:m,updateLeaveRequest:g,deleteLeaveRequest:async M=>{try{c(null),await ff(os(Dt,"leaveRequests",M))}catch(C){throw console.error("Error deleting leave request:",C),c(C.message||"Failed to delete leave request"),C}},approveLeaveRequest:async(M,C)=>{await g(M,{status:"approved",approvedBy:C,approvedAt:new Date})},rejectLeaveRequest:async(M,C,k)=>{await g(M,{status:"rejected",approvedBy:C,rejectionReason:k,approvedAt:new Date})},getPendingRequests:()=>s.filter(M=>M.status==="pending"),getRequestsByStatus:M=>s.filter(C=>C.status===M)}},_x=()=>{const[s,e]=B.useState([]),[t,i]=B.useState(!0),[o,c]=B.useState(null);B.useEffect(()=>{const _=tl(Zs(Dt,"departments"),Wc("name","asc")),w=Zc(_,T=>{const R=T.docs.map(M=>{const C=M.data();return{id:M.id,name:C.name,description:C.description,managerName:C.managerName||null,employeeCount:C.employeeCount||0,createdAt:C.createdAt instanceof lt?C.createdAt.toDate():new Date,updatedAt:C.updatedAt instanceof lt?C.updatedAt.toDate():new Date}});e(R),i(!1)},T=>{console.error("Error fetching departments:",T),c(T.message),i(!1)});return()=>w()},[]);const h=B.useCallback(async _=>{try{const w=os(Dt,"departments",_),T=await X1(w);if(T.exists()){const R=T.data();return{id:T.id,name:R.name,description:R.description,managerName:R.managerName||null,employeeCount:R.employeeCount||0,createdAt:R.createdAt instanceof lt?R.createdAt.toDate():new Date,updatedAt:R.updatedAt instanceof lt?R.updatedAt.toDate():new Date}}return null}catch(w){return console.error("Error getting department by ID:",w),c(w.message),null}},[]),m=B.useCallback(async _=>{try{await mf(Zs(Dt,"departments"),{..._,employeeCount:0,createdAt:Up(),updatedAt:Up()})}catch(w){throw console.error("Error adding department:",w),new Error(w.message)}},[]),g=B.useCallback(async(_,w)=>{try{const T=os(Dt,"departments",_);await df(T,{...w,updatedAt:Up()})}catch(T){throw console.error("Error updating department:",T),new Error(T.message)}},[]),y=B.useCallback(async _=>{try{await ff(os(Dt,"departments",_))}catch(w){throw console.error("Error deleting department:",w),new Error(w.message)}},[]);return{departments:s,loading:t,error:o,getDepartmentById:h,addDepartment:m,updateDepartment:g,deleteDepartment:y}},H4=()=>{const{userProfile:s}=yn(),{employees:e,loading:t}=yx(),{leaveRequests:i,loading:o}=vx(),{departments:c,loading:h}=_x(),m=e.length,g=c.length,y=i.filter(C=>C.status==="pending").length,_=i.filter(C=>{const k=new Date,F=new Date(C.startDate);return F.getMonth()===k.getMonth()&&F.getFullYear()===k.getFullYear()}).length,w=i.sort((C,k)=>{const F=C.createdAt instanceof Date?C.createdAt:new Date(C.createdAt);return(k.createdAt instanceof Date?k.createdAt:new Date(k.createdAt)).getTime()-F.getTime()}).slice(0,3),T=[{title:"Total Employees",value:t?"...":m.toString(),change:"+12%",changeType:"increase",icon:Yi,color:"bg-primary"},{title:"Active Departments",value:h?"...":g.toString(),change:"+2",changeType:"increase",icon:Ua,color:"bg-secondary"},{title:"Pending Requests",value:o?"...":y.toString(),change:"-5",changeType:"decrease",icon:gf,color:"bg-warning"},{title:"This Month Leaves",value:o?"...":_.toString(),change:"+8%",changeType:"increase",icon:$i,color:"bg-info"}],R=C=>{switch(C){case"approved":return f.jsx(Jc,{className:"h-5 w-5 text-success"});case"rejected":return f.jsx(Eg,{className:"h-5 w-5 text-error"});default:return f.jsx(ix,{className:"h-5 w-5 text-warning"})}},M=C=>{const k="badge badge-sm";switch(C){case"approved":return`${k} badge-success`;case"rejected":return`${k} badge-error`;default:return`${k} badge-warning`}};return f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-lg p-6 text-primary-content",children:[f.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",s?.name,"! 👋"]}),f.jsx("p",{className:"text-primary-content/80",children:"Here's what's happening in your school today."})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((C,k)=>{const F=C.icon;return f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsx("div",{className:"card-body",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-base-content/60 text-sm",children:C.title}),f.jsx("p",{className:"text-2xl font-bold",children:C.value}),f.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[f.jsx(HE,{className:`h-4 w-4 ${C.changeType==="increase"?"text-success":"text-error"}`}),f.jsx("span",{className:`text-sm ${C.changeType==="increase"?"text-success":"text-error"}`,children:C.change})]})]}),f.jsx("div",{className:`p-3 rounded-full ${C.color}`,children:f.jsx(F,{className:"h-6 w-6 text-white"})})]})})},k)})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h2",{className:"card-title",children:"Recent Leave Requests"}),f.jsx("div",{className:"space-y-4",children:o?f.jsx("div",{className:"text-center",children:"Loading recent leave requests..."}):w.length===0?f.jsx("div",{className:"text-center text-base-content/60",children:"No recent leave requests."}):w.map(C=>f.jsxs("div",{className:"flex items-center justify-between p-4 bg-base-200 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[R(C.status),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:C.employeeName}),f.jsxs("p",{className:"text-sm text-base-content/60",children:[C.leaveType," • ",C.days," day",C.days>1?"s":""]})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:M(C.status),children:C.status}),f.jsx("p",{className:"text-xs text-base-content/60 mt-1",children:new Date(C.startDate).toLocaleDateString()})]})]},C.id))}),f.jsx("div",{className:"card-actions justify-end",children:f.jsx(Ct,{to:"/leave-requests",className:"btn btn-primary btn-sm",children:"View All"})})]})}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h2",{className:"card-title",children:"Quick Actions"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs(Ct,{to:"/employees",className:"btn btn-outline btn-primary",children:[f.jsx(Yi,{className:"h-5 w-5"}),"Add Employee"]}),f.jsxs(Ct,{to:"/leave-requests",className:"btn btn-outline btn-secondary",children:[f.jsx($i,{className:"h-5 w-5"}),"New Leave Request"]}),f.jsxs(Ct,{to:"/departments",className:"btn btn-outline btn-accent",children:[f.jsx(Ua,{className:"h-5 w-5"}),"Manage Departments"]}),f.jsxs(Ct,{to:"/reports",className:"btn btn-outline btn-info",children:[f.jsx(HE,{className:"h-5 w-5"}),"View Reports"]})]})]})})]}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h2",{className:"card-title",children:"Department Overview"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table table-zebra",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Department"}),f.jsx("th",{children:"Employees"}),f.jsx("th",{children:"Manager"}),f.jsx("th",{children:"Status"})]})}),f.jsx("tbody",{children:h?f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"text-center py-4",children:"Loading department data..."})}):c.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"text-center py-4 text-base-content/60",children:"No departments found."})}):c.map(C=>f.jsxs("tr",{children:[f.jsx("td",{children:C.name}),f.jsx("td",{children:C.employeeCount}),f.jsx("td",{children:C.managerName||"N/A"}),f.jsxs("td",{children:[f.jsx("div",{className:"badge badge-success",children:"Active"})," "]})]},C.id))})]})})]})})]})},G4=({employee:s,onSubmit:e,onClose:t,loading:i=!1})=>{const{register:o,handleSubmit:c,formState:{errors:h}}=_u({defaultValues:s?{...s,hireDate:s.hireDate.toISOString().split("T")[0],emergencyContactName:s.emergencyContact?.name||"",emergencyContactPhone:s.emergencyContact?.phone||"",emergencyContactRelationship:s.emergencyContact?.relationship||""}:{status:"active",hireDate:new Date().toISOString().split("T")[0]}}),m=["Administration","Teaching Staff","IT Department","Human Resources","Finance","Maintenance","Security","Library"],g=async y=>{const _={...y,hireDate:new Date(y.hireDate),emergencyContact:y.emergencyContactName?{name:y.emergencyContactName,phone:y.emergencyContactPhone||"",relationship:y.emergencyContactRelationship||""}:void 0},{emergencyContactName:w,emergencyContactPhone:T,emergencyContactRelationship:R,...M}=_;await e(M)};return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-base-100 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-base-200",children:[f.jsx("h2",{className:"text-2xl font-bold",children:s?"Edit Employee":"Add New Employee"}),f.jsx("button",{onClick:t,className:"btn btn-ghost btn-sm btn-circle",children:f.jsx(cx,{className:"h-5 w-5"})})]}),f.jsxs("form",{onSubmit:c(g),className:"p-6 space-y-6",children:[f.jsx("div",{className:"card bg-base-200",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h3",{className:"card-title text-lg",children:"Basic Information"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Employee ID *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"EMP001",className:`input input-bordered w-full pl-10 ${h.employeeId?"input-error":""}`,...o("employeeId",{required:"Employee ID is required"})}),f.jsx(tu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.employeeId&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.employeeId.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Full Name *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"John Doe",className:`input input-bordered w-full pl-10 ${h.name?"input-error":""}`,...o("name",{required:"Name is required"})}),f.jsx(tu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.name&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.name.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Email *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"email",placeholder:"john.doe@school.edu",className:`input input-bordered w-full pl-10 ${h.email?"input-error":""}`,...o("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),f.jsx(vf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.email&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.email.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Phone *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"tel",placeholder:"+1 (555) 123-4567",className:`input input-bordered w-full pl-10 ${h.phone?"input-error":""}`,...o("phone",{required:"Phone is required"})}),f.jsx(Sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.phone&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.phone.message})})]})]})]})}),f.jsx("div",{className:"card bg-base-200",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h3",{className:"card-title text-lg",children:"Job Information"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Department *"})}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:`select select-bordered w-full pl-10 ${h.department?"select-error":""}`,...o("department",{required:"Department is required"}),children:[f.jsx("option",{value:"",children:"Select Department"}),m.map(y=>f.jsx("option",{value:y,children:y},y))]}),f.jsx(Ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40 pointer-events-none"})]}),h.department&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.department.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Position *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Mathematics Teacher",className:`input input-bordered w-full pl-10 ${h.position?"input-error":""}`,...o("position",{required:"Position is required"})}),f.jsx(rx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.position&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.position.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Salary *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"number",placeholder:"50000",className:`input input-bordered w-full pl-10 ${h.salary?"input-error":""}`,...o("salary",{required:"Salary is required",min:{value:0,message:"Salary must be positive"}})}),f.jsx(VM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.salary&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.salary.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Hire Date *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"date",className:`input input-bordered w-full pl-10 ${h.hireDate?"input-error":""}`,...o("hireDate",{required:"Hire date is required"})}),f.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),h.hireDate&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.hireDate.message})})]}),f.jsxs("div",{className:"form-control md:col-span-2",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Status *"})}),f.jsxs("select",{className:`select select-bordered w-full ${h.status?"select-error":""}`,...o("status",{required:"Status is required"}),children:[f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"inactive",children:"Inactive"}),f.jsx("option",{value:"terminated",children:"Terminated"})]}),h.status&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:h.status.message})})]})]})]})}),f.jsx("div",{className:"card bg-base-200",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h3",{className:"card-title text-lg",children:"Additional Information"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Address"})}),f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{placeholder:"123 Main St, City, State 12345",className:"textarea textarea-bordered w-full pl-10 pt-3",rows:2,...o("address")}),f.jsx(ox,{className:"absolute left-3 top-3 h-5 w-5 text-base-content/40"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Emergency Contact Name"})}),f.jsx("input",{type:"text",placeholder:"Jane Doe",className:"input input-bordered w-full",...o("emergencyContactName")})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Emergency Contact Phone"})}),f.jsx("input",{type:"tel",placeholder:"+1 (555) 987-6543",className:"input input-bordered w-full",...o("emergencyContactPhone")})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Relationship"})}),f.jsx("input",{type:"text",placeholder:"Spouse",className:"input input-bordered w-full",...o("emergencyContactRelationship")})]})]})]})]})}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-base-200",children:[f.jsx("button",{type:"button",onClick:t,className:"btn btn-outline",children:"Cancel"}),f.jsx("button",{type:"submit",className:`btn btn-primary ${i?"loading":""}`,disabled:i,children:i?"Saving...":s?"Update Employee":"Create Employee"})]})]})]})})},$4=()=>{const[s,e]=B.useState(""),[t,i]=B.useState(""),[o,c]=B.useState(""),[h,m]=B.useState(!1),[g,y]=B.useState(null),[_,w]=B.useState(null),{userProfile:T}=yn(),{employees:R,loading:M,error:C,createEmployee:k,updateEmployee:F,deleteEmployee:J}=yx(),se=["Teaching Staff","Administration","IT Department","Human Resources","Maintenance"],de=R.filter(j=>{const U=j.name.toLowerCase().includes(s.toLowerCase())||j.email.toLowerCase().includes(s.toLowerCase())||j.employeeId.toLowerCase().includes(s.toLowerCase()),L=!t||j.department===t,N=!o||j.status===o;return U&&L&&N}),le=T?.role==="admin"||T?.role==="manager",ce=async j=>{try{await k(j),m(!1)}catch(U){console.error("Failed to create employee:",U)}},D=async j=>{if(g)try{await F(g.id,j),y(null),m(!1)}catch(U){console.error("Failed to update employee:",U)}},S=async j=>{try{await J(j),w(null)}catch(U){console.error("Failed to delete employee:",U)}},I=j=>({active:"badge badge-success",inactive:"badge badge-warning",terminated:"badge badge-error"})[j]||"badge badge-neutral";return M?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):C?f.jsx("div",{className:"alert alert-error",children:f.jsx("span",{children:C})}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[f.jsx(Yi,{className:"h-8 w-8 text-primary"}),"Employees"]}),f.jsx("p",{className:"text-base-content/60",children:"Manage your school staff members"})]}),le&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"Add Employee"]})]}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsx("div",{className:"card-body",children:f.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[f.jsx("div",{className:"form-control flex-1",children:f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Search employees...",className:"input input-bordered w-full pl-10",value:s,onChange:j=>e(j.target.value)}),f.jsx(lx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]})}),f.jsx("div",{className:"form-control",children:f.jsxs("select",{className:"select select-bordered",value:t,onChange:j=>i(j.target.value),children:[f.jsx("option",{value:"",children:"All Departments"}),se.map(j=>f.jsx("option",{value:j,children:j},j))]})}),f.jsx("div",{className:"form-control",children:f.jsxs("select",{className:"select select-bordered",value:o,onChange:j=>c(j.target.value),children:[f.jsx("option",{value:"",children:"All Status"}),f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"inactive",children:"Inactive"}),f.jsx("option",{value:"terminated",children:"Terminated"})]})})]})})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(j=>f.jsx("div",{className:"card bg-base-100 shadow-lg hover:shadow-xl transition-shadow",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"avatar placeholder",children:f.jsx("div",{className:"bg-primary text-primary-content rounded-full w-12",children:f.jsx("span",{className:"text-lg font-bold",children:j.name.split(" ").map(U=>U[0]).join("")})})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",children:j.name}),f.jsx("p",{className:"text-sm text-base-content/60",children:j.employeeId})]})]}),f.jsx("div",{className:I(j.status),children:j.status})]}),f.jsxs("div",{className:"space-y-2 mt-4",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(vf,{className:"h-4 w-4 text-base-content/60"}),f.jsx("span",{className:"truncate",children:j.email})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(Sy,{className:"h-4 w-4 text-base-content/60"}),f.jsx("span",{children:j.phone})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(ox,{className:"h-4 w-4 text-base-content/60"}),f.jsx("span",{className:"truncate",children:j.department})]})]}),f.jsxs("div",{className:"mt-4",children:[f.jsx("p",{className:"font-medium",children:j.position}),f.jsxs("p",{className:"text-sm text-base-content/60",children:["Hired: ",j.hireDate.toLocaleDateString()]})]}),f.jsxs("div",{className:"card-actions justify-end mt-4",children:[f.jsx("button",{className:"btn btn-ghost btn-sm",children:f.jsx(eu,{className:"h-4 w-4"})}),le&&f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>{y(j),m(!0)},children:f.jsx(Ny,{className:"h-4 w-4"})}),f.jsx("button",{className:"btn btn-ghost btn-sm text-error",onClick:()=>w(j.id),children:f.jsx(_f,{className:"h-4 w-4"})})]})]})]})},j.id))}),de.length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx(Yi,{className:"h-16 w-16 text-base-content/20 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No employees found"}),f.jsx("p",{className:"text-base-content/60 mb-4",children:s||t||o?"Try adjusting your search criteria":"Get started by adding your first employee"}),le&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"Add Employee"]})]}),f.jsxs("div",{className:"stats shadow w-full",children:[f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Total Employees"}),f.jsx("div",{className:"stat-value text-primary",children:R.length}),f.jsx("div",{className:"stat-desc",children:"All departments"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Active"}),f.jsx("div",{className:"stat-value text-success",children:R.filter(j=>j.status==="active").length}),f.jsx("div",{className:"stat-desc",children:"Currently working"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Departments"}),f.jsx("div",{className:"stat-value text-secondary",children:new Set(R.map(j=>j.department)).size}),f.jsx("div",{className:"stat-desc",children:"Active departments"})]})]}),h&&f.jsx(G4,{employee:g||void 0,onSubmit:g?D:ce,onClose:()=>{m(!1),y(null)}}),_&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-base-100 rounded-lg p-6 max-w-md w-full mx-4",children:[f.jsx("h3",{className:"font-bold text-lg mb-4",children:"Confirm Delete"}),f.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this employee? This action cannot be undone."}),f.jsxs("div",{className:"flex justify-end gap-4",children:[f.jsx("button",{className:"btn btn-outline",onClick:()=>w(null),children:"Cancel"}),f.jsx("button",{className:"btn btn-error",onClick:()=>S(_),children:"Delete"})]})]})})]})},bx=6048e5,Y4=864e5,sw=Symbol.for("constructDateFrom");function Qi(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&sw in s?s[sw](e):s instanceof Date?new s.constructor(e):new Date(e)}function As(s,e){return Qi(e||s,s)}let Q4={};function Ef(){return Q4}function nu(s,e){const t=Ef(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,o=As(s,e?.in),c=o.getDay(),h=(c<i?7:0)+c-i;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function Pd(s,e){return nu(s,{...e,weekStartsOn:1})}function Ex(s,e){const t=As(s,e?.in),i=t.getFullYear(),o=Qi(t,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const c=Pd(o),h=Qi(t,0);h.setFullYear(i,0,4),h.setHours(0,0,0,0);const m=Pd(h);return t.getTime()>=c.getTime()?i+1:t.getTime()>=m.getTime()?i:i-1}function rw(s){const e=As(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function K4(s,...e){const t=Qi.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function iw(s,e){const t=As(s,e?.in);return t.setHours(0,0,0,0),t}function X4(s,e,t){const[i,o]=K4(t?.in,s,e),c=iw(i),h=iw(o),m=+c-rw(c),g=+h-rw(h);return Math.round((m-g)/Y4)}function W4(s,e){const t=Ex(s,e),i=Qi(s,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Pd(i)}function Z4(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function J4(s){return!(!Z4(s)&&typeof s!="number"||isNaN(+As(s)))}function ek(s,e){const t=As(s,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const tk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nk=(s,e,t)=>{let i;const o=tk[s];return typeof o=="string"?i=o:e===1?i=o.one:i=o.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function zp(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const sk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ik={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ak={date:zp({formats:sk,defaultWidth:"full"}),time:zp({formats:rk,defaultWidth:"full"}),dateTime:zp({formats:ik,defaultWidth:"full"})},ok={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lk=(s,e,t,i)=>ok[s];function wc(s){return(e,t)=>{const i=t?.context?String(t.context):"standalone";let o;if(i==="formatting"&&s.formattingValues){const h=s.defaultFormattingWidth||s.defaultWidth,m=t?.width?String(t.width):h;o=s.formattingValues[m]||s.formattingValues[h]}else{const h=s.defaultWidth,m=t?.width?String(t.width):s.defaultWidth;o=s.values[m]||s.values[h]}const c=s.argumentCallback?s.argumentCallback(e):e;return o[c]}}const ck={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uk={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hk={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dk={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pk=(s,e)=>{const t=Number(s),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},gk={ordinalNumber:pk,era:wc({values:ck,defaultWidth:"wide"}),quarter:wc({values:uk,defaultWidth:"wide",argumentCallback:s=>s-1}),month:wc({values:hk,defaultWidth:"wide"}),day:wc({values:dk,defaultWidth:"wide"}),dayPeriod:wc({values:fk,defaultWidth:"wide",formattingValues:mk,defaultFormattingWidth:"wide"})};function Tc(s){return(e,t={})=>{const i=t.width,o=i&&s.matchPatterns[i]||s.matchPatterns[s.defaultMatchWidth],c=e.match(o);if(!c)return null;const h=c[0],m=i&&s.parsePatterns[i]||s.parsePatterns[s.defaultParseWidth],g=Array.isArray(m)?vk(m,w=>w.test(h)):yk(m,w=>w.test(h));let y;y=s.valueCallback?s.valueCallback(g):g,y=t.valueCallback?t.valueCallback(y):y;const _=e.slice(h.length);return{value:y,rest:_}}}function yk(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function vk(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function _k(s){return(e,t={})=>{const i=e.match(s.matchPattern);if(!i)return null;const o=i[0],c=e.match(s.parsePattern);if(!c)return null;let h=s.valueCallback?s.valueCallback(c[0]):c[0];h=t.valueCallback?t.valueCallback(h):h;const m=e.slice(o.length);return{value:h,rest:m}}}const bk=/^(\d+)(th|st|nd|rd)?/i,Ek=/\d+/i,wk={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tk={any:[/^b/i,/^(a|c)/i]},xk={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ak={any:[/1/i,/2/i,/3/i,/4/i]},Sk={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nk={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rk={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ck={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ik={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dk={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jk={ordinalNumber:_k({matchPattern:bk,parsePattern:Ek,valueCallback:s=>parseInt(s,10)}),era:Tc({matchPatterns:wk,defaultMatchWidth:"wide",parsePatterns:Tk,defaultParseWidth:"any"}),quarter:Tc({matchPatterns:xk,defaultMatchWidth:"wide",parsePatterns:Ak,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Tc({matchPatterns:Sk,defaultMatchWidth:"wide",parsePatterns:Nk,defaultParseWidth:"any"}),day:Tc({matchPatterns:Rk,defaultMatchWidth:"wide",parsePatterns:Ck,defaultParseWidth:"any"}),dayPeriod:Tc({matchPatterns:Ik,defaultMatchWidth:"any",parsePatterns:Dk,defaultParseWidth:"any"})},Ok={code:"en-US",formatDistance:nk,formatLong:ak,formatRelative:lk,localize:gk,match:jk,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mk(s,e){const t=As(s,e?.in);return X4(t,ek(t))+1}function kk(s,e){const t=As(s,e?.in),i=+Pd(t)-+W4(t);return Math.round(i/bx)+1}function wx(s,e){const t=As(s,e?.in),i=t.getFullYear(),o=Ef(),c=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=Qi(e?.in||s,0);h.setFullYear(i+1,0,c),h.setHours(0,0,0,0);const m=nu(h,e),g=Qi(e?.in||s,0);g.setFullYear(i,0,c),g.setHours(0,0,0,0);const y=nu(g,e);return+t>=+m?i+1:+t>=+y?i:i-1}function Vk(s,e){const t=Ef(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,o=wx(s,e),c=Qi(e?.in||s,0);return c.setFullYear(o,0,i),c.setHours(0,0,0,0),nu(c,e)}function Pk(s,e){const t=As(s,e?.in),i=+nu(t,e)-+Vk(t,e);return Math.round(i/bx)+1}function ot(s,e){const t=s<0?"-":"",i=Math.abs(s).toString().padStart(e,"0");return t+i}const xi={y(s,e){const t=s.getFullYear(),i=t>0?t:1-t;return ot(e==="yy"?i%100:i,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):ot(t+1,2)},d(s,e){return ot(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return ot(s.getHours()%12||12,e.length)},H(s,e){return ot(s.getHours(),e.length)},m(s,e){return ot(s.getMinutes(),e.length)},s(s,e){return ot(s.getSeconds(),e.length)},S(s,e){const t=e.length,i=s.getMilliseconds(),o=Math.trunc(i*Math.pow(10,t-3));return ot(o,e.length)}},Lo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},aw={G:function(s,e,t){const i=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const i=s.getFullYear(),o=i>0?i:1-i;return t.ordinalNumber(o,{unit:"year"})}return xi.y(s,e)},Y:function(s,e,t,i){const o=wx(s,i),c=o>0?o:1-o;if(e==="YY"){const h=c%100;return ot(h,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):ot(c,e.length)},R:function(s,e){const t=Ex(s);return ot(t,e.length)},u:function(s,e){const t=s.getFullYear();return ot(t,e.length)},Q:function(s,e,t){const i=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return ot(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(s,e,t){const i=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return ot(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(s,e,t){const i=s.getMonth();switch(e){case"M":case"MM":return xi.M(s,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(s,e,t){const i=s.getMonth();switch(e){case"L":return String(i+1);case"LL":return ot(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(s,e,t,i){const o=Pk(s,i);return e==="wo"?t.ordinalNumber(o,{unit:"week"}):ot(o,e.length)},I:function(s,e,t){const i=kk(s);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):ot(i,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):xi.d(s,e)},D:function(s,e,t){const i=Mk(s);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):ot(i,e.length)},E:function(s,e,t){const i=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(s,e,t,i){const o=s.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return ot(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(s,e,t,i){const o=s.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return ot(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(s,e,t){const i=s.getDay(),o=i===0?7:i;switch(e){case"i":return String(o);case"ii":return ot(o,e.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(s,e,t){const o=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(s,e,t){const i=s.getHours();let o;switch(i===12?o=Lo.noon:i===0?o=Lo.midnight:o=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(s,e,t){const i=s.getHours();let o;switch(i>=17?o=Lo.evening:i>=12?o=Lo.afternoon:i>=4?o=Lo.morning:o=Lo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let i=s.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return xi.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):xi.H(s,e)},K:function(s,e,t){const i=s.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):ot(i,e.length)},k:function(s,e,t){let i=s.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):ot(i,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):xi.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):xi.s(s,e)},S:function(s,e){return xi.S(s,e)},X:function(s,e,t){const i=s.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return lw(i);case"XXXX":case"XX":return Ca(i);case"XXXXX":case"XXX":default:return Ca(i,":")}},x:function(s,e,t){const i=s.getTimezoneOffset();switch(e){case"x":return lw(i);case"xxxx":case"xx":return Ca(i);case"xxxxx":case"xxx":default:return Ca(i,":")}},O:function(s,e,t){const i=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ow(i,":");case"OOOO":default:return"GMT"+Ca(i,":")}},z:function(s,e,t){const i=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ow(i,":");case"zzzz":default:return"GMT"+Ca(i,":")}},t:function(s,e,t){const i=Math.trunc(+s/1e3);return ot(i,e.length)},T:function(s,e,t){return ot(+s,e.length)}};function ow(s,e=""){const t=s>0?"-":"+",i=Math.abs(s),o=Math.trunc(i/60),c=i%60;return c===0?t+String(o):t+String(o)+e+ot(c,2)}function lw(s,e){return s%60===0?(s>0?"-":"+")+ot(Math.abs(s)/60,2):Ca(s,e)}function Ca(s,e=""){const t=s>0?"-":"+",i=Math.abs(s),o=ot(Math.trunc(i/60),2),c=ot(i%60,2);return t+o+e+c}const cw=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Tx=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Lk=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],i=t[1],o=t[2];if(!o)return cw(s,e);let c;switch(i){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",cw(i,e)).replace("{{time}}",Tx(o,e))},Uk={p:Tx,P:Lk},qk=/^D+$/,Bk=/^Y+$/,zk=["D","DD","YY","YYYY"];function Fk(s){return qk.test(s)}function Hk(s){return Bk.test(s)}function Gk(s,e,t){const i=$k(s,e,t);if(console.warn(i),zk.includes(s))throw new RangeError(i)}function $k(s,e,t){const i=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kk=/^'([^]*?)'?$/,Xk=/''/g,Wk=/[a-zA-Z]/;function Lc(s,e,t){const i=Ef(),o=i.locale??Ok,c=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,h=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=As(s,t?.in);if(!J4(m))throw new RangeError("Invalid time value");let g=e.match(Qk).map(_=>{const w=_[0];if(w==="p"||w==="P"){const T=Uk[w];return T(_,o.formatLong)}return _}).join("").match(Yk).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const w=_[0];if(w==="'")return{isToken:!1,value:Zk(_)};if(aw[w])return{isToken:!0,value:_};if(w.match(Wk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:_}});o.localize.preprocessor&&(g=o.localize.preprocessor(m,g));const y={firstWeekContainsDate:c,weekStartsOn:h,locale:o};return g.map(_=>{if(!_.isToken)return _.value;const w=_.value;(Hk(w)||Fk(w))&&Gk(w,e,String(s));const T=aw[w[0]];return T(m,w,o.localize,y)}).join("")}function Zk(s){const e=s.match(Kk);return e?e[1].replace(Xk,"'"):s}const Jk=({leaveRequest:s,onSubmit:e,onClose:t,loading:i=!1})=>{const{userProfile:o}=yn(),{register:c,handleSubmit:h,watch:m,formState:{errors:g}}=_u({defaultValues:s?{...s,startDate:s.startDate.toISOString().split("T")[0],endDate:s.endDate.toISOString().split("T")[0]}:{startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}}),y=m("startDate"),_=m("endDate"),w=()=>{if(y&&_){const M=new Date(y),C=new Date(_),k=Math.abs(C.getTime()-M.getTime());return Math.ceil(k/(1e3*60*60*24))+1}return 0},T=[{value:"sick",label:"Sick Leave",color:"badge-error"},{value:"vacation",label:"Vacation",color:"badge-primary"},{value:"personal",label:"Personal Leave",color:"badge-secondary"},{value:"maternity",label:"Maternity Leave",color:"badge-accent"},{value:"paternity",label:"Paternity Leave",color:"badge-accent"},{value:"emergency",label:"Emergency Leave",color:"badge-warning"}],R=async M=>{if(!o)return;const C={employeeId:o.id,employeeName:o.name,leaveType:M.leaveType,startDate:new Date(M.startDate),endDate:new Date(M.endDate),days:w(),reason:M.reason,status:"pending"};await e(C)};return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-base-100 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-base-200",children:[f.jsx("h2",{className:"text-2xl font-bold",children:s?"Edit Leave Request":"Submit Leave Request"}),f.jsx("button",{onClick:t,className:"btn btn-ghost btn-sm btn-circle",children:f.jsx(cx,{className:"h-5 w-5"})})]}),f.jsxs("form",{onSubmit:h(R),className:"p-6 space-y-6",children:[f.jsx("div",{className:"card bg-base-200",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h3",{className:"card-title text-lg",children:"Employee Information"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Employee Name"})}),f.jsx("input",{type:"text",value:o?.name||"",className:"input input-bordered w-full",disabled:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Department"})}),f.jsx("input",{type:"text",value:o?.department||"",className:"input input-bordered w-full",disabled:!0})]})]})]})}),f.jsx("div",{className:"card bg-base-200",children:f.jsxs("div",{className:"card-body",children:[f.jsx("h3",{className:"card-title text-lg",children:"Leave Details"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Leave Type *"})}),f.jsxs("select",{className:`select select-bordered w-full ${g.leaveType?"select-error":""}`,...c("leaveType",{required:"Leave type is required"}),children:[f.jsx("option",{value:"",children:"Select Leave Type"}),T.map(M=>f.jsx("option",{value:M.value,children:M.label},M.value))]}),g.leaveType&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.leaveType.message})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Start Date *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"date",className:`input input-bordered w-full pl-10 ${g.startDate?"input-error":""}`,...c("startDate",{required:"Start date is required"})}),f.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),g.startDate&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.startDate.message})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"End Date *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"date",className:`input input-bordered w-full pl-10 ${g.endDate?"input-error":""}`,...c("endDate",{required:"End date is required",validate:M=>y&&M<y?"End date must be after start date":!0})}),f.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]}),g.endDate&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.endDate.message})})]})]}),y&&_&&f.jsxs("div",{className:"alert alert-info",children:[f.jsx(gf,{className:"h-5 w-5"}),f.jsxs("span",{children:["Duration: ",w()," day",w()>1?"s":""]})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Reason *"})}),f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{placeholder:"Please provide a detailed reason for your leave request...",className:`textarea textarea-bordered w-full pl-10 pt-3 ${g.reason?"textarea-error":""}`,rows:4,...c("reason",{required:"Reason is required",minLength:{value:10,message:"Reason must be at least 10 characters"}})}),f.jsx(ax,{className:"absolute left-3 top-3 h-5 w-5 text-base-content/40"})]}),g.reason&&f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt text-error",children:g.reason.message})})]})]})]})}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-base-200",children:[f.jsx("button",{type:"button",onClick:t,className:"btn btn-outline",children:"Cancel"}),f.jsx("button",{type:"submit",className:`btn btn-primary ${i?"loading":""}`,disabled:i,children:i?"Submitting...":s?"Update Request":"Submit Request"})]})]})]})})},eV=()=>{const[s,e]=B.useState(""),[t,i]=B.useState(""),[o,c]=B.useState(""),[h,m]=B.useState(!1),[g,y]=B.useState(null),[_,w]=B.useState(null),[T,R]=B.useState(null),[M,C]=B.useState(""),{userProfile:k}=yn(),{leaveRequests:F,loading:J,error:se,createLeaveRequest:de,updateLeaveRequest:le,deleteLeaveRequest:ce,approveLeaveRequest:D,rejectLeaveRequest:S}=vx(),I=["sick","vacation","personal","maternity","paternity","emergency"],j=F.filter($=>{const ve=$.employeeName.toLowerCase().includes(s.toLowerCase())||$.employeeId.toLowerCase().includes(s.toLowerCase()),ke=!t||$.status===t,Re=!o||$.leaveType===o;return ve&&ke&&Re}),U=k?.role==="admin"||k?.role==="manager",L=k?.role==="employee",N=async $=>{try{await de($),m(!1)}catch(ve){console.error("Failed to create leave request:",ve)}},Ve=async $=>{if(g)try{await le(g.id,$),y(null),m(!1)}catch(ve){console.error("Failed to update leave request:",ve)}},Le=async $=>{try{await ce($),w(null)}catch(ve){console.error("Failed to delete leave request:",ve)}},W=async $=>{if(k)try{await D($,k.name)}catch(ve){console.error("Failed to approve leave request:",ve)}},ue=async $=>{if(k)try{await S($,k.name,M),R(null),C("")}catch(ve){console.error("Failed to reject leave request:",ve)}},we=$=>{switch($){case"approved":return f.jsx(Jc,{className:"h-5 w-5 text-success"});case"rejected":return f.jsx(Eg,{className:"h-5 w-5 text-error"});default:return f.jsx(gf,{className:"h-5 w-5 text-warning"})}},Ue=$=>{const ve="badge";switch($){case"approved":return`${ve} badge-success`;case"rejected":return`${ve} badge-error`;default:return`${ve} badge-warning`}},P=$=>`badge ${{sick:"badge-error",vacation:"badge-primary",personal:"badge-secondary",maternity:"badge-accent",paternity:"badge-accent",emergency:"badge-warning"}[$]||"badge-neutral"}`,oe=$=>$.employeeId===k?.id&&$.status==="pending",pe=$=>$.employeeId===k?.id&&$.status==="pending";return J?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):se?f.jsx("div",{className:"alert alert-error",children:f.jsx("span",{children:se})}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[f.jsx($i,{className:"h-8 w-8 text-primary"}),"Leave Requests"]}),f.jsx("p",{className:"text-base-content/60",children:"Manage employee leave applications"})]}),L&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"New Request"]})]}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsx("div",{className:"card-body",children:f.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[f.jsx("div",{className:"form-control flex-1",children:f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Search by employee name or ID...",className:"input input-bordered w-full pl-10",value:s,onChange:$=>e($.target.value)}),f.jsx(lx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-base-content/40"})]})}),f.jsx("div",{className:"form-control",children:f.jsxs("select",{className:"select select-bordered",value:t,onChange:$=>i($.target.value),children:[f.jsx("option",{value:"",children:"All Status"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"approved",children:"Approved"}),f.jsx("option",{value:"rejected",children:"Rejected"})]})}),f.jsx("div",{className:"form-control",children:f.jsxs("select",{className:"select select-bordered",value:o,onChange:$=>c($.target.value),children:[f.jsx("option",{value:"",children:"All Types"}),I.map($=>f.jsx("option",{value:$,children:$.charAt(0).toUpperCase()+$.slice(1)},$))]})})]})})}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsx("div",{className:"card-body",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table table-zebra",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Employee"}),f.jsx("th",{children:"Leave Type"}),f.jsx("th",{children:"Duration"}),f.jsx("th",{children:"Applied Date"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:j.map($=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"avatar placeholder",children:f.jsx("div",{className:"bg-primary text-primary-content rounded-full w-10",children:f.jsx("span",{className:"text-sm",children:$.employeeName.split(" ").map(ve=>ve[0]).join("")})})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold",children:$.employeeName}),f.jsx("div",{className:"text-sm opacity-50",children:$.employeeId})]})]})}),f.jsx("td",{children:f.jsx("div",{className:P($.leaveType),children:$.leaveType.charAt(0).toUpperCase()+$.leaveType.slice(1)})}),f.jsx("td",{children:f.jsxs("div",{children:[f.jsxs("div",{className:"font-medium",children:[$.days," day",$.days>1?"s":""]}),f.jsxs("div",{className:"text-sm opacity-50",children:[Lc($.startDate,"MMM dd")," -"," ",Lc($.endDate,"MMM dd")]})]})}),f.jsx("td",{children:Lc($.createdAt,"MMM dd, yyyy")}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-2",children:[we($.status),f.jsx("div",{className:Ue($.status),children:$.status})]})}),f.jsx("td",{children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"btn btn-ghost btn-sm",children:f.jsx(eu,{className:"h-4 w-4"})}),oe($)&&f.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>{y($),m(!0)},children:f.jsx(Ny,{className:"h-4 w-4"})}),pe($)&&f.jsx("button",{className:"btn btn-ghost btn-sm text-error",onClick:()=>w($.id),children:f.jsx(_f,{className:"h-4 w-4"})}),U&&$.status==="pending"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>W($.id),children:f.jsx(Jc,{className:"h-4 w-4"})}),f.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>R($.id),children:f.jsx(Eg,{className:"h-4 w-4"})})]})]})})]},$.id))})]})})})}),j.length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx($i,{className:"h-16 w-16 text-base-content/20 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No leave requests found"}),f.jsx("p",{className:"text-base-content/60 mb-4",children:s||t||o?"Try adjusting your search criteria":"No leave requests have been submitted yet"}),L&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"Submit Request"]})]}),f.jsxs("div",{className:"stats shadow w-full",children:[f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Total Requests"}),f.jsx("div",{className:"stat-value text-primary",children:F.length}),f.jsx("div",{className:"stat-desc",children:"All time"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Pending"}),f.jsx("div",{className:"stat-value text-warning",children:F.filter($=>$.status==="pending").length}),f.jsx("div",{className:"stat-desc",children:"Awaiting approval"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Approved"}),f.jsx("div",{className:"stat-value text-success",children:F.filter($=>$.status==="approved").length}),f.jsx("div",{className:"stat-desc",children:"This month"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Rejected"}),f.jsx("div",{className:"stat-value text-error",children:F.filter($=>$.status==="rejected").length}),f.jsx("div",{className:"stat-desc",children:"This month"})]})]}),h&&f.jsx(Jk,{leaveRequest:g||void 0,onSubmit:g?Ve:N,onClose:()=>{m(!1),y(null)}}),_&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-base-100 rounded-lg p-6 max-w-md w-full mx-4",children:[f.jsx("h3",{className:"font-bold text-lg mb-4",children:"Confirm Delete"}),f.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this leave request? This action cannot be undone."}),f.jsxs("div",{className:"flex justify-end gap-4",children:[f.jsx("button",{className:"btn btn-outline",onClick:()=>w(null),children:"Cancel"}),f.jsx("button",{className:"btn btn-error",onClick:()=>Le(_),children:"Delete"})]})]})}),T&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-base-100 rounded-lg p-6 max-w-md w-full mx-4",children:[f.jsx("h3",{className:"font-bold text-lg mb-4",children:"Reject Leave Request"}),f.jsxs("div",{className:"form-control mb-6",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Rejection Reason (Optional)"})}),f.jsx("textarea",{className:"textarea textarea-bordered",placeholder:"Please provide a reason for rejection...",value:M,onChange:$=>C($.target.value),rows:3})]}),f.jsxs("div",{className:"flex justify-end gap-4",children:[f.jsx("button",{className:"btn btn-outline",onClick:()=>R(null),children:"Cancel"}),f.jsx("button",{className:"btn btn-error",onClick:()=>ue(T),children:"Reject Request"})]})]})})]})},tV=()=>{const{departments:s,loading:e,error:t,addDepartment:i,updateDepartment:o,deleteDepartment:c}=_x(),{userProfile:h}=yn(),[m,g]=B.useState(!1),[y,_]=B.useState(null),[w,T]=B.useState(""),[R,M]=B.useState(""),[C,k]=B.useState(""),F=h?.role==="admin"||h?.role==="manager",J=ce=>{_(ce||null),T(ce?.name||""),M(ce?.description||""),k(ce?.managerName||""),g(!0)},se=()=>{g(!1),_(null),T(""),M(""),k("")},de=async ce=>{if(ce.preventDefault(),!w||!R){alert("Name and Description are required.");return}try{y?.id?await o(y.id,{name:w,description:R,managerName:C}):await i({name:w,description:R,managerName:C}),se()}catch(D){alert(`Failed to save department: ${D instanceof Error?D.message:String(D)}`)}},le=async ce=>{if(window.confirm("Are you sure you want to delete this department?"))try{await c(ce)}catch(D){alert(`Failed to delete department: ${D instanceof Error?D.message:String(D)}`)}};return e?f.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[f.jsx("span",{className:"loading loading-spinner loading-lg"}),f.jsx("p",{className:"ml-2 text-lg",children:"Loading departments..."})]}):t?f.jsx("div",{className:"alert alert-error",children:f.jsx("span",{children:t})}):f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[f.jsx(Ua,{className:"h-8 w-8 text-primary"}),"Departments"]}),f.jsx("p",{className:"text-base-content/60",children:"Manage school departments and their details"})]}),F&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>J(),children:[f.jsx(FE,{className:"mr-2 h-4 w-4"})," Add Department"]})]}),s.length===0?f.jsxs("div",{className:"text-center text-base-content/60 p-8",children:[f.jsx(Ua,{className:"h-16 w-16 text-base-content/20 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No departments found"}),f.jsx("p",{className:"text-base-content/60 mb-4",children:F?"Click 'Add Department' to create your first one.":"No departments have been added yet."}),F&&f.jsxs("button",{className:"btn btn-primary",onClick:()=>J(),children:[f.jsx(FE,{className:"mr-2 h-5 w-5"})," Add Department"]})]}):f.jsx("div",{className:"overflow-x-auto card bg-base-100 shadow-lg",children:f.jsxs("table",{className:"table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Name"}),f.jsx("th",{children:"Description"}),f.jsx("th",{children:"Manager"}),f.jsx("th",{children:"Employees"}),F&&f.jsx("th",{className:"text-right",children:"Actions"})]})}),f.jsx("tbody",{children:s.map(ce=>f.jsxs("tr",{children:[f.jsx("td",{className:"font-medium",children:ce.name}),f.jsx("td",{children:ce.description}),f.jsx("td",{children:ce.managerName||"N/A"}),f.jsx("td",{children:ce.employeeCount||0}),F&&f.jsxs("td",{className:"text-right",children:[f.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>J(ce),children:f.jsx(Ny,{className:"h-4 w-4"})}),h?.role==="admin"&&f.jsx("button",{className:"btn btn-ghost btn-sm text-error",onClick:()=>le(ce.id),children:f.jsx(_f,{className:"h-4 w-4"})})]})]},ce.id))})]})}),m&&f.jsx("div",{className:"modal modal-open",children:f.jsxs("div",{className:"modal-box",children:[f.jsx("h3",{className:"font-bold text-lg",children:y?"Edit Department":"Add New Department"}),f.jsxs("form",{onSubmit:de,className:"py-4 space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Department Name"})}),f.jsx("input",{type:"text",placeholder:"e.g., Teaching Staff",className:"input input-bordered w-full",value:w,onChange:ce=>T(ce.target.value),required:!0})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Description"})}),f.jsx("textarea",{placeholder:"Brief description of the department",className:"textarea textarea-bordered w-full",value:R,onChange:ce=>M(ce.target.value),rows:3,required:!0})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Manager Name (Optional)"})}),f.jsx("input",{type:"text",placeholder:"e.g., Dr. Emily Wilson",className:"input input-bordered w-full",value:C,onChange:ce=>k(ce.target.value)})]}),f.jsxs("div",{className:"modal-action",children:[f.jsx("button",{className:"btn btn-outline",onClick:se,children:"Cancel"}),f.jsxs("button",{type:"submit",className:"btn btn-primary",children:[f.jsx(n4,{className:"h-5 w-5"})," ",y?"Save Changes":"Add Department"]})]})]})]})})]})},nV=()=>f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Reports"}),f.jsxs("div",{className:"bg-base-100 shadow-lg rounded-lg p-6 text-center",children:[f.jsx("p",{className:"text-lg text-base-content/80",children:"This section will contain various reports and analytics."}),f.jsx("p",{className:"text-sm text-base-content/60 mt-2",children:"(Coming Soon!)"})]})]}),sV=({children:s,className:e=""})=>f.jsx("div",{className:`card bg-base-100 shadow-md rounded-box border border-base-300 ${e}`,children:s}),rV=({children:s,className:e=""})=>f.jsx("div",{className:`card-title text-xl font-bold p-4 border-b border-base-300 ${e}`,children:s}),iV=({children:s,className:e=""})=>f.jsx("div",{className:`text-lg font-semibold ${e}`,children:s}),aV=({children:s,className:e=""})=>f.jsx("div",{className:`card-body p-4 ${e}`,children:s}),Ai=Tn.forwardRef(({className:s="",...e},t)=>f.jsx("label",{ref:t,className:`label-text font-medium text-sm ${s}`,...e}));Ai.displayName="Label";const Si=B.forwardRef(function({className:e="",...t},i){return f.jsx("input",{ref:i,...t,className:`input input-bordered w-full bg-base-100 text-base-content ${e}`})});Si.displayName="Input";const oV=()=>{const{userProfile:s,currentUser:e}=yn();return f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"My Profile"}),f.jsxs(sV,{className:"w-full max-w-2xl mx-auto",children:[f.jsx(rV,{children:f.jsx(iV,{children:"User Information"})}),f.jsxs(aV,{className:"grid gap-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"name",children:"Name"}),f.jsx(Si,{id:"name",value:s?.name||"",readOnly:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"email",children:"Email"}),f.jsx(Si,{id:"email",value:s?.email||e?.email||"",readOnly:!0})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"role",children:"Role"}),f.jsx(Si,{id:"role",value:s?.role||"",readOnly:!0,className:"capitalize"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"department",children:"Department"}),f.jsx(Si,{id:"department",value:s?.department||"N/A",readOnly:!0})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"position",children:"Position"}),f.jsx(Si,{id:"position",value:s?.position||"N/A",readOnly:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"phone",children:"Phone"}),f.jsx(Si,{id:"phone",value:s?.phone||"N/A",readOnly:!0})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Ai,{htmlFor:"createdAt",children:"Member Since"}),f.jsx(Si,{id:"createdAt",value:s?.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A",readOnly:!0})]})]})]})]})},lV=()=>f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),f.jsxs("div",{className:"bg-base-100 shadow-lg rounded-lg p-6 text-center",children:[f.jsx("p",{className:"text-lg text-base-content/80",children:"This section will display your recent notifications."}),f.jsx("p",{className:"text-sm text-base-content/60 mt-2",children:"(Coming Soon!)"})]})]}),cV=()=>f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),f.jsxs("div",{className:"bg-base-100 shadow-lg rounded-lg p-6 text-center",children:[f.jsx("p",{className:"text-lg text-base-content/80",children:"This section will allow you to manage application settings."}),f.jsx("p",{className:"text-sm text-base-content/60 mt-2",children:"(Coming Soon!)"})]})]}),uV=()=>{const[s,e]=B.useState(!1),[t,i]=B.useState("manager"),[o,c]=B.useState(7),[h,m]=B.useState(!1),[g,y]=B.useState(null),{userProfile:_}=yn(),{codes:w,generateCode:T,deleteCode:R,getActiveCodesByRole:M,getUsedCodes:C,getExpiredCodes:k}=Oy(),F=_?.role==="admin",J=async()=>{if(F){m(!0);try{const D=await T(t,o);e(!1),await navigator.clipboard.writeText(D.code),y(D.code),setTimeout(()=>y(null),3e3)}catch(D){console.error("Failed to generate code:",D)}finally{m(!1)}}},se=async D=>{try{await navigator.clipboard.writeText(D),y(D),setTimeout(()=>y(null),2e3)}catch(S){console.error("Failed to copy code:",S)}},de=async D=>{if(F)try{await R(D)}catch(S){console.error("Failed to delete code:",S)}},le=D=>D.isUsed?f.jsx("div",{className:"badge badge-success",children:"Used"}):D.expiresAt<=new Date?f.jsx("div",{className:"badge badge-error",children:"Expired"}):f.jsx("div",{className:"badge badge-warning",children:"Active"}),ce=D=>D==="admin"?f.jsx(sl,{className:"h-4 w-4 text-error"}):f.jsx(Yi,{className:"h-4 w-4 text-warning"});return F?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[f.jsx(jd,{className:"h-7 w-7 text-primary"}),"Invitation Codes"]}),f.jsx("p",{className:"text-base-content/60",children:"Generate and manage registration codes"})]}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>e(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"Generate Code"]})]}),f.jsxs("div",{className:"stats shadow w-full",children:[f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Active Admin Codes"}),f.jsx("div",{className:"stat-value text-error",children:M("admin").length}),f.jsx("div",{className:"stat-desc",children:"Ready to use"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Active Manager Codes"}),f.jsx("div",{className:"stat-value text-warning",children:M("manager").length}),f.jsx("div",{className:"stat-desc",children:"Ready to use"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Used Codes"}),f.jsx("div",{className:"stat-value text-success",children:C().length}),f.jsx("div",{className:"stat-desc",children:"Successful registrations"})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Expired Codes"}),f.jsx("div",{className:"stat-value text-neutral",children:k().length}),f.jsx("div",{className:"stat-desc",children:"Need cleanup"})]})]}),f.jsx("div",{className:"card bg-base-100 shadow-lg",children:f.jsxs("div",{className:"card-body",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table table-zebra",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Code"}),f.jsx("th",{children:"Role"}),f.jsx("th",{children:"Created By"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Expires"}),f.jsx("th",{children:"Used By"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:w.map(D=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("code",{className:"font-mono text-lg font-bold",children:D.code}),f.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>se(D.code),title:"Copy code",children:g===D.code?f.jsx(Jc,{className:"h-4 w-4 text-success"}):f.jsx(MM,{className:"h-4 w-4"})})]})}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-2",children:[ce(D.role),f.jsx("span",{className:"capitalize font-medium",children:D.role})]})}),f.jsx("td",{children:D.createdByName}),f.jsx("td",{children:le(D)}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gf,{className:"h-4 w-4 text-base-content/60"}),f.jsx("span",{className:"text-sm",children:Lc(D.expiresAt,"MMM dd, yyyy")})]})}),f.jsx("td",{children:D.isUsed?f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:D.usedBy}),f.jsx("div",{className:"text-xs text-base-content/60",children:D.usedAt&&Lc(D.usedAt,"MMM dd, yyyy")})]}):f.jsx("span",{className:"text-base-content/40",children:"—"})}),f.jsx("td",{children:!D.isUsed&&f.jsx("button",{className:"btn btn-ghost btn-sm text-error",onClick:()=>de(D.id),title:"Delete code",children:f.jsx(_f,{className:"h-4 w-4"})})})]},D.id))})]})}),w.length===0&&f.jsxs("div",{className:"text-center py-8",children:[f.jsx(jd,{className:"h-16 w-16 text-base-content/20 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No invitation codes"}),f.jsx("p",{className:"text-base-content/60 mb-4",children:"Generate your first invitation code to get started"}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>e(!0),children:[f.jsx(nl,{className:"h-5 w-5"}),"Generate Code"]})]})]})}),s&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-base-100 rounded-lg p-6 max-w-md w-full mx-4",children:[f.jsx("h3",{className:"font-bold text-lg mb-4",children:"Generate Invitation Code"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Role"})}),f.jsxs("select",{className:"select select-bordered w-full",value:t,onChange:D=>i(D.target.value),children:[f.jsx("option",{value:"manager",children:"Manager"}),f.jsx("option",{value:"admin",children:"Administrator"})]}),f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text-alt",children:t==="admin"?"Full system access and management":"Department management and employee oversight"})})]}),f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Expires in (days)"})}),f.jsx("input",{type:"number",className:"input input-bordered w-full",value:o,onChange:D=>c(Number.parseInt(D.target.value)||7),min:1,max:30}),f.jsx("label",{className:"label",children:f.jsxs("span",{className:"label-text-alt",children:["Code will expire in ",o," days"]})})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[f.jsx("button",{className:"btn btn-outline",onClick:()=>e(!1),children:"Cancel"}),f.jsx("button",{className:`btn btn-primary ${h?"loading":""}`,onClick:J,disabled:h,children:h?"Generating...":"Generate Code"})]})]})}),g&&f.jsx("div",{className:"toast toast-top toast-end",children:f.jsxs("div",{className:"alert alert-success",children:[f.jsx(Jc,{className:"h-5 w-5"}),f.jsx("span",{children:"Code copied to clipboard!"})]})})]}):f.jsxs("div",{className:"alert alert-warning",children:[f.jsx(sl,{className:"h-5 w-5"}),f.jsx("span",{children:"Only administrators can manage invitation codes."})]})},hV=()=>{const[s,e]=B.useState("codes"),{userProfile:t}=yn();if(t?.role!=="admin")return f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsxs("div",{className:"alert alert-warning",children:[f.jsx(sl,{className:"h-5 w-5"}),f.jsx("span",{children:"Access denied. Administrator privileges required."})]})});const i=[{id:"codes",label:"Invitation Codes",icon:jd},{id:"users",label:"User Management",icon:Yi},{id:"settings",label:"System Settings",icon:Od},{id:"analytics",label:"Analytics",icon:zE}];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[f.jsx(sl,{className:"h-8 w-8 text-primary"}),"Administration"]}),f.jsx("p",{className:"text-base-content/60",children:"System administration and management"})]}),f.jsx("div",{className:"tabs tabs-boxed",children:i.map(o=>{const c=o.icon;return f.jsxs("button",{className:`tab gap-2 ${s===o.id?"tab-active":""}`,onClick:()=>e(o.id),children:[f.jsx(c,{className:"h-4 w-4"}),o.label]},o.id)})}),f.jsxs("div",{className:"min-h-[400px]",children:[s==="codes"&&f.jsx(uV,{}),s==="users"&&f.jsxs("div",{className:"alert alert-info",children:[f.jsx(Yi,{className:"h-5 w-5"}),f.jsx("span",{children:"User management features coming soon..."})]}),s==="settings"&&f.jsxs("div",{className:"alert alert-info",children:[f.jsx(Od,{className:"h-5 w-5"}),f.jsx("span",{children:"System settings features coming soon..."})]}),s==="analytics"&&f.jsxs("div",{className:"alert alert-info",children:[f.jsx(zE,{className:"h-5 w-5"}),f.jsx("span",{children:"Analytics dashboard coming soon..."})]})]})]})};function dV(){const{loading:s,userProfile:e}=yn();return s?f.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-base-200",children:[f.jsx("span",{className:"loading loading-spinner loading-lg text-primary"}),f.jsx("p",{className:"ml-3 text-lg text-base-content",children:"Loading application..."})]}):f.jsxs(WS,{children:[f.jsx(wn,{path:"/login",element:f.jsx(q4,{})}),f.jsx(wn,{path:"/register",element:f.jsx(F4,{})}),f.jsxs(wn,{path:"/",element:f.jsx(y4,{children:f.jsx(g4,{})}),children:[f.jsx(wn,{index:!0,element:f.jsx(hd,{to:"/dashboard",replace:!0})}),f.jsx(wn,{path:"dashboard",element:f.jsx(H4,{})}),f.jsx(wn,{path:"employees",element:f.jsx($4,{})}),f.jsx(wn,{path:"leave-requests",element:f.jsx(eV,{})}),f.jsx(wn,{path:"departments",element:f.jsx(tV,{})}),f.jsx(wn,{path:"reports",element:f.jsx(nV,{})}),f.jsx(wn,{path:"profile",element:f.jsx(oV,{})}),f.jsx(wn,{path:"notifications",element:f.jsx(lV,{})}),f.jsx(wn,{path:"settings",element:f.jsx(cV,{})}),e?.role==="admin"&&f.jsx(wn,{path:"admin",element:f.jsx(hV,{})}),f.jsx(wn,{path:"*",element:f.jsx(hd,{to:"/dashboard",replace:!0})})]})]})}class fV extends B.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-base-200",children:f.jsx("div",{className:"card w-full max-w-md bg-base-100 shadow-xl",children:f.jsxs("div",{className:"card-body text-center",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx(u4,{className:"h-16 w-16 text-error"})}),f.jsx("h2",{className:"card-title justify-center text-error",children:"Something went wrong!"}),f.jsx("p",{className:"text-base-content/60 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),f.jsx("div",{className:"card-actions justify-center",children:f.jsxs("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:[f.jsx(e4,{className:"h-4 w-4 mr-2"}),"Reload Page"]})})]})})}):this.props.children}}rS.createRoot(document.getElementById("root")).render(f.jsx(Tn.StrictMode,{children:f.jsx(fV,{children:f.jsx(bN,{basename:"/School-Employee-Management-System",children:f.jsx(mM,{children:f.jsx(dV,{})})})})}));
